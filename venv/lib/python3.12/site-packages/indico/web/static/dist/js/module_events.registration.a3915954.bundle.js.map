{"version":3,"file":"js/module_events.registration.a3915954.bundle.js","mappings":"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","sources":["webpack:///indico/modules/events/registration/client/js/components/EmailPendingInvitations.jsx","webpack:///indico/modules/events/registration/client/js/components/EmailPendingInvitationsButton.jsx","webpack:///indico/modules/events/registration/client/js/invitations.js","webpack:///indico/modules/events/registration/client/js/reglists.js","webpack:///indico/modules/events/registration/client/js/components/ConsentToPublishDropdown.jsx","webpack:///indico/modules/events/registration/client/js/components/ConsentToPublishEditor.module.scss?0af3","webpack:///indico/modules/events/registration/client/js/components/ConsentToPublishEditor.jsx","webpack:///indico/modules/events/registration/client/js/components/RegistrationTagsEditableList.module.scss?af8d","webpack:///indico/modules/events/registration/client/js/components/RegistrationTagsEditableList.jsx","webpack:///indico/modules/events/registration/client/js/form/selectors.js","webpack:///indico/modules/events/registration/client/js/form_setup/selectors.js","webpack:///indico/modules/events/registration/client/js/form_setup/actions.js","webpack:///indico/modules/events/registration/client/js/form_setup/reducers.js","webpack:///indico/modules/events/registration/client/styles/regform.module.scss?0576","webpack:///indico/modules/events/registration/client/js/form_setup/DisabledSectionsModal.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/SectionSettingsModal.jsx","webpack:///indico/modules/events/registration/client/js/form_submission/selectors.js","webpack:///indico/modules/events/registration/client/js/form/fields/ChoiceLabel.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/ChoicesSetup.module.scss?d5c0","webpack:///indico/modules/events/registration/client/js/form/fields/ChoicesSetup.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/PlacesLeftLabel.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/AccommodationInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/AccompanyingPersonsInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/BooleanInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/CheckboxInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/CountryInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/DateInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/EmailInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/FileInput.module.scss?1d14","webpack:///indico/modules/events/registration/client/js/form/fields/FileInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/LabelInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/MultiChoiceInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/NumberInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/PhoneInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/PictureInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/SingleChoiceInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/util.js","webpack:///indico/modules/events/registration/client/js/form/fields/TextAreaInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/TextInput.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/TimetableSessions.jsx","webpack:///indico/modules/events/registration/client/js/form/fields/registry.js","webpack:///indico/modules/events/registration/client/js/form/FormItem.jsx","webpack:///indico/modules/events/registration/client/js/form/FormSection.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/ItemTypeDropdown.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/ItemSettingsModal.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/FormSectionSetupActions.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/FormItemSetupActions.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/SetupFormItem.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/SetupFormSection.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/RegistrationFormSetup.jsx","webpack:///indico/modules/events/registration/client/js/form_setup/index.jsx","webpack:///indico/modules/events/registration/client/js/form_submission/actions.js","webpack:///indico/modules/events/registration/client/js/form_submission/reducers.js","webpack:///indico/modules/events/registration/client/js/form_submission/RegistrationFormSubmission.jsx","webpack:///indico/modules/events/registration/client/js/form_submission/index.jsx","webpack:///indico/modules/events/registration/client/js/index.js","webpack:///node_modules/lodash/_baseXor.js","webpack:///node_modules/lodash/differenceBy.js","webpack:///node_modules/lodash/xor.js"],"sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {Dimmer, Loader} from 'semantic-ui-react';\n\nimport {EmailDialog} from 'indico/modules/events/persons/EmailDialog';\nimport {handleSubmitError} from 'indico/react/forms';\nimport {useIndicoAxios} from 'indico/react/hooks';\nimport {indicoAxios} from 'indico/utils/axios';\n\nexport default function EmailPendingInvitations({metadataURL, previewURL, sendURL, onClose}) {\n  const successTimeout = 5000;\n  const [sentCount, setSentCount] = useState(0);\n\n  const {data, loading} = useIndicoAxios(metadataURL);\n  const {\n    senders = [],\n    recipients = [],\n    subject: defaultSubject,\n    body: defaultBody,\n    placeholders = [],\n  } = data || {};\n\n  const handleSubmit = async data => {\n    let resp;\n    try {\n      resp = await indicoAxios.post(sendURL, data);\n    } catch (err) {\n      return handleSubmitError(err);\n    }\n    setSentCount(resp.data.count);\n    setTimeout(() => onClose(), successTimeout);\n  };\n\n  if (loading) {\n    return (\n      <Dimmer active page inverted>\n        <Loader />\n      </Dimmer>\n    );\n  }\n\n  return (\n    <EmailDialog\n      onSubmit={handleSubmit}\n      onClose={onClose}\n      senders={senders}\n      recipients={recipients}\n      previewURL={previewURL}\n      placeholders={placeholders}\n      initialFormValues={{subject: defaultSubject, body: defaultBody}}\n      sentEmailsCount={sentCount}\n    />\n  );\n}\n\nEmailPendingInvitations.propTypes = {\n  metadataURL: PropTypes.string.isRequired,\n  previewURL: PropTypes.string.isRequired,\n  sendURL: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport emailMetadataURL from 'indico-url:event_registration.api_invitations_reminders_metadata';\nimport emailPreviewURL from 'indico-url:event_registration.api_invitations_reminders_preview';\nimport emailSendURL from 'indico-url:event_registration.api_invitations_reminders_send';\n\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\n\nimport {Translate} from 'indico/react/i18n';\n\nimport EmailPendingInvitations from './EmailPendingInvitations';\n\nexport default function EmailPendingInvitationsButton({eventId, regformId, hasPendingInvitations}) {\n  const [open, setOpen] = useState(false);\n  const metadataURL = emailMetadataURL({event_id: eventId, reg_form_id: regformId});\n  const previewURL = emailPreviewURL({event_id: eventId, reg_form_id: regformId});\n  const sendURL = emailSendURL({event_id: eventId, reg_form_id: regformId});\n\n  return (\n    <>\n      <button\n        type=\"button\"\n        className=\"i-button icon-mail\"\n        disabled={!hasPendingInvitations}\n        onClick={() => setOpen(true)}\n      >\n        <Translate>Send reminders</Translate>\n      </button>\n      {open && (\n        <EmailPendingInvitations\n          metadataURL={metadataURL}\n          previewURL={previewURL}\n          sendURL={sendURL}\n          onClose={() => setOpen(false)}\n        />\n      )}\n    </>\n  );\n}\n\nEmailPendingInvitationsButton.propTypes = {\n  eventId: PropTypes.number.isRequired,\n  regformId: PropTypes.number.isRequired,\n  hasPendingInvitations: PropTypes.bool.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* eslint-disable import/unambiguous */\n/* global handleAjaxError:false */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport EmailPendingInvitationsButton from './components/EmailPendingInvitationsButton';\n\n(function(global) {\n  global.setupInvitationPage = function setupInvitationPage({\n    eventId,\n    regformId,\n    hasPendingInvitations,\n  }) {\n    $('#invitation-list').on('indico:confirmed', '.js-invitation-action', function(evt) {\n      evt.preventDefault();\n\n      const $this = $(this);\n      $.ajax({\n        url: $this.data('href'),\n        method: $this.data('method'),\n        complete: IndicoUI.Dialogs.Util.progress(),\n        error: handleAjaxError,\n        success(data) {\n          $('#invitation-list').html(data.invitation_list);\n          renderEmailInvitationsBtn({\n            eventId,\n            regformId,\n            hasPendingInvitations: data.has_pending_invitations,\n          });\n        },\n      });\n    });\n\n    $('.js-invite-user').ajaxDialog({\n      onClose(data) {\n        if (data) {\n          $('#invitation-list').html(data.invitation_list);\n          renderEmailInvitationsBtn({\n            eventId,\n            regformId,\n            hasPendingInvitations: data.has_pending_invitations,\n          });\n        }\n      },\n    });\n\n    renderEmailInvitationsBtn({eventId, regformId, hasPendingInvitations});\n  };\n\n  function renderEmailInvitationsBtn({eventId, regformId, hasPendingInvitations}) {\n    const container = document.getElementById('email-pending-invitations-container');\n    ReactDOM.render(\n      <EmailPendingInvitationsButton\n        eventId={eventId}\n        regformId={regformId}\n        hasPendingInvitations={hasPendingInvitations}\n      />,\n      container\n    );\n  }\n})(window);\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* eslint-disable import/unambiguous */\n/* global setupListGenerator:false, getSelectedRows:false, handleSelectedRowHighlight:false,\n          setupTableSorter:false, ajaxDialog:false, handleAjaxError:false, confirmPrompt:false,\n          build_url:false */\n\nimport {showUserSearch} from 'indico/react/components/principals/imperative';\nimport {$T} from 'indico/utils/i18n';\n\n(function(global) {\n  global.setupRegistrationList = function setupRegistrationList() {\n    setupListGenerator();\n\n    function handleRegListRowSelection() {\n      $('table.i-table input.select-row')\n        .on('change', function() {\n          $('.regform-download-attachments').toggleClass(\n            'disabled',\n            !$('.list input:checkbox:checked[data-has-files=true]').length\n          );\n        })\n        .trigger('change');\n      $('table.i-table input.select-row')\n        .on('change', function() {\n          $('.regform-download-documents').toggleClass(\n            'disabled',\n            !$('.list input:checkbox:checked[data-has-documents=true]').length\n          );\n        })\n        .trigger('change');\n    }\n\n    $('body').on('click', '#preview-email', function() {\n      const $this = $(this);\n      ajaxDialog({\n        url: $this.data('href'),\n        title: $T.gettext('Email Preview'),\n        method: 'POST',\n        data() {\n          return {\n            registration_id: getSelectedRows()[0],\n            subject: $('#subject').val(),\n            body: $('#body').val(),\n          };\n        },\n      });\n    });\n\n    $('.registrations').on('indico:confirmed', '.js-delete-registrations', function(evt) {\n      evt.preventDefault();\n      const $this = $(this);\n      const selectedRows = getSelectedRows();\n      const msg = $T\n        .ngettext(\n          'Do you really want to delete the selected registration?',\n          'Do you really want to delete the {0} selected registrations?',\n          selectedRows.length\n        )\n        .format(selectedRows.length);\n      confirmPrompt(msg).then(function() {\n        $.ajax({\n          url: $this.data('href'),\n          method: $this.data('method'),\n          data: {registration_id: selectedRows},\n          complete: IndicoUI.Dialogs.Util.progress(),\n          error: handleAjaxError,\n          success() {\n            for (let i = 0; i < selectedRows.length; i++) {\n              const row = $(`#registration-${selectedRows[i]}`);\n              row.fadeOut('fast', function() {\n                $(this).remove();\n              });\n            }\n          },\n        });\n      });\n    });\n\n    $('.registrations').on('indico:confirmed', '.js-modify-status', function(evt) {\n      evt.preventDefault();\n      const $this = $(this);\n      const selectedRows = getSelectedRows();\n      $.ajax({\n        url: $this.data('href'),\n        method: $this.data('method'),\n        data: {\n          registration_id: selectedRows,\n          flag: $this.data('flag'),\n        },\n        complete: IndicoUI.Dialogs.Util.progress(),\n        error: handleAjaxError,\n        success(data) {\n          if (data) {\n            $('.list-content').html(data.html);\n            handleSelectedRowHighlight(true);\n            handleRegListRowSelection();\n            setupTableSorter();\n          }\n        },\n      });\n    });\n\n    $('.js-add-user').on('click', async () => {\n      const user = await showUserSearch({\n        withExternalUsers: true,\n        single: true,\n        alwaysConfirm: true,\n      });\n      if (user) {\n        const url = $('.js-add-user').data('href');\n        location.href = build_url(url, {user});\n      }\n    });\n\n    $('.js-add-multiple-users').ajaxDialog({\n      dialogClasses: 'add-multiple-users-dialog',\n      onClose(data) {\n        if (data) {\n          $('.list-content').html(data.html);\n          handleSelectedRowHighlight(true);\n          handleRegListRowSelection();\n          setupTableSorter();\n        }\n      },\n    });\n\n    handleRegListRowSelection();\n  };\n})(window);\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Dropdown} from 'semantic-ui-react';\n\nimport {FinalDropdown} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nexport const publishModePropType = PropTypes.oneOf(['hide_all', 'show_with_consent', 'show_all']);\n\nexport default function ConsentToPublishDropdown({\n  publishToParticipants,\n  publishToPublic,\n  value,\n  useFinalForms,\n  ...extraProps\n}) {\n  if (publishToParticipants === 'hide_all' && publishToPublic === 'hide_all') {\n    return (\n      <Translate>Your participation will only be visible to organizers of this event.</Translate>\n    );\n  } else if (publishToParticipants === 'show_all' && publishToPublic === 'hide_all') {\n    return (\n      <Translate>\n        Your participation will be displayed to other participants of this event.\n      </Translate>\n    );\n  } else if (publishToParticipants === 'show_all' && publishToPublic === 'show_all') {\n    return (\n      <Translate>\n        Your participation will be displayed to everyone who can see this event.\n      </Translate>\n    );\n  } else {\n    const options = [];\n    if (publishToParticipants === 'show_with_consent' || value === 'nobody') {\n      options.push({\n        key: 'nobody',\n        value: 'nobody',\n        text: Translate.string('Do not display my participation to anyone'),\n        disabled: publishToParticipants !== 'show_with_consent',\n      });\n    }\n    options.push({\n      key: 'participants',\n      value: 'participants',\n      text: Translate.string('Display my participation only to other participants of this event'),\n    });\n    if (publishToPublic === 'show_with_consent' || value === 'all') {\n      options.push({\n        key: 'all',\n        value: 'all',\n        text: Translate.string('Display my participation to everyone who can see this event'),\n        disabled: publishToPublic !== 'show_with_consent',\n      });\n    }\n    return useFinalForms ? (\n      <FinalDropdown options={options} selection required fluid {...extraProps} />\n    ) : (\n      <Dropdown options={options} selection fluid value={value} {...extraProps} />\n    );\n  }\n}\n\nConsentToPublishDropdown.propTypes = {\n  publishToParticipants: publishModePropType.isRequired,\n  publishToPublic: publishModePropType.isRequired,\n  value: PropTypes.oneOf(['nobody', 'participants', 'all']),\n  useFinalForms: PropTypes.bool,\n};\n\nConsentToPublishDropdown.defaultProps = {\n  value: null,\n  useFinalForms: false,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"consent-dropdown-container\":\"events-registration-client-js-components-___ConsentToPublishEditor-module__consent-dropdown-container___0HGIs\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport registrationChangeConsent from 'indico-url:event_registration.api_registration_change_consent';\n\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {Icon} from 'semantic-ui-react';\n\nimport {indicoAxios, handleAxiosError} from 'indico/utils/axios';\n\nimport ConsentToPublishDropdown, {publishModePropType} from './ConsentToPublishDropdown';\n\nimport './ConsentToPublishEditor.module.scss';\n\nexport default function ConsentToPublishEditor({\n  locator,\n  publishToParticipants,\n  publishToPublic,\n  initialConsentToPublish,\n}) {\n  const [consentToPublish, setConsentToPublish] = useState(initialConsentToPublish);\n  const [status, setStatus] = useState('');\n\n  async function editConsentToPublish(value) {\n    setConsentToPublish(value);\n    setStatus('loading');\n    try {\n      await indicoAxios.post(registrationChangeConsent(locator), {consent_to_publish: value});\n      setStatus('success');\n    } catch (error) {\n      setStatus('error');\n      setConsentToPublish(consentToPublish);\n      return handleAxiosError(error);\n    }\n  }\n\n  return (\n    <div styleName=\"consent-dropdown-container\">\n      <ConsentToPublishDropdown\n        publishToParticipants={publishToParticipants}\n        publishToPublic={publishToPublic}\n        onChange={(evt, {value}) => editConsentToPublish(value)}\n        value={consentToPublish}\n        loading={status === 'loading'}\n        disabled={status === 'loading'}\n      />\n      {status === 'success' && <Icon name=\"check\" color=\"green\" />}\n      {status === 'error' && <Icon name=\"x\" color=\"red\" />}\n    </div>\n  );\n}\n\nConsentToPublishEditor.propTypes = {\n  locator: PropTypes.object.isRequired,\n  publishToParticipants: publishModePropType.isRequired,\n  publishToPublic: publishModePropType.isRequired,\n  initialConsentToPublish: PropTypes.oneOf(['nobody', 'participants', 'all']).isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"removable-tags-container\":\"events-registration-client-js-components-___RegistrationTagsEditableList-module__removable-tags-container___C2Usb\",\"selectable-tags-container\":\"events-registration-client-js-components-___RegistrationTagsEditableList-module__selectable-tags-container___pwRX2\",\"registration-tag\":\"events-registration-client-js-components-___RegistrationTagsEditableList-module__registration-tag___nAtUC\",\"removable\":\"events-registration-client-js-components-___RegistrationTagsEditableList-module__removable___aNbCV\",\"selectable\":\"events-registration-client-js-components-___RegistrationTagsEditableList-module__selectable___2VM7u\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport registrationTagAssign from 'indico-url:event_registration.api_registration_tags_assign';\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {Icon, Divider, Header, Label} from 'semantic-ui-react';\n\nimport {IButton, PopoverDropdownMenu} from 'indico/react/components';\nimport {Translate} from 'indico/react/i18n';\nimport {indicoAxios, handleAxiosError} from 'indico/utils/axios';\n\nimport './RegistrationTagsEditableList.module.scss';\n\nexport default function RegistrationTagsEditableList({\n  eventId,\n  regformId,\n  registrationId,\n  assignedTags,\n  allTags,\n}) {\n  const [tags, setTags] = useState(assignedTags);\n  const [open, setOpen] = useState(false);\n  const unassignedTags = _.differenceBy(allTags, tags, 'id');\n\n  async function editRegistrationTags({add = [], remove = []}) {\n    try {\n      await indicoAxios.post(registrationTagAssign({reg_form_id: regformId, event_id: eventId}), {\n        registration_id: [registrationId],\n        add,\n        remove,\n      });\n    } catch (error) {\n      return handleAxiosError(error);\n    }\n  }\n\n  function onRemove(tag) {\n    setTags(tags.filter(t => t.id !== tag.id));\n    editRegistrationTags({remove: [tag.id]});\n  }\n\n  function onAdd(tag) {\n    const newTags = _.sortBy([...tags, tag], [t => t.title.toLowerCase()], 'title');\n    setTags(newTags);\n    if (newTags.length === allTags.length) {\n      setOpen(false);\n    }\n    editRegistrationTags({add: [tag.id]});\n  }\n\n  const trigger = (\n    <IButton disabled={unassignedTags.length === 0}>\n      <Translate>Add</Translate>\n      <Icon name=\"caret down\" style={{marginRight: 0}} />\n    </IButton>\n  );\n\n  return (\n    <>\n      <div className=\"icon icon-tag\" />\n      <div className=\"text\">\n        <div className=\"label\">\n          <Translate>Tags</Translate>\n        </div>\n        <div\n          styleName=\"removable-tags-container\"\n          style={{marginTop: tags.length === 0 ? '0' : '3px'}}\n        >\n          {tags.length === 0 ? (\n            <Translate>No tags assigned.</Translate>\n          ) : (\n            tags.map(tag => (\n              <Label\n                size=\"medium\"\n                key={tag.title}\n                styleName=\"registration-tag removable\"\n                color={tag.color}\n              >\n                {tag.title}\n                <Icon name=\"close\" onClick={() => onRemove(tag)} />\n              </Label>\n            ))\n          )}\n        </div>\n      </div>\n      <div className=\"toolbar\">\n        {unassignedTags.length === 0 ? (\n          trigger\n        ) : (\n          <PopoverDropdownMenu\n            onOpen={() => setOpen(true)}\n            onClose={() => setOpen(false)}\n            trigger={trigger}\n            open={open}\n            placement=\"right-start\"\n          >\n            <Header size=\"small\" textAlign=\"center\">\n              <Translate>Add tags</Translate>\n            </Header>\n            <Divider style={{margin: 0}} />\n            <div styleName=\"selectable-tags-container\">\n              {unassignedTags.map(tag => (\n                <div key={tag.title} onClick={() => onAdd(tag)}>\n                  <Label styleName=\"registration-tag selectable\" color={tag.color}>\n                    {tag.title}\n                  </Label>\n                </div>\n              ))}\n            </div>\n          </PopoverDropdownMenu>\n        )}\n      </div>\n    </>\n  );\n}\n\nRegistrationTagsEditableList.propTypes = {\n  eventId: PropTypes.number.isRequired,\n  regformId: PropTypes.number.isRequired,\n  registrationId: PropTypes.number.isRequired,\n  assignedTags: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string.isRequired,\n      color: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  allTags: PropTypes.arrayOf(\n    PropTypes.shape({\n      title: PropTypes.string.isRequired,\n      color: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport {createSelector} from 'reselect';\n\nexport const getStaticData = state => state.staticData;\n\nexport const getFlatSections = state => state.sections;\nexport const getItems = state => state.items;\n\n/** Get an item by its ID. */\nexport const getItemById = createSelector(\n  getItems,\n  (__, itemId) => itemId,\n  (fields, itemId) => fields[itemId]\n);\n\n/** Get the currency used by the registration form. */\nexport const getCurrency = createSelector(\n  getStaticData,\n  staticData => staticData.currency\n);\n\n/** Get a sorted list of enabled top-level sections. */\nconst getSections = createSelector(\n  getFlatSections,\n  sections => _.sortBy(Object.values(sections).filter(s => s.enabled), ['position', 'id'])\n);\n\n/** Get a mapping from section IDs to sorted item lists. */\nconst getSectionItemMapping = createSelector(\n  getFlatSections,\n  getItems,\n  (sections, fields) => {\n    const mapping = new Map(Object.values(sections).map(s => [s.id, []]));\n    _.sortBy(Object.values(fields), ['position', 'id']).forEach(field => {\n      mapping.get(field.sectionId).push(field);\n    });\n    return mapping;\n  }\n);\n\n/** Get the nested form structure of sections and their items. */\nexport const getNestedSections = createSelector(\n  getSections,\n  getSectionItemMapping,\n  (sortedSections, sectionFields) =>\n    sortedSections.map(section => ({\n      ...section,\n      items: sectionFields.get(section.id),\n    }))\n);\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport {createSelector} from 'reselect';\n\nimport {getStaticData, getFlatSections, getItems, getItemById} from '../form/selectors';\n\nexport const isUILocked = state => state.uiLocked;\n\n/** Get a sorted list of disabled sections. */\nexport const getDisabledSections = createSelector(\n  getFlatSections,\n  sections => _.sortBy(Object.values(sections).filter(s => !s.enabled), ['position', 'id'])\n);\n\n/** Get a section by its ID. */\nexport const getSectionById = createSelector(\n  getFlatSections,\n  (__, sectionId) => sectionId,\n  (sections, sectionId) => sections[sectionId]\n);\n\n/** Get the section ID for a given item ID. */\nexport const getSectionIdForItem = createSelector(\n  getItems,\n  (__, itemId) => itemId,\n  (fields, itemId) => fields[itemId].sectionId\n);\n\n/** Check whether an item is a static text field. */\nconst isItemStaticText = createSelector(\n  getItemById,\n  item => item.inputType === 'label'\n);\n\n/** Select the correct URL for an item action dependin on whether it's static text or a field. */\nexport const pickItemURL = createSelector(\n  isItemStaticText,\n  isStaticText => (textURL, fieldURL) => (isStaticText ? textURL : fieldURL)\n);\n\n/** Get the URL path arguments for a regform/section/field operation. */\nexport const getURLParams = createSelector(\n  getStaticData,\n  staticData => {\n    const {eventId, regformId} = staticData;\n    return (sectionId = null, itemId = null) => {\n      const params = {\n        event_id: eventId,\n        reg_form_id: regformId,\n      };\n\n      if (sectionId !== null) {\n        params.section_id = sectionId;\n      }\n\n      if (itemId !== null) {\n        params.field_id = itemId;\n      }\n\n      return params;\n    };\n  }\n);\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport addFieldURL from 'indico-url:event_registration.add_field';\nimport addSectionURL from 'indico-url:event_registration.add_section';\nimport addTextURL from 'indico-url:event_registration.add_text';\nimport modifyFieldURL from 'indico-url:event_registration.modify_field';\nimport modifySectionURL from 'indico-url:event_registration.modify_section';\nimport modifyTextURL from 'indico-url:event_registration.modify_text';\nimport moveFieldURL from 'indico-url:event_registration.move_field';\nimport moveSectionURL from 'indico-url:event_registration.move_section';\nimport moveTextURL from 'indico-url:event_registration.move_text';\nimport toggleFieldURL from 'indico-url:event_registration.toggle_field';\nimport toggleSectionURL from 'indico-url:event_registration.toggle_section';\nimport toggleTextURL from 'indico-url:event_registration.toggle_text';\n\nimport {indicoAxios} from 'indico/utils/axios';\nimport {camelizeKeys} from 'indico/utils/case';\nimport {ajaxAction, submitFormAction} from 'indico/utils/redux';\n\nimport {getSectionIdForItem, getURLParams, pickItemURL} from './selectors';\n\nexport const LOCK_UI = 'Lock interface';\nexport const UNLOCK_UI = 'Unlock interface';\nexport const SET_FORM_DATA = 'Set form data';\nexport const MOVE_SECTION = 'Move section';\nexport const UPDATE_SECTION = 'Update section';\nexport const TOGGLE_SECTION = 'Toggle section';\nexport const REMOVE_SECTION = 'Remove section';\nexport const CREATE_SECTION = 'Create section';\nexport const MOVE_ITEM = 'Move item';\nexport const UPDATE_ITEM = 'Update item';\nexport const REMOVE_ITEM = 'Remove item';\nexport const CREATE_ITEM = 'Create item';\nexport const UPDATE_POSITIONS = 'Update positions';\n\nfunction lockUI() {\n  return {type: LOCK_UI};\n}\n\nfunction unlockUI() {\n  return {type: UNLOCK_UI};\n}\n\nfunction lockingAjaxAction(requestFunc, ...args) {\n  const fn = ajaxAction(requestFunc, ...args);\n  return async dispatch => {\n    dispatch(lockUI());\n    const resp = await fn();\n    dispatch(unlockUI());\n    return resp;\n  };\n}\n\nexport function setFormData(data) {\n  return {type: SET_FORM_DATA, items: data.items, sections: data.sections};\n}\n\nfunction updatePositions(data) {\n  return {type: UPDATE_POSITIONS, items: data.items, sections: data.sections};\n}\n\nexport function moveSection(sourceIndex, targetIndex) {\n  return {type: MOVE_SECTION, sourceIndex, targetIndex};\n}\n\nfunction _toggleSection(sectionId, enabled) {\n  return {type: TOGGLE_SECTION, sectionId, enabled};\n}\n\nfunction _removeSection(sectionId) {\n  return {type: REMOVE_SECTION, sectionId};\n}\n\n// TODO: remove patch mode unless we end up using it\nfunction _updateSection(sectionId, data, patch = false) {\n  return {type: UPDATE_SECTION, sectionId, data, patch};\n}\n\nfunction _createSection(data) {\n  return {type: CREATE_SECTION, data};\n}\n\nexport function moveItem(sectionId, sourceIndex, targetIndex) {\n  return {type: MOVE_ITEM, sectionId, sourceIndex, targetIndex};\n}\n\nfunction _updateItem(itemId, data) {\n  return {type: UPDATE_ITEM, itemId, data};\n}\n\nfunction _removeItem(itemId) {\n  return {type: REMOVE_ITEM, itemId};\n}\n\nfunction _createItem(data) {\n  return {type: CREATE_ITEM, data};\n}\n\nexport function saveSectionPosition(sectionId, position, oldPosition) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const url = moveSectionURL(getURLParams(store)(sectionId));\n    const resp = await lockingAjaxAction(() => indicoAxios.post(url, {endPos: position}))(dispatch);\n    if (resp.error) {\n      // XXX alternatively we could keep the UI locked and require a refresh after\n      // a failure to make sure we are in a fully consistent state...\n      // but moving stuff around is the only case where the local state gets updated\n      // before saving, so it's probably not worth it\n      dispatch(moveSection(position, oldPosition));\n    }\n  };\n}\n\nexport function enableSection(sectionId) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const params = getURLParams(store)(sectionId);\n    const url = toggleSectionURL({...params, enable: 'true'});\n    const resp = await lockingAjaxAction(() => indicoAxios.post(url))(dispatch);\n    if (!resp.error) {\n      dispatch(_toggleSection(sectionId, true));\n      dispatch(updatePositions(resp.data.positions));\n    }\n  };\n}\n\nexport function disableSection(sectionId) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const params = getURLParams(store)(sectionId);\n    const url = toggleSectionURL({...params, enable: 'false'});\n    const resp = await lockingAjaxAction(() => indicoAxios.post(url))(dispatch);\n    if (!resp.error) {\n      dispatch(_toggleSection(sectionId, false));\n      dispatch(updatePositions(resp.data.positions));\n    }\n  };\n}\n\nexport function removeSection(sectionId) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const url = modifySectionURL(getURLParams(store)(sectionId));\n    const resp = await lockingAjaxAction(() => indicoAxios.delete(url))(dispatch);\n    if (!resp.error) {\n      dispatch(_removeSection(sectionId));\n    }\n    return !!resp.error;\n  };\n}\n\nexport function updateSection(sectionId, data) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const url = modifySectionURL(getURLParams(store)(sectionId));\n    const payload = {changes: data};\n    const resp = await submitFormAction(() => indicoAxios.patch(url, payload))(dispatch);\n    if (!resp.error) {\n      delete resp.data.items;\n      dispatch(_updateSection(sectionId, resp.data));\n    }\n    return camelizeKeys(resp);\n  };\n}\n\nexport function createSection(data) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const url = addSectionURL(getURLParams(store)());\n    const resp = await submitFormAction(() => indicoAxios.post(url, data))(dispatch);\n    if (!resp.error) {\n      delete resp.data.items;\n      dispatch(_createSection(resp.data));\n    }\n    return camelizeKeys(resp);\n  };\n}\n\nexport function saveItemPosition(sectionId, itemId, position, oldPosition) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const urlFunc = pickItemURL(store, itemId)(moveTextURL, moveFieldURL);\n    const url = urlFunc(getURLParams(store)(sectionId, itemId));\n    const resp = await lockingAjaxAction(() => indicoAxios.post(url, {endPos: position}))(dispatch);\n    if (resp.error) {\n      // XXX alternatively we could keep the UI locked and require a refresh after\n      // a failure to make sure we are in a fully consistent state...\n      // but moving stuff around is the only case where the local state gets updated\n      // before saving, so it's probably not worth it\n      dispatch(moveItem(sectionId, position, oldPosition));\n    }\n  };\n}\n\nexport function enableItem(itemId) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const sectionId = getSectionIdForItem(store, itemId);\n    const urlFunc = pickItemURL(store, itemId)(toggleTextURL, toggleFieldURL);\n    const params = getURLParams(store)(sectionId, itemId);\n    const url = urlFunc({...params, enable: 'true'});\n    const resp = await lockingAjaxAction(() => indicoAxios.post(url))(dispatch);\n    if (!resp.error) {\n      dispatch(_updateItem(itemId, resp.data.view_data));\n      dispatch(updatePositions(resp.data.positions));\n    }\n  };\n}\n\nexport function disableItem(itemId) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const sectionId = getSectionIdForItem(store, itemId);\n    const urlFunc = pickItemURL(store, itemId)(toggleTextURL, toggleFieldURL);\n    const params = getURLParams(store)(sectionId, itemId);\n    const url = urlFunc({...params, enable: 'false'});\n    const resp = await lockingAjaxAction(() => indicoAxios.post(url))(dispatch);\n    if (!resp.error) {\n      dispatch(_updateItem(itemId, resp.data.view_data));\n      dispatch(updatePositions(resp.data.positions));\n    }\n  };\n}\n\nexport function removeItem(itemId) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const sectionId = getSectionIdForItem(store, itemId);\n    const urlFunc = pickItemURL(store, itemId)(modifyTextURL, modifyFieldURL);\n    const url = urlFunc(getURLParams(store)(sectionId, itemId));\n    const resp = await lockingAjaxAction(() => indicoAxios.delete(url))(dispatch);\n    if (!resp.error) {\n      dispatch(_removeItem(itemId));\n    }\n    return !!resp.error;\n  };\n}\n\nexport function updateItem(itemId, data) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const sectionId = getSectionIdForItem(store, itemId);\n    const urlFunc = pickItemURL(store, itemId)(modifyTextURL, modifyFieldURL);\n    const url = urlFunc(getURLParams(store)(sectionId, itemId));\n    const payload = {fieldData: data};\n    const resp = await submitFormAction(() => indicoAxios.patch(url, payload))(dispatch);\n    if (!resp.error) {\n      dispatch(_updateItem(itemId, resp.data.view_data));\n    }\n    return camelizeKeys(resp);\n  };\n}\n\nexport function createItem(sectionId, inputType, data) {\n  return async (dispatch, getStore) => {\n    const store = getStore();\n    const urlFunc = inputType === 'label' ? addTextURL : addFieldURL;\n    const url = urlFunc(getURLParams(store)(sectionId));\n    const payload = {fieldData: {...data, input_type: inputType}};\n    const resp = await submitFormAction(() => indicoAxios.post(url, payload))(dispatch);\n    if (!resp.error) {\n      dispatch(_createItem(resp.data.view_data));\n    }\n    return camelizeKeys(resp);\n  };\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\n\nimport {\n  CREATE_ITEM,\n  CREATE_SECTION,\n  LOCK_UI,\n  MOVE_ITEM,\n  MOVE_SECTION,\n  REMOVE_ITEM,\n  REMOVE_SECTION,\n  SET_FORM_DATA,\n  TOGGLE_SECTION,\n  UNLOCK_UI,\n  UPDATE_ITEM,\n  UPDATE_POSITIONS,\n  UPDATE_SECTION,\n} from './actions';\n\nexport default {\n  uiLocked: (state = false, action) => {\n    switch (action.type) {\n      case LOCK_UI:\n        return true;\n      case UNLOCK_UI:\n        return false;\n      default:\n        return state;\n    }\n  },\n  items: (state = {}, action) => {\n    switch (action.type) {\n      case SET_FORM_DATA:\n        return action.items;\n      case CREATE_ITEM:\n        return {\n          ...state,\n          [action.data.id]: action.data,\n        };\n      case UPDATE_ITEM:\n        return {...state, [action.itemId]: action.data};\n      case UPDATE_POSITIONS: {\n        const newState = {...state};\n        Object.entries(action.items)\n          .filter(([id]) => id in newState)\n          .forEach(([id, position]) => {\n            newState[id] = {...newState[id], position};\n          });\n        return newState;\n      }\n      case REMOVE_ITEM:\n        return _.omit(state, action.itemId);\n      case REMOVE_SECTION:\n        return _.omitBy(state, item => item.sectionId === action.sectionId);\n      case MOVE_ITEM: {\n        const sorted = _.sortBy(\n          Object.values(state).filter(f => f.sectionId === action.sectionId),\n          ['position', 'id']\n        );\n        const sourceItem = sorted[action.sourceIndex];\n        sorted.splice(action.sourceIndex, 1);\n        sorted.splice(action.targetIndex, 0, sourceItem);\n        // use same positioning logic as on the server side. not sure if it's needed, we\n        // could probably stick with just incrementing, but it might avoid some re-renders..\n        let enabledPos = 1;\n        let disabledPos = 1000;\n        const newState = {...state};\n        sorted.forEach(item => {\n          newState[item.id] = {...item, position: item.isEnabled ? enabledPos++ : disabledPos++};\n        });\n        return newState;\n      }\n      default:\n        return state;\n    }\n  },\n  sections: (state = {}, action) => {\n    switch (action.type) {\n      case SET_FORM_DATA:\n        return action.sections;\n      case TOGGLE_SECTION:\n        return {\n          ...state,\n          [action.sectionId]: {...state[action.sectionId], enabled: action.enabled},\n        };\n      case CREATE_SECTION:\n        return {\n          ...state,\n          [action.data.id]: action.data,\n        };\n      case UPDATE_SECTION:\n        return {\n          ...state,\n          [action.sectionId]: action.patch\n            ? {...state[action.sectionId], ...action.data}\n            : action.data,\n        };\n      case UPDATE_POSITIONS: {\n        const newState = {...state};\n        Object.entries(action.sections)\n          .filter(([id]) => id in newState)\n          .forEach(([id, position]) => {\n            newState[id] = {...newState[id], position};\n          });\n        return newState;\n      }\n      case REMOVE_SECTION:\n        return _.omit(state, action.sectionId);\n      case MOVE_SECTION: {\n        const sorted = _.sortBy(Object.values(state), ['position', 'id']);\n        const sourceSection = sorted[action.sourceIndex];\n        sorted.splice(action.sourceIndex, 1);\n        sorted.splice(action.targetIndex, 0, sourceSection);\n        // use same positioning logic as on the server side. not sure if it's needed, we\n        // could probably stick with just incrementing, but it might avoid some re-renders..\n        let enabledPos = 1;\n        let disabledPos = 1000;\n        const newState = {...state};\n        sorted.forEach(section => {\n          newState[section.id] = {\n            ...section,\n            position: section.enabled ? enabledPos++ : disabledPos++,\n          };\n        });\n        return newState;\n      }\n      default:\n        return state;\n    }\n  },\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"form-item\":\"events-registration-client-styles-___regform-module__form-item___AlbiE\",\"editable\":\"events-registration-client-styles-___regform-module__editable___ZHQMz\",\"disabled\":\"events-registration-client-styles-___regform-module__disabled___A4p+q\",\"sortable-handle\":\"events-registration-client-styles-___regform-module__sortable-handle___yz1-x\",\"section-sortable-handle\":\"events-registration-client-styles-___regform-module__section-sortable-handle___ABMeH\",\"inactive\":\"events-registration-client-styles-___regform-module__inactive___iUbDS\",\"icon-agreement\":\"events-registration-client-styles-___regform-module__icon-agreement___CGUr9\",\"icon-alarm\":\"events-registration-client-styles-___regform-module__icon-alarm___kNPBx\",\"icon-arrow-down\":\"events-registration-client-styles-___regform-module__icon-arrow-down___oINfy\",\"icon-arrow-left\":\"events-registration-client-styles-___regform-module__icon-arrow-left___cTKTD\",\"icon-arrow-right-sparse\":\"events-registration-client-styles-___regform-module__icon-arrow-right-sparse___pdeAp\",\"icon-arrow-up\":\"events-registration-client-styles-___regform-module__icon-arrow-up___k7aGV\",\"icon-arrows-vert\":\"events-registration-client-styles-___regform-module__icon-arrows-vert___cCt1M\",\"icon-attachment\":\"events-registration-client-styles-___regform-module__icon-attachment___Cshey\",\"icon-bell\":\"events-registration-client-styles-___regform-module__icon-bell___OKsRo\",\"icon-bold\":\"events-registration-client-styles-___regform-module__icon-bold___b+UXe\",\"icon-book\":\"events-registration-client-styles-___regform-module__icon-book___3DNju\",\"icon-bookmark\":\"events-registration-client-styles-___regform-module__icon-bookmark___TcUDY\",\"icon-broadcast\":\"events-registration-client-styles-___regform-module__icon-broadcast___JqlYQ\",\"icon-bubble-quote\":\"events-registration-client-styles-___regform-module__icon-bubble-quote___SIe5i\",\"icon-bullhorn\":\"events-registration-client-styles-___regform-module__icon-bullhorn___DaU0x\",\"icon-calendar\":\"events-registration-client-styles-___regform-module__icon-calendar___3+8tS\",\"icon-calendar-day\":\"events-registration-client-styles-___regform-module__icon-calendar-day___GXjUg\",\"icon-camera\":\"events-registration-client-styles-___regform-module__icon-camera___-tCzt\",\"icon-chart\":\"events-registration-client-styles-___regform-module__icon-chart___MTO3l\",\"icon-checkbox-checked\":\"events-registration-client-styles-___regform-module__icon-checkbox-checked___EkWuS\",\"icon-checkbox-unchecked\":\"events-registration-client-styles-___regform-module__icon-checkbox-unchecked___KQJJT\",\"icon-checkmark\":\"events-registration-client-styles-___regform-module__icon-checkmark___2VU2L\",\"icon-circle-small\":\"events-registration-client-styles-___regform-module__icon-circle-small___U7rY1\",\"icon-clipboard\":\"events-registration-client-styles-___regform-module__icon-clipboard___Fm-0o\",\"icon-close\":\"events-registration-client-styles-___regform-module__icon-close___M1uWT\",\"icon-cloud2\":\"events-registration-client-styles-___regform-module__icon-cloud2___-1vrI\",\"icon-code\":\"events-registration-client-styles-___regform-module__icon-code___Sisqn\",\"icon-coins\":\"events-registration-client-styles-___regform-module__icon-coins___rBXDy\",\"icon-collapse\":\"events-registration-client-styles-___regform-module__icon-collapse___+Q+Vt\",\"icon-compass2\":\"events-registration-client-styles-___regform-module__icon-compass2___jPZMp\",\"icon-copy\":\"events-registration-client-styles-___regform-module__icon-copy___f0WEh\",\"icon-copy1\":\"events-registration-client-styles-___regform-module__icon-copy1___HmDSa\",\"icon-cross\":\"events-registration-client-styles-___regform-module__icon-cross___kff3l\",\"icon-disable\":\"events-registration-client-styles-___regform-module__icon-disable___i0+FF\",\"icon-drag-indicator\":\"events-registration-client-styles-___regform-module__icon-drag-indicator___xzm8r\",\"icon-dropmenu\":\"events-registration-client-styles-___regform-module__icon-dropmenu___doH2P\",\"icon-earth\":\"events-registration-client-styles-___regform-module__icon-earth___-GEjw\",\"icon-edit\":\"events-registration-client-styles-___regform-module__icon-edit___VOIRG\",\"icon-enlarge\":\"events-registration-client-styles-___regform-module__icon-enlarge___oDU7c\",\"icon-enter\":\"events-registration-client-styles-___regform-module__icon-enter___YaDYr\",\"icon-equalizer\":\"events-registration-client-styles-___regform-module__icon-equalizer___ipjL7\",\"icon-exit\":\"events-registration-client-styles-___regform-module__icon-exit___9GDVX\",\"icon-expand\":\"events-registration-client-styles-___regform-module__icon-expand___OKU0z\",\"icon-eye\":\"events-registration-client-styles-___regform-module__icon-eye___oMkY0\",\"icon-eye-blocked\":\"events-registration-client-styles-___regform-module__icon-eye-blocked___JW7S4\",\"icon-unlisted-event\":\"events-registration-client-styles-___regform-module__icon-unlisted-event___bXVDQ\",\"icon-file\":\"events-registration-client-styles-___regform-module__icon-file___SA4Pg\",\"icon-file-check\":\"events-registration-client-styles-___regform-module__icon-file-check___bkrCO\",\"icon-file-content\":\"events-registration-client-styles-___regform-module__icon-file-content___FRm4Q\",\"icon-file-css\":\"events-registration-client-styles-___regform-module__icon-file-css___83v9J\",\"icon-file-download\":\"events-registration-client-styles-___regform-module__icon-file-download___kDiTh\",\"icon-file-excel\":\"events-registration-client-styles-___regform-module__icon-file-excel___Kk9Wc\",\"icon-file-eye\":\"events-registration-client-styles-___regform-module__icon-file-eye___59Z59\",\"icon-file-filled\":\"events-registration-client-styles-___regform-module__icon-file-filled___3+O4R\",\"icon-file-image\":\"events-registration-client-styles-___regform-module__icon-file-image___IpOcP\",\"icon-file-music\":\"events-registration-client-styles-___regform-module__icon-file-music___wBH9H\",\"icon-file-openoffice\":\"events-registration-client-styles-___regform-module__icon-file-openoffice___pCj-m\",\"icon-file-pdf\":\"events-registration-client-styles-___regform-module__icon-file-pdf___-eja7\",\"icon-file-play\":\"events-registration-client-styles-___regform-module__icon-file-play___UjrRu\",\"icon-file-presentation\":\"events-registration-client-styles-___regform-module__icon-file-presentation___3zIdX\",\"icon-file-spreadsheet\":\"events-registration-client-styles-___regform-module__icon-file-spreadsheet___syZH7\",\"icon-file-text\":\"events-registration-client-styles-___regform-module__icon-file-text___5Qubc\",\"icon-file-video\":\"events-registration-client-styles-___regform-module__icon-file-video___F3wMJ\",\"icon-file-word\":\"events-registration-client-styles-___regform-module__icon-file-word___AjXzu\",\"icon-file-xml\":\"events-registration-client-styles-___regform-module__icon-file-xml___ewSmd\",\"icon-file-zip\":\"events-registration-client-styles-___regform-module__icon-file-zip___hyt8M\",\"icon-filter\":\"events-registration-client-styles-___regform-module__icon-filter___InJb-\",\"icon-first\":\"events-registration-client-styles-___regform-module__icon-first___GlLuB\",\"icon-floppy\":\"events-registration-client-styles-___regform-module__icon-floppy___stDTm\",\"icon-folder\":\"events-registration-client-styles-___regform-module__icon-folder___XzO6v\",\"icon-folder-open\":\"events-registration-client-styles-___regform-module__icon-folder-open___fY3mI\",\"icon-folder-plus\":\"events-registration-client-styles-___regform-module__icon-folder-plus___WSHLw\",\"icon-font-size\":\"events-registration-client-styles-___regform-module__icon-font-size___-AfeO\",\"icon-grid\":\"events-registration-client-styles-___regform-module__icon-grid___EwLS3\",\"icon-grid2\":\"events-registration-client-styles-___regform-module__icon-grid2___E5Px0\",\"icon-hammer\":\"events-registration-client-styles-___regform-module__icon-hammer___7k7vk\",\"icon-handle\":\"events-registration-client-styles-___regform-module__icon-handle___BLj2J\",\"icon-home\":\"events-registration-client-styles-___regform-module__icon-home___rvScu\",\"icon-hour-glass2\":\"events-registration-client-styles-___regform-module__icon-hour-glass2___5o5sK\",\"icon-id-badge\":\"events-registration-client-styles-___regform-module__icon-id-badge___8Kkd-\",\"icon-image\":\"events-registration-client-styles-___regform-module__icon-image___XCTA2\",\"icon-import\":\"events-registration-client-styles-___regform-module__icon-import___QVoRL\",\"icon-info\":\"events-registration-client-styles-___regform-module__icon-info___MA0xq\",\"icon-italic\":\"events-registration-client-styles-___regform-module__icon-italic___LGAU6\",\"icon-key\":\"events-registration-client-styles-___regform-module__icon-key___Elm0q\",\"icon-key-a\":\"events-registration-client-styles-___regform-module__icon-key-a___-2hmS\",\"icon-lamp\":\"events-registration-client-styles-___regform-module__icon-lamp___8E73m\",\"icon-lan\":\"events-registration-client-styles-___regform-module__icon-lan___WzpsU\",\"icon-last\":\"events-registration-client-styles-___regform-module__icon-last___7Ig0g\",\"icon-layout\":\"events-registration-client-styles-___regform-module__icon-layout___PrdWO\",\"icon-link\":\"events-registration-client-styles-___regform-module__icon-link___5iBep\",\"icon-list\":\"events-registration-client-styles-___regform-module__icon-list___y9h5b\",\"icon-location\":\"events-registration-client-styles-___regform-module__icon-location___EyneB\",\"icon-lock\":\"events-registration-client-styles-___regform-module__icon-lock___4rhKo\",\"icon-protection-self\":\"events-registration-client-styles-___regform-module__icon-protection-self___i0Xkv\",\"icon-lock-center\":\"events-registration-client-styles-___regform-module__icon-lock-center___65hiM\",\"icon-loop\":\"events-registration-client-styles-___regform-module__icon-loop___R7rVx\",\"icon-mail\":\"events-registration-client-styles-___regform-module__icon-mail___ZGZOq\",\"icon-medal\":\"events-registration-client-styles-___regform-module__icon-medal___PMzja\",\"icon-mic\":\"events-registration-client-styles-___regform-module__icon-mic___gmYYd\",\"icon-mobile\":\"events-registration-client-styles-___regform-module__icon-mobile___S5fl0\",\"icon-move\":\"events-registration-client-styles-___regform-module__icon-move___zHFpb\",\"icon-new\":\"events-registration-client-styles-___regform-module__icon-new___ztXxM\",\"icon-next\":\"events-registration-client-styles-___regform-module__icon-next___TqPZM\",\"icon-no-camera\":\"events-registration-client-styles-___regform-module__icon-no-camera___QRCrL\",\"icon-numbered-list\":\"events-registration-client-styles-___regform-module__icon-numbered-list___FMjI-\",\"icon-package-download\":\"events-registration-client-styles-___regform-module__icon-package-download___+AALu\",\"icon-pagebreak\":\"events-registration-client-styles-___regform-module__icon-pagebreak___iPCbt\",\"icon-palette\":\"events-registration-client-styles-___regform-module__icon-palette___8Ad3S\",\"icon-phone\":\"events-registration-client-styles-___regform-module__icon-phone___mjNNN\",\"icon-play\":\"events-registration-client-styles-___regform-module__icon-play___kZdQk\",\"icon-plus\":\"events-registration-client-styles-___regform-module__icon-plus___I0p2w\",\"icon-prev\":\"events-registration-client-styles-___regform-module__icon-prev___rrWJK\",\"icon-price-tag\":\"events-registration-client-styles-___regform-module__icon-price-tag___n-Ahz\",\"icon-printer\":\"events-registration-client-styles-___regform-module__icon-printer___0X2pj\",\"icon-projector\":\"events-registration-client-styles-___regform-module__icon-projector___JJ+UA\",\"icon-puzzle\":\"events-registration-client-styles-___regform-module__icon-puzzle___JBeHk\",\"icon-qrcode\":\"events-registration-client-styles-___regform-module__icon-qrcode___u2d1U\",\"icon-question\":\"events-registration-client-styles-___regform-module__icon-question___G1SVz\",\"icon-quill\":\"events-registration-client-styles-___regform-module__icon-quill___cYbLJ\",\"icon-redo\":\"events-registration-client-styles-___regform-module__icon-redo___eenAn\",\"icon-remove\":\"events-registration-client-styles-___regform-module__icon-remove___zB1HO\",\"icon-rulers\":\"events-registration-client-styles-___regform-module__icon-rulers___YpZ9C\",\"icon-search\":\"events-registration-client-styles-___regform-module__icon-search___vBkPO\",\"icon-settings\":\"events-registration-client-styles-___regform-module__icon-settings___-RC8+\",\"icon-seven-segment9\":\"events-registration-client-styles-___regform-module__icon-seven-segment9___dMv7-\",\"icon-shield\":\"events-registration-client-styles-___regform-module__icon-shield___1gXDa\",\"icon-shrink\":\"events-registration-client-styles-___regform-module__icon-shrink___PcJku\",\"icon-sort\":\"events-registration-client-styles-___regform-module__icon-sort___E20Uw\",\"icon-sort-alpha-asc\":\"events-registration-client-styles-___regform-module__icon-sort-alpha-asc___t7MN5\",\"icon-sort-alpha-desc\":\"events-registration-client-styles-___regform-module__icon-sort-alpha-desc___DGUp4\",\"icon-split\":\"events-registration-client-styles-___regform-module__icon-split___kR9h-\",\"icon-stack\":\"events-registration-client-styles-___regform-module__icon-stack___Exo35\",\"icon-stack-minus\":\"events-registration-client-styles-___regform-module__icon-stack-minus___eiySZ\",\"icon-stack-plus\":\"events-registration-client-styles-___regform-module__icon-stack-plus___OIM17\",\"icon-stack-text\":\"events-registration-client-styles-___regform-module__icon-stack-text___T0hFV\",\"icon-star\":\"events-registration-client-styles-___regform-module__icon-star___VQDnr\",\"icon-star-empty\":\"events-registration-client-styles-___regform-module__icon-star-empty___rJq0O\",\"icon-stop\":\"events-registration-client-styles-___regform-module__icon-stop___rw-0z\",\"icon-switchoff\":\"events-registration-client-styles-___regform-module__icon-switchoff___Pr731\",\"icon-switchon\":\"events-registration-client-styles-___regform-module__icon-switchon___wdLJK\",\"icon-tag\":\"events-registration-client-styles-___regform-module__icon-tag___qBaj3\",\"icon-text-color\":\"events-registration-client-styles-___regform-module__icon-text-color___ddRre\",\"icon-textarea\":\"events-registration-client-styles-___regform-module__icon-textarea___3nbN1\",\"icon-textfield\":\"events-registration-client-styles-___regform-module__icon-textfield___zxLIK\",\"icon-ticket\":\"events-registration-client-styles-___regform-module__icon-ticket___cM2Di\",\"icon-tilde\":\"events-registration-client-styles-___regform-module__icon-tilde___zkQbA\",\"icon-time\":\"events-registration-client-styles-___regform-module__icon-time___4VKEZ\",\"icon-transmission\":\"events-registration-client-styles-___regform-module__icon-transmission___NWeMY\",\"icon-type\":\"events-registration-client-styles-___regform-module__icon-type___Df8xt\",\"icon-undo\":\"events-registration-client-styles-___regform-module__icon-undo___ySM-t\",\"icon-unlocked\":\"events-registration-client-styles-___regform-module__icon-unlocked___6WfEX\",\"icon-protection-public\":\"events-registration-client-styles-___regform-module__icon-protection-public___lk89M\",\"icon-upload\":\"events-registration-client-styles-___regform-module__icon-upload___rgQw9\",\"icon-user\":\"events-registration-client-styles-___regform-module__icon-user___websN\",\"icon-user-block\":\"events-registration-client-styles-___regform-module__icon-user-block___KvT93\",\"icon-user-chairperson\":\"events-registration-client-styles-___regform-module__icon-user-chairperson___uxY38\",\"icon-user-check\":\"events-registration-client-styles-___regform-module__icon-user-check___5dQk-\",\"icon-user-reading\":\"events-registration-client-styles-___regform-module__icon-user-reading___BEVFl\",\"icon-users\":\"events-registration-client-styles-___regform-module__icon-users___MDJP5\",\"icon-warning\":\"events-registration-client-styles-___regform-module__icon-warning___9bvHC\",\"icon-wrench\":\"events-registration-client-styles-___regform-module__icon-wrench___VL5eL\",\"icon-spinner\":\"events-registration-client-styles-___regform-module__icon-spinner___tLLm2\",\"icon-none\":\"events-registration-client-styles-___regform-module__icon-none___Tb7hM\",\"ellipsis\":\"events-registration-client-styles-___regform-module__ellipsis___jTFui\",\"setup-toolbar\":\"events-registration-client-styles-___regform-module__setup-toolbar___tu1Kv\",\"disabled-sections\":\"events-registration-client-styles-___regform-module__disabled-sections___TthNB\",\"actions\":\"events-registration-client-styles-___regform-module__actions___yuXgO\",\"content\":\"events-registration-client-styles-___regform-module__content___dKw31\",\"paid-disabled\":\"events-registration-client-styles-___regform-module__paid-disabled___e8zT-\",\"purged-disabled\":\"events-registration-client-styles-___regform-module__purged-disabled___oo16L\",\"label\":\"events-registration-client-styles-___regform-module__label___t11lD\",\"field\":\"events-registration-client-styles-___regform-module__field___mpG7J\",\"price-tag\":\"events-registration-client-styles-___regform-module__price-tag___pz3tt\",\"places-left\":\"events-registration-client-styles-___regform-module__places-left___6O4Ev\",\"greyed\":\"events-registration-client-styles-___regform-module__greyed___HZLen\",\"number-field\":\"events-registration-client-styles-___regform-module__number-field___LtuaG\",\"boolean-field\":\"events-registration-client-styles-___regform-module__boolean-field___0geJs\",\"date-field\":\"events-registration-client-styles-___regform-module__date-field___LToLh\",\"file-field\":\"events-registration-client-styles-___regform-module__file-field___1Nup7\",\"accommodation-field\":\"events-registration-client-styles-___regform-module__accommodation-field___WHQ+0\",\"date-picker\":\"events-registration-client-styles-___regform-module__date-picker___zVaWU\",\"accompanyingpersons-field\":\"events-registration-client-styles-___regform-module__accompanyingpersons-field___MUvS6\",\"light\":\"events-registration-client-styles-___regform-module__light___gdy5g\",\"summary\":\"events-registration-client-styles-___regform-module__summary___Krn7Y\",\"timetablesessions-field\":\"events-registration-client-styles-___regform-module__timetablesessions-field___t1Ljf\",\"country-dropdown\":\"events-registration-client-styles-___regform-module__country-dropdown___Hhf-Y\",\"single-choice-dropdown\":\"events-registration-client-styles-___regform-module__single-choice-dropdown___tzmJ5\",\"dropdown-text\":\"events-registration-client-styles-___regform-module__dropdown-text___GB4OB\",\"caption\":\"events-registration-client-styles-___regform-module__caption___u54ZN\",\"labels\":\"events-registration-client-styles-___regform-module__labels___Zy8f7\",\"single-choice-radio-group\":\"events-registration-client-styles-___regform-module__single-choice-radio-group___E9qIt\",\"description\":\"events-registration-client-styles-___regform-module__description___abkAU\",\"header-wrapper\":\"events-registration-client-styles-___regform-module__header-wrapper___U6gJN\",\"manager-only\":\"events-registration-client-styles-___regform-module__manager-only___PQwvG\",\"section-actions\":\"events-registration-client-styles-___regform-module__section-actions___p3bRe\",\"dropdown-menu\":\"events-registration-client-styles-___regform-module__dropdown-menu___9uq+D\",\"dropdown-item\":\"events-registration-client-styles-___regform-module__dropdown-item___chpZW\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React, {useEffect, useState} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {Icon, Modal, Popup, Segment} from 'semantic-ui-react';\n\nimport {RequestConfirmDelete} from 'indico/react/components';\nimport {Translate, Param} from 'indico/react/i18n';\n\nimport * as actions from './actions';\nimport {getDisabledSections} from './selectors';\n\nimport '../../styles/regform.module.scss';\n\nfunction DisabledSection({id, title}) {\n  const dispatch = useDispatch();\n  const [confirmDeleteActive, setConfirmDeleteActive] = useState(false);\n\n  const handleEnableClick = () => {\n    dispatch(actions.enableSection(id));\n  };\n\n  const handleRemoveClick = () => {\n    setConfirmDeleteActive(true);\n  };\n\n  return (\n    <Segment>\n      <span>{title}</span>\n      <div styleName=\"actions\">\n        <Popup\n          content={Translate.string('Restore')}\n          trigger={\n            <Icon\n              name=\"undo\"\n              color=\"grey\"\n              size=\"small\"\n              onClick={handleEnableClick}\n              circular\n              inverted\n            />\n          }\n        />\n        <Popup\n          content={Translate.string('Delete')}\n          trigger={\n            <Icon\n              name=\"trash\"\n              color=\"red\"\n              size=\"small\"\n              onClick={handleRemoveClick}\n              circular\n              inverted\n            />\n          }\n        />\n      </div>\n      <RequestConfirmDelete\n        requestFunc={() => dispatch(actions.removeSection(id))}\n        onClose={() => setConfirmDeleteActive(false)}\n        open={confirmDeleteActive}\n        size=\"mini\"\n        persistent\n      >\n        <Translate>\n          Are you sure you want to delete the section \"\n          <Param name=\"field\" value={title} wrapper={<strong />} />\n          \"?\n        </Translate>\n      </RequestConfirmDelete>\n    </Segment>\n  );\n}\n\nDisabledSection.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n};\n\nexport default function DisabledSectionsModal({onClose}) {\n  const sections = useSelector(getDisabledSections);\n\n  useEffect(() => {\n    // auto-close when there are no disabled sections left\n    if (!sections.length) {\n      onClose();\n    }\n  }, [onClose, sections.length]);\n\n  return (\n    <Modal open closeIcon size=\"mini\" onClose={onClose}>\n      <Modal.Header>\n        <Translate>Disabled sections</Translate>\n      </Modal.Header>\n      <Modal.Content>\n        <div styleName=\"disabled-sections\">\n          {sections.length\n            ? sections.map(section => <DisabledSection key={section.id} {...section} />)\n            : Translate.string('There are no disabled sections.')}\n        </div>\n      </Modal.Content>\n    </Modal>\n  );\n}\n\nDisabledSectionsModal.propTypes = {\n  onClose: PropTypes.func.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\n\nimport {FinalInput, FinalTextArea, FinalCheckbox} from 'indico/react/forms';\nimport {FinalModalForm} from 'indico/react/forms/final-form';\nimport {Translate, Param} from 'indico/react/i18n';\n\nimport * as actions from './actions';\nimport {getSectionById} from './selectors';\n\nimport '../../styles/regform.module.scss';\n\nexport default function SectionSettingsModal({id, onClose}) {\n  const dispatch = useDispatch();\n  const editing = id !== null;\n  const {title, description, isPersonalData, isManagerOnly} = useSelector(state =>\n    editing ? getSectionById(state, id) : {}\n  );\n\n  const handleSubmit = async formData => {\n    const action = editing ? actions.updateSection(id, formData) : actions.createSection(formData);\n    const rv = await dispatch(action);\n    if (rv.error) {\n      return rv.error;\n    }\n    onClose();\n  };\n\n  return (\n    <FinalModalForm\n      id=\"regform-section-settings\"\n      onSubmit={handleSubmit}\n      onClose={onClose}\n      initialValues={editing ? {title, description, is_manager_only: isManagerOnly} : null}\n      header={\n        editing ? (\n          <Translate>\n            Configure section \"<Param name=\"section\" value={title} />\"\n          </Translate>\n        ) : (\n          <Translate>Add new section</Translate>\n        )\n      }\n    >\n      <FinalInput name=\"title\" label={Translate.string('Title')} required autoFocus />\n      <FinalTextArea\n        name=\"description\"\n        label={Translate.string('Description')}\n        description={<Translate>You can use Markdown or basic HTML formatting tags.</Translate>}\n      />\n      <FinalCheckbox\n        disabled={isPersonalData}\n        name=\"is_manager_only\"\n        label={Translate.string('Manager-only')}\n        description={<Translate>Whether the section is only visible for managers.</Translate>}\n      />\n    </FinalModalForm>\n  );\n}\n\nSectionSettingsModal.propTypes = {\n  id: PropTypes.number,\n  onClose: PropTypes.func.isRequired,\n};\n\nSectionSettingsModal.defaultProps = {\n  id: null,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport {createSelector} from 'reselect';\n\nimport {getItemById, getStaticData} from '../form/selectors';\n\nexport const getUserInfo = createSelector(\n  getStaticData,\n  staticData => staticData.userInfo\n);\n\n/** Indicates whether we are updating the registration */\nexport const getUpdateMode = createSelector(\n  getStaticData,\n  staticData => !!staticData.registrationUuid\n);\n\n/** Get the stored field values when editing a registration */\nexport const getRegistrationData = createSelector(\n  getStaticData,\n  staticData => staticData.registrationData\n);\n\n/** Indicates whether the registration is moderated */\nexport const getModeration = createSelector(\n  getStaticData,\n  staticData => staticData.moderated\n);\n\n/** Indicates whether this is rendered in the management area */\nexport const getManagement = createSelector(\n  getStaticData,\n  staticData => staticData.management || false\n);\n\n/** Indicates whether this registration has already been paid */\nexport const getPaid = createSelector(\n  getStaticData,\n  staticData => staticData.paid || false\n);\n\n/** Indicates the registration form's publishing to other participants mode */\nexport const getPublishToParticipants = createSelector(\n  getStaticData,\n  staticData => staticData.publishToParticipants\n);\n\n/** Indicates the registration form's public publishing mode */\nexport const getPublishToPublic = createSelector(\n  getStaticData,\n  staticData => staticData.publishToPublic\n);\n\n/** Get the stored value for a field when editing a registration */\nexport const getFieldValue = createSelector(\n  getUpdateMode,\n  getRegistrationData,\n  (state, id) => getItemById(state, id),\n  (updateMode, registrationData, field) =>\n    updateMode ? registrationData[field.htmlName] : undefined\n);\n\nexport const isPaidItemLocked = createSelector(\n  getPaid,\n  (state, id) => getItemById(state, id),\n  (state, id) => getFieldValue(state, id),\n  (paid, field, value) => {\n    if (!paid) {\n      // nothing locked if the registration hasn't been paid yet\n      return false;\n    } else if (field.price > 0) {\n      // easy for fields that have a price themselves\n      return true;\n    } else if (value !== undefined && field.choices) {\n      // we assume that all fields with more complex options have them in `choices`,\n      // and that a billable choice will have a `price`. if the old value is undefined,\n      // we never disable the field altogether since some choices could in fact be free,\n      // and we rely on the field to disable problematic choices\n      let choiceIsSelected;\n      if (typeof value === 'string') {\n        choiceIsSelected = c => c.id === value;\n      } else if (value.choice) {\n        choiceIsSelected = c => c.id === value.choice;\n      } else {\n        choiceIsSelected = c => value[c.id] > 0;\n      }\n      return !!field.choices.find(c => c.price > 0 && choiceIsSelected(c));\n    }\n    return false;\n  }\n);\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Icon, Popup} from 'semantic-ui-react';\n\nimport {Translate} from 'indico/react/i18n';\n\nexport default function ChoiceLabel({paid, management, choice}) {\n  let modWarning = null;\n  let paymentWarning = null;\n  // warning about modified/removed choice\n  if (choice._deleted) {\n    modWarning = (\n      <Translate>\n        The currently chosen option is not available anymore. If you unselect it you won't be able\n        to choose it back.\n      </Translate>\n    );\n  } else if (choice._modified) {\n    modWarning = choice.price ? (\n      <Translate>\n        The currently chosen option has been modified. If you unselect it you may not be able to\n        select it again for the same price.\n      </Translate>\n    ) : (\n      <Translate>\n        The currently chosen option has been modified. If you unselect it you may not be able to\n        select it again.\n      </Translate>\n    );\n  }\n  // warning about price changes\n  if (paid && !management) {\n    paymentWarning = (\n      <Translate>This option could trigger a price change and has been blocked.</Translate>\n    );\n  } else if (paid) {\n    paymentWarning = <Translate>Choosing this option will result in a price change.</Translate>;\n  }\n  if (!modWarning && !paymentWarning) {\n    return choice.caption;\n  }\n  return (\n    <>\n      {choice.caption}{' '}\n      {modWarning && (\n        <Popup trigger={<Icon name=\"warning sign\" color=\"orange\" />}>{modWarning}</Popup>\n      )}\n      {modWarning && paymentWarning && ' '}\n      {paymentWarning && (\n        <Popup trigger={<Icon name=\"warning sign\" color=\"orange\" />}>{paymentWarning}</Popup>\n      )}\n    </>\n  );\n}\n\nChoiceLabel.propTypes = {\n  paid: PropTypes.bool.isRequired,\n  management: PropTypes.bool.isRequired,\n  choice: PropTypes.shape({\n    caption: PropTypes.string.isRequired,\n    price: PropTypes.number,\n    _deleted: PropTypes.bool,\n    _modified: PropTypes.bool,\n  }).isRequired,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"choices-table\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__choices-table___w2Tu2\",\"table-sortable-handle\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__table-sortable-handle___D7vqk\",\"inactive\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__inactive___wCdAh\",\"icon-agreement\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-agreement___nmALU\",\"icon-alarm\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-alarm___t7iqH\",\"icon-arrow-down\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-arrow-down___NrkqT\",\"icon-arrow-left\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-arrow-left___rNexi\",\"icon-arrow-right-sparse\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-arrow-right-sparse___cr5iO\",\"icon-arrow-up\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-arrow-up___ByIUy\",\"icon-arrows-vert\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-arrows-vert___vG68W\",\"icon-attachment\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-attachment___oGF2X\",\"icon-bell\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-bell___X76yZ\",\"icon-bold\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-bold___prmRd\",\"icon-book\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-book___9tnF+\",\"icon-bookmark\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-bookmark___pv7pr\",\"icon-broadcast\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-broadcast___qf-By\",\"icon-bubble-quote\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-bubble-quote___jl-1b\",\"icon-bullhorn\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-bullhorn___D14QY\",\"icon-calendar\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-calendar___zIzzU\",\"icon-calendar-day\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-calendar-day___0mGge\",\"icon-camera\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-camera___pKGBP\",\"icon-chart\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-chart___r7fWj\",\"icon-checkbox-checked\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-checkbox-checked___sKnSA\",\"icon-checkbox-unchecked\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-checkbox-unchecked___eft2d\",\"icon-checkmark\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-checkmark___r+GPo\",\"icon-circle-small\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-circle-small___siKEC\",\"icon-clipboard\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-clipboard___sQDRc\",\"icon-close\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-close___qxFQM\",\"icon-cloud2\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-cloud2___rRWgK\",\"icon-code\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-code___Fq1gs\",\"icon-coins\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-coins___gv5rf\",\"icon-collapse\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-collapse___CsUNU\",\"icon-compass2\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-compass2___RCRWN\",\"icon-copy\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-copy___HBYcT\",\"icon-copy1\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-copy1___uPeIt\",\"icon-cross\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-cross___l0hvO\",\"icon-disable\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-disable___9S2sA\",\"icon-drag-indicator\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-drag-indicator___XcMQz\",\"icon-dropmenu\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-dropmenu___2vBiW\",\"icon-earth\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-earth___F314m\",\"icon-edit\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-edit___uJuhh\",\"icon-enlarge\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-enlarge___FHy9U\",\"icon-enter\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-enter___0SS17\",\"icon-equalizer\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-equalizer___xeINk\",\"icon-exit\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-exit___ewu8g\",\"icon-expand\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-expand___gKiAf\",\"icon-eye\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-eye___msvMF\",\"icon-eye-blocked\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-eye-blocked___fJhRg\",\"icon-unlisted-event\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-unlisted-event___75SN9\",\"icon-file\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file___Pq0G1\",\"icon-file-check\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-check___iP5we\",\"icon-file-content\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-content___bJ0zk\",\"icon-file-css\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-css___74LrQ\",\"icon-file-download\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-download___SlNrA\",\"icon-file-excel\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-excel___v8p1K\",\"icon-file-eye\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-eye___DAmkE\",\"icon-file-filled\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-filled___col0E\",\"icon-file-image\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-image___y76bD\",\"icon-file-music\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-music___Xkl+o\",\"icon-file-openoffice\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-openoffice___4++2q\",\"icon-file-pdf\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-pdf___wUjMR\",\"icon-file-play\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-play___Hwvvh\",\"icon-file-presentation\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-presentation___O+UBc\",\"icon-file-spreadsheet\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-spreadsheet___GXnBI\",\"icon-file-text\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-text___PJsvQ\",\"icon-file-video\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-video___DDsBU\",\"icon-file-word\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-word___v69ew\",\"icon-file-xml\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-xml___uw+nS\",\"icon-file-zip\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-file-zip___qSCrI\",\"icon-filter\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-filter___yAN7f\",\"icon-first\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-first___CHJ-S\",\"icon-floppy\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-floppy___3UvO1\",\"icon-folder\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-folder___jE5-l\",\"icon-folder-open\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-folder-open___04Mup\",\"icon-folder-plus\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-folder-plus___-cITX\",\"icon-font-size\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-font-size___13Te6\",\"icon-grid\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-grid___6n5oP\",\"icon-grid2\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-grid2___GaiOD\",\"icon-hammer\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-hammer___1+H7z\",\"icon-handle\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-handle___H7Mqf\",\"icon-home\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-home___vD5Gi\",\"icon-hour-glass2\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-hour-glass2___F+iw9\",\"icon-id-badge\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-id-badge___U4EBf\",\"icon-image\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-image___5zcyu\",\"icon-import\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-import___Cx701\",\"icon-info\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-info___02UAT\",\"icon-italic\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-italic___ZScZt\",\"icon-key\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-key___2Zxzt\",\"icon-key-a\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-key-a___+WojC\",\"icon-lamp\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-lamp___oc63i\",\"icon-lan\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-lan___7RLU6\",\"icon-last\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-last___2T+wv\",\"icon-layout\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-layout___e0d5E\",\"icon-link\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-link___m9Z1i\",\"icon-list\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-list___BlAme\",\"icon-location\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-location___-tCHn\",\"icon-lock\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-lock___U-vO0\",\"icon-protection-self\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-protection-self___MpSKc\",\"icon-lock-center\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-lock-center___qYKxD\",\"icon-loop\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-loop___9KivF\",\"icon-mail\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-mail___pFo3g\",\"icon-medal\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-medal___0dc8q\",\"icon-mic\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-mic___wurft\",\"icon-mobile\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-mobile___BxF5p\",\"icon-move\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-move___SLvPR\",\"icon-new\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-new___n9z4Y\",\"icon-next\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-next___AvWYw\",\"icon-no-camera\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-no-camera___vDqjd\",\"icon-numbered-list\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-numbered-list___cTEry\",\"icon-package-download\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-package-download___oo71i\",\"icon-pagebreak\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-pagebreak___5yvRp\",\"icon-palette\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-palette___z1Rjp\",\"icon-phone\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-phone___oGmit\",\"icon-play\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-play___ImfNw\",\"icon-plus\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-plus___ibFAy\",\"icon-prev\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-prev___8B8M5\",\"icon-price-tag\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-price-tag___g+rdM\",\"icon-printer\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-printer___Fy4pV\",\"icon-projector\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-projector___8FICJ\",\"icon-puzzle\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-puzzle___E1nUG\",\"icon-qrcode\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-qrcode___Xio8G\",\"icon-question\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-question___AWyd4\",\"icon-quill\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-quill___uf5I1\",\"icon-redo\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-redo___7ytdB\",\"icon-remove\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-remove___C+KFO\",\"icon-rulers\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-rulers___xvNS8\",\"icon-search\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-search___SBCGf\",\"icon-settings\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-settings___cuMm2\",\"icon-seven-segment9\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-seven-segment9___oaqrJ\",\"icon-shield\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-shield___Rydmk\",\"icon-shrink\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-shrink___E26np\",\"icon-sort\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-sort___Kwj3E\",\"icon-sort-alpha-asc\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-sort-alpha-asc___xLymH\",\"icon-sort-alpha-desc\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-sort-alpha-desc___7yV3S\",\"icon-split\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-split___uKSd-\",\"icon-stack\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-stack___Y9hok\",\"icon-stack-minus\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-stack-minus___kCG2z\",\"icon-stack-plus\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-stack-plus___PlsbB\",\"icon-stack-text\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-stack-text___w2V9o\",\"icon-star\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-star___vMZrU\",\"icon-star-empty\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-star-empty___pQRl6\",\"icon-stop\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-stop___YnWgH\",\"icon-switchoff\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-switchoff___Z7r2x\",\"icon-switchon\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-switchon___ZHhm4\",\"icon-tag\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-tag___abLsl\",\"icon-text-color\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-text-color___s3fFc\",\"icon-textarea\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-textarea___6fTN+\",\"icon-textfield\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-textfield___mQpzm\",\"icon-ticket\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-ticket___4tD0q\",\"icon-tilde\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-tilde___BB9dY\",\"icon-time\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-time___LJNSq\",\"icon-transmission\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-transmission___XFs0S\",\"icon-type\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-type___2-4nC\",\"icon-undo\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-undo___TXUWG\",\"icon-unlocked\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-unlocked___HlXmw\",\"icon-protection-public\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-protection-public___jTbsm\",\"icon-upload\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-upload___3Rk2L\",\"icon-user\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-user___FNwt2\",\"icon-user-block\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-user-block___ci9Lf\",\"icon-user-chairperson\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-user-chairperson___zAjyH\",\"icon-user-check\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-user-check___9wL94\",\"icon-user-reading\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-user-reading___hbKV9\",\"icon-users\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-users___yLwHq\",\"icon-warning\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-warning___jD1Mx\",\"icon-wrench\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-wrench___KQL6M\",\"icon-spinner\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-spinner___nLBG4\",\"icon-none\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__icon-none___7bgDo\",\"disabled\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__disabled___1DmMw\",\"ellipsis\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__ellipsis___web7E\",\"choices-table-wrapper\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__choices-table-wrapper___qY3fA\",\"empty-row\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__empty-row___OpJWg\",\"disabled-row\":\"events-registration-client-js-form-fields-___ChoicesSetup-module__disabled-row___fT9s2\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport createDecorator from 'final-form-calculate';\nimport {nanoid} from 'nanoid';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useSelector} from 'react-redux';\nimport {Button, Input} from 'semantic-ui-react';\n\nimport {Translate, Param} from 'indico/react/i18n';\nimport {SortableWrapper, useSortableItem} from 'indico/react/sortable';\n\nimport {getCurrency} from '../../form/selectors';\n\nimport './ChoicesSetup.module.scss';\n\nexport const choiceShape = {\n  id: PropTypes.string.isRequired,\n  caption: PropTypes.string.isRequired,\n  // XXX are those values always present?\n  isEnabled: PropTypes.bool.isRequired,\n  price: PropTypes.number.isRequired,\n  placesLimit: PropTypes.number,\n  maxExtraSlots: PropTypes.number,\n};\n\nexport function Choices({\n  onFocus,\n  onBlur,\n  onChange,\n  disabled,\n  value,\n  withExtraSlots,\n  forAccommodation,\n}) {\n  const currency = useSelector(getCurrency);\n  const makeOnDelete = id => () => onChange(value.filter(choice => choice.id !== id));\n  const makeOnChange = id => (field, val) =>\n    onChange(value.map(choice => (choice.id !== id ? choice : {...choice, [field]: val})));\n  const handleMove = (sourceIndex, targetIndex) => {\n    const newValue = [...value];\n    const sourceItem = newValue[sourceIndex];\n    newValue.splice(sourceIndex, 1);\n    newValue.splice(targetIndex, 0, sourceItem);\n    onChange(newValue);\n  };\n  const handleAdd = () => {\n    const newItem = {\n      id: `new:${nanoid()}`,\n      caption: '',\n      isEnabled: true,\n      price: 0,\n      placesLimit: 0,\n    };\n    if (!forAccommodation) {\n      newItem.maxExtraSlots = 0;\n    }\n    onChange([...value, newItem]);\n  };\n\n  // TODO: style this nicely, ideally ditch the table and find a better way to do this\n  // one option could be showing just the text and settings (icons?), and using a more\n  // explicit edit action on the individual entries (which could then use a modal to\n  // edit  the actual data)\n  return (\n    <>\n      <SortableWrapper styleName=\"choices-table-wrapper\" accept=\"regform-item-choice\">\n        <table styleName=\"choices-table\">\n          <thead>\n            <tr>\n              <th style={{width: '1.75em'}} />\n              <th>\n                <Translate>Caption</Translate>\n              </th>\n              <th style={{width: '7em'}}>\n                <Translate>\n                  Price (<Param name=\"currency\" value={currency} />)\n                </Translate>\n              </th>\n              <th style={{width: '7em'}}>\n                <Translate>Limit</Translate>\n              </th>\n              {withExtraSlots ? (\n                <th colSpan=\"2\">\n                  <Translate>Max. extra slots</Translate>\n                </th>\n              ) : (\n                <th style={{width: '3.7em'}} />\n              )}\n            </tr>\n          </thead>\n          <tbody>\n            {value.map((c, i) => (\n              <Choice\n                key={c.id}\n                index={i}\n                withExtraSlots={withExtraSlots}\n                onChange={makeOnChange(c.id)}\n                onDelete={makeOnDelete(c.id)}\n                onMove={handleMove}\n                fieldProps={{onFocus, onBlur, disabled}}\n                {...c}\n              />\n            ))}\n          </tbody>\n        </table>\n      </SortableWrapper>\n      {forAccommodation && (\n        <p\n          className=\"field-description\"\n          style={{textAlign: 'end', marginTop: '-1em', marginBottom: '1em'}}\n        >\n          <Translate>All prices are per night</Translate>\n        </p>\n      )}\n      <Button type=\"button\" onClick={handleAdd} disabled={disabled}>\n        <Translate>Add new</Translate>\n      </Button>\n    </>\n  );\n}\n\nChoices.propTypes = {\n  onFocus: PropTypes.func.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  value: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  disabled: PropTypes.bool.isRequired,\n  withExtraSlots: PropTypes.bool,\n  forAccommodation: PropTypes.bool,\n};\n\nChoices.defaultProps = {\n  withExtraSlots: false,\n  forAccommodation: false,\n};\n\nexport const choiceFieldsSettingsFormDecorator = createDecorator({\n  field: 'choices',\n  updates: choices => ({isPriceSet: choices.some(c => c.price)}),\n});\n\nfunction Choice({\n  withExtraSlots,\n  fieldProps,\n  index,\n  id,\n  caption,\n  price,\n  placesLimit,\n  maxExtraSlots,\n  extraSlotsPay,\n  isEnabled,\n  isNoAccommodation,\n  onChange,\n  onMove,\n  onDelete,\n}) {\n  const [handleRef, itemRef, style] = useSortableItem({\n    type: 'regform-item-choice',\n    id,\n    index,\n    active: !fieldProps.disabled,\n    separateHandle: true,\n    moveItem: onMove,\n    // nothing to do since we don't need to \"save\" at the end\n    onDrop: () => null,\n  });\n\n  const makeOnChange = field => evt => {\n    const elem = evt.target;\n    if (elem.type === 'checkbox') {\n      onChange(field, elem.checked);\n    } else if (elem.type === 'number') {\n      onChange(field, +elem.value);\n    } else {\n      onChange(field, elem.value);\n    }\n  };\n\n  return (\n    <tr ref={itemRef} style={style} styleName={!isEnabled ? 'disabled-row' : undefined}>\n      <td styleName=\"table-sortable-handle\" ref={handleRef} />\n      <td>\n        <input\n          type=\"text\"\n          name=\"caption\"\n          value={caption}\n          required\n          onChange={makeOnChange('caption')}\n          placeholder={isNoAccommodation ? Translate.string('No accommodation') : undefined}\n        />\n      </td>\n      <td>\n        {!isNoAccommodation && (\n          <input\n            type=\"number\"\n            name=\"price\"\n            min=\"0\"\n            step=\"0.01\"\n            value={price || ''}\n            onChange={makeOnChange('price')}\n            {...fieldProps}\n          />\n        )}\n      </td>\n      <td>\n        {!isNoAccommodation && (\n          <input\n            type=\"number\"\n            name=\"placesLimit\"\n            min=\"0\"\n            value={placesLimit || ''}\n            onChange={makeOnChange('placesLimit')}\n            {...fieldProps}\n          />\n        )}\n      </td>\n      {!isNoAccommodation && withExtraSlots && (\n        <td style={{width: 0}}>\n          <Input\n            type=\"number\"\n            name=\"maxExtraSlots\"\n            min=\"0\"\n            value={maxExtraSlots}\n            onChange={makeOnChange('maxExtraSlots')}\n            icon={{\n              name: 'dollar',\n              link: true,\n              color: extraSlotsPay ? 'blue' : 'grey',\n              title: Translate.string('Extra slots pay'),\n              onClick: () => onChange('extraSlotsPay', !extraSlotsPay),\n            }}\n            style={{width: '7.5em'}}\n            {...fieldProps}\n          />\n        </td>\n      )}\n      <td style={{textAlign: 'end'}}>\n        {!isNoAccommodation && (\n          <a\n            className=\"icon-remove remove-row\"\n            title={Translate.string('Remove row')}\n            onClick={fieldProps.disabled ? undefined : onDelete}\n          />\n        )}\n        {isEnabled ? (\n          <a\n            className=\"icon-disable\"\n            title={Translate.string('Disable choice')}\n            onClick={() => onChange('isEnabled', false)}\n          />\n        ) : (\n          <a\n            className=\"icon-checkmark remove-row\"\n            title={Translate.string('Enable choice')}\n            onClick={() => onChange('isEnabled', true)}\n          />\n        )}\n      </td>\n    </tr>\n  );\n}\n\nChoice.propTypes = {\n  withExtraSlots: PropTypes.bool.isRequired,\n  fieldProps: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onMove: PropTypes.func.isRequired,\n  onDelete: PropTypes.func.isRequired,\n  ...choiceShape,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Label} from 'semantic-ui-react';\n\nimport {Translate, PluralTranslate, Singular, Plural, Param} from 'indico/react/i18n';\n\nexport function PlacesLeft({placesLimit, placesUsed, isEnabled}) {\n  const placesLeft = placesLimit - placesUsed;\n  const color = placesLeft > 0 ? (isEnabled ? 'green' : 'grey') : 'red';\n\n  return (\n    <Label color={color} style={{whiteSpace: 'nowrap'}}>\n      {placesLeft > 0 ? (\n        <PluralTranslate count={placesLeft}>\n          <Singular>\n            <Param name=\"count\" value={placesLeft} /> place left\n          </Singular>\n          <Plural>\n            <Param name=\"count\" value={placesLeft} /> places left\n          </Plural>\n        </PluralTranslate>\n      ) : (\n        <Translate>No places left</Translate>\n      )}\n    </Label>\n  );\n}\n\nPlacesLeft.propTypes = {\n  placesLimit: PropTypes.number.isRequired,\n  placesUsed: PropTypes.number.isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {Form, Label} from 'semantic-ui-react';\n\nimport {DatePeriodField, FinalDatePeriod} from 'indico/react/components';\nimport {FinalField} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\nimport {serializeDate, toMoment} from 'indico/utils/date';\n\nimport {getCurrency} from '../../form/selectors';\nimport {getFieldValue, getManagement, getPaid} from '../../form_submission/selectors';\n\nimport ChoiceLabel from './ChoiceLabel';\nimport {Choices, choiceShape} from './ChoicesSetup';\nimport {PlacesLeft} from './PlacesLeftLabel';\n\nimport '../../../styles/regform.module.scss';\nimport './table.module.scss';\n\nfunction AccommodationInputComponent({\n  id,\n  existingValue,\n  value,\n  onChange,\n  disabled,\n  isPurged,\n  choices,\n  arrival,\n  departure,\n  placesUsed,\n}) {\n  const paid = useSelector(getPaid);\n  const management = useSelector(getManagement);\n  const currency = useSelector(getCurrency);\n  const selectedChoice = choices.find(c => c.id === value.choice);\n\n  const [focusedDateField, setFocusedDateField] = useState(null);\n\n  const arrivalDateFrom = toMoment(arrival.startDate, moment.HTML5_FMT.DATE);\n  const arrivalDateTo = toMoment(arrival.endDate, moment.HTML5_FMT.DATE);\n  const departureDateFrom = toMoment(departure.startDate, moment.HTML5_FMT.DATE);\n  const departureDateTo = toMoment(departure.endDate, moment.HTML5_FMT.DATE);\n\n  const makeHandleChange = choice => () => {\n    const newValue = {...value, choice: choice.id, isNoAccommodation: choice.isNoAccommodation};\n    if (choice.isNoAccommodation) {\n      delete newValue.arrivalDate;\n      delete newValue.departureDate;\n    }\n    onChange(newValue);\n  };\n\n  const handleDateChange = ({startDate, endDate}) => {\n    onChange({...value, arrivalDate: startDate, departureDate: endDate});\n  };\n\n  const isDateDisabled = date => {\n    // for the arrival date we allow selecting from the start date range, but for the\n    // departure date we allow both ranges to avoid the highlighted range looking very\n    // broken (disabled dates do not get any highlighting when included in the range)\n    if (focusedDateField === 'startDate') {\n      return !date.isBetween(arrivalDateFrom, arrivalDateTo, 'day', '[]');\n    }\n    return !date.isBetween(arrivalDateFrom, departureDateTo, 'day', '[]');\n  };\n\n  // calculate minimum days so the user can only select a departure date\n  // in the allowed departure date range\n  const minimumDays = !value.arrivalDate\n    ? 1\n    : Math.max(1, moment(departureDateFrom).diff(moment(value.arrivalDate), 'days') + 1);\n\n  const nights =\n    value.arrivalDate && value.departureDate\n      ? moment(value.departureDate).diff(moment(value.arrivalDate), 'days')\n      : 0;\n\n  const isPaidChoice = choice => choice.price > 0 && paid;\n  const isPaidChoiceLocked = choice => !management && isPaidChoice(choice);\n\n  return (\n    <div styleName=\"accommodation-field\">\n      <table styleName=\"choice-table\" role=\"presentation\">\n        <tbody>\n          {choices\n            .filter(c => c.isEnabled || !c.isNoAccommodation)\n            .map((c, index) => {\n              return (\n                <tr key={c.id} styleName=\"row\">\n                  <td>\n                    <Form.Radio\n                      id={id ? `${id}-${index}` : ''}\n                      style={{pointerEvents: 'auto'}} // keep label tooltips working when disabled\n                      styleName=\"radio\"\n                      label={{\n                        children: (\n                          <ChoiceLabel choice={c} management={management} paid={isPaidChoice(c)} />\n                        ),\n                      }}\n                      key={c.id}\n                      value={c.id}\n                      disabled={\n                        !c.isEnabled ||\n                        disabled ||\n                        isPaidChoiceLocked(c) ||\n                        (c.placesLimit > 0 &&\n                          (placesUsed[c.id] || 0) >= c.placesLimit &&\n                          c.id !== existingValue.choice)\n                      }\n                      checked={!isPurged && c.id === value.choice}\n                      onChange={makeHandleChange(c)}\n                    />\n                  </td>\n                  <td>\n                    {c.isEnabled && !!c.price && (\n                      <Label pointing=\"left\">\n                        {Translate.string('{price} {currency} per night', {\n                          price: c.price.toFixed(2),\n                          currency,\n                        })}\n                      </Label>\n                    )}\n                  </td>\n                  <td>\n                    {c.placesLimit === 0 ? null : (\n                      <PlacesLeft\n                        placesLimit={c.placesLimit}\n                        placesUsed={placesUsed[c.id] || 0}\n                        isEnabled={!disabled && c.isEnabled && !isPaidChoiceLocked(c)}\n                      />\n                    )}\n                  </td>\n                </tr>\n              );\n            })}\n        </tbody>\n      </table>\n      {value.choice !== null && !value.isNoAccommodation && (\n        <div styleName=\"date-picker\">\n          <DatePeriodField\n            onChange={handleDateChange}\n            onFocus={() => undefined}\n            onBlur={() => undefined}\n            disabledDate={isDateDisabled}\n            initialVisibleMonth={() => arrivalDateFrom}\n            onFieldFocusChange={setFocusedDateField}\n            minimumDays={minimumDays}\n            value={{startDate: value.arrivalDate, endDate: value.departureDate}}\n            extraPickerProps={{\n              block: false,\n              startDatePlaceholderText: Translate.string('Arrival'),\n              endDatePlaceholderText: Translate.string('Departure'),\n            }}\n          />\n          {!!selectedChoice.price && (\n            <Label pointing=\"left\" styleName=\"price-tag\">\n              {Translate.string('Total: {total} {currency}', {\n                total: (nights * selectedChoice.price).toFixed(2),\n                currency,\n              })}\n            </Label>\n          )}\n        </div>\n      )}\n    </div>\n  );\n}\n\nAccommodationInputComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  isPurged: PropTypes.bool.isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  arrival: PropTypes.shape({\n    startDate: PropTypes.string.isRequired,\n    endDate: PropTypes.string.isRequired,\n  }).isRequired,\n  departure: PropTypes.shape({\n    startDate: PropTypes.string.isRequired,\n    endDate: PropTypes.string.isRequired,\n  }).isRequired,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n  existingValue: PropTypes.shape({choice: PropTypes.string}).isRequired,\n};\n\nexport default function AccommodationInput({\n  fieldId,\n  htmlId,\n  htmlName,\n  disabled,\n  isRequired,\n  isPurged,\n  choices,\n  arrival,\n  departure,\n  placesUsed,\n}) {\n  const existingValue = useSelector(state => getFieldValue(state, fieldId)) || {choice: null};\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      existingValue={existingValue}\n      component={AccommodationInputComponent}\n      required={isRequired}\n      disabled={disabled}\n      isPurged={isPurged}\n      choices={choices}\n      arrival={arrival}\n      departure={departure}\n      placesUsed={placesUsed}\n      validate={value => {\n        if (value.choice === null) {\n          return isRequired ? Translate.string('You must select an option') : undefined;\n        } else if (!value.isNoAccommodation && (!value.arrivalDate || !value.departureDate)) {\n          return Translate.string('You must select the arrival and departure date');\n        }\n      }}\n      isEqual={_.isEqual}\n    />\n  );\n}\n\nAccommodationInput.propTypes = {\n  fieldId: PropTypes.number.isRequired,\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  isPurged: PropTypes.bool.isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  arrival: PropTypes.shape({\n    startDate: PropTypes.string.isRequired,\n    endDate: PropTypes.string.isRequired,\n  }).isRequired,\n  departure: PropTypes.shape({\n    startDate: PropTypes.string.isRequired,\n    endDate: PropTypes.string.isRequired,\n  }).isRequired,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nAccommodationInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n};\n\nexport const accommodationSettingsInitialData = staticData => ({\n  choices: [\n    {\n      id: `new:no-accommodation`,\n      caption: 'No accommodation',\n      isEnabled: true,\n      isNoAccommodation: true,\n      price: 0,\n      placesLimit: 0,\n    },\n  ],\n  arrival: {\n    startDate: serializeDate(\n      toMoment(staticData.eventStartDate, moment.HTML5_FMT.DATE).subtract(2, 'days')\n    ),\n    endDate: serializeDate(toMoment(staticData.eventEndDate, moment.HTML5_FMT.DATE)),\n  },\n  departure: {\n    startDate: serializeDate(\n      toMoment(staticData.eventStartDate, moment.HTML5_FMT.DATE).add(1, 'days')\n    ),\n    endDate: serializeDate(toMoment(staticData.eventEndDate, moment.HTML5_FMT.DATE).add(3, 'days')),\n  },\n});\n\nexport function accommodationSettingsFormValidator({arrival, departure}) {\n  const arrivalDateFrom = toMoment(arrival.startDate, moment.HTML5_FMT.DATE);\n  const arrivalDateTo = toMoment(arrival.endDate, moment.HTML5_FMT.DATE);\n  const departureDateFrom = toMoment(departure.startDate, moment.HTML5_FMT.DATE);\n  const departureDateTo = toMoment(departure.endDate, moment.HTML5_FMT.DATE);\n\n  const errors = {};\n  if (!arrivalDateFrom || !arrivalDateTo || !departureDateFrom || !departureDateTo) {\n    // already covered by field-level validation\n    return;\n  }\n\n  if (departureDateFrom.isBefore(arrivalDateFrom)) {\n    errors.departure = Translate.string(\n      'The departure period cannot begin before the arrival period.'\n    );\n  }\n  if (arrivalDateTo.isAfter(departureDateTo)) {\n    errors.arrival = Translate.string('The arrival period cannot end after the departure period.');\n  }\n  return errors;\n}\n\nexport function AccommodationSettings() {\n  return (\n    <>\n      <FinalDatePeriod\n        name=\"arrival\"\n        label={Translate.string('Arrival')}\n        disabledDate={() => false}\n        extraPickerProps={{noBorder: true}}\n        required\n      />\n      <FinalDatePeriod\n        name=\"departure\"\n        label={Translate.string('Departure')}\n        disabledDate={() => false}\n        extraPickerProps={{noBorder: true}}\n        required\n      />\n      <FinalField\n        name=\"choices\"\n        label={Translate.string('Choices')}\n        component={Choices}\n        isEqual={_.isEqual}\n        forAccommodation\n        required\n        validate={val => {\n          if (!val.some(c => c.isEnabled)) {\n            return Translate.string('You need to have at least one enabled option.');\n          }\n        }}\n      />\n    </>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport {nanoid} from 'nanoid';\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {useFormState} from 'react-final-form';\nimport {useSelector} from 'react-redux';\nimport {Button, Form, Label} from 'semantic-ui-react';\n\nimport {FinalCheckbox, FinalField, FinalInput, validators as v} from 'indico/react/forms';\nimport {FinalModalForm} from 'indico/react/forms/final-form';\nimport {Translate} from 'indico/react/i18n';\n\nimport {getCurrency, getItems} from '../selectors';\n\nimport {PlacesLeft} from './PlacesLeftLabel';\n\nimport '../../../styles/regform.module.scss';\n\nfunction AccompanyingPersonModal({value, header, onSubmit, onClose}) {\n  return (\n    <FinalModalForm\n      id=\"accompanyingperson-form\"\n      onSubmit={onSubmit}\n      onClose={onClose}\n      initialValues={value}\n      header={header}\n    >\n      <FinalInput name=\"firstName\" label={Translate.string('First Name')} required autoFocus />\n      <FinalInput name=\"lastName\" label={Translate.string('Last Name')} required />\n    </FinalModalForm>\n  );\n}\n\nAccompanyingPersonModal.propTypes = {\n  value: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    firstName: PropTypes.string.isRequired,\n    lastName: PropTypes.string.isRequired,\n  }),\n  header: PropTypes.string.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nAccompanyingPersonModal.defaultProps = {\n  value: {\n    id: null,\n    firstName: null,\n    lastName: null,\n  },\n};\n\n// Gather all accompanying persons field's counts.\nfunction countAllAccompanyingPersons(items, formState) {\n  const allAccompanyingPersonFieldNames = Object.values(items)\n    .filter(f => f.inputType === 'accompanying_persons' && f.personsCountAgainstLimit)\n    .map(apf => apf.htmlName);\n  return allAccompanyingPersonFieldNames.reduce(\n    (count, field) => count + formState.values[field]?.length || 0,\n    0\n  );\n}\n\nfunction calculatePlaces(availablePlaces, maxPersons, personsInCurrentField, items, formState) {\n  if (availablePlaces === null) {\n    // Field does not count towards registration limit...\n    if (!maxPersons) {\n      // ...and has no person limit.\n      return [null, Infinity];\n    } else {\n      // ...and has a person limit.\n      return [personsInCurrentField, maxPersons];\n    }\n  } else {\n    // Field counts towards registration limit...\n    const personsInAllFieldsCount = countAllAccompanyingPersons(items, formState);\n\n    if (!maxPersons || maxPersons >= availablePlaces - personsInAllFieldsCount) {\n      // ...and has no person limit, or its person limit is greater than the registration limit.\n      return [personsInAllFieldsCount, availablePlaces];\n    } else {\n      // ...and has a person limit lower than the registration limit.\n      return [personsInCurrentField, maxPersons];\n    }\n  }\n}\n\nfunction AccompanyingPersonsComponent({\n  id,\n  value,\n  disabled,\n  onChange,\n  price,\n  availablePlaces,\n  maxPersons,\n}) {\n  const [operation, setOperation] = useState({type: null, person: null});\n  const currency = useSelector(getCurrency);\n  const totalPrice = (value.length * price).toFixed(2);\n  const items = useSelector(getItems);\n  const formState = useFormState();\n\n  const [placesUsed, placesLimit] = calculatePlaces(\n    availablePlaces,\n    maxPersons,\n    value.length,\n    items,\n    formState\n  );\n\n  const changeReducer = action => {\n    switch (action.type) {\n      case 'ADD':\n        return [...value, {id: `new:${nanoid()}`, ...action.person}];\n      case 'EDIT':\n        return value.map(p => (p.id === action.person.id ? action.person : p));\n      case 'REMOVE':\n        return value.filter(p => p.id !== action.id);\n    }\n  };\n\n  const handleAccompanyingPersonAdd = () => {\n    setOperation({type: 'ADD', person: null});\n  };\n\n  const handleAccompanyingPersonEdit = personId => {\n    setOperation({type: 'EDIT', person: value.find(p => p.id === personId)});\n  };\n\n  const handleAccompanyingPersonRemove = personId => {\n    onChange(changeReducer({type: 'REMOVE', id: personId}));\n  };\n\n  const handleModalClose = () => {\n    setOperation({type: null, person: null});\n  };\n\n  return (\n    <Form.Group styleName=\"accompanyingpersons-field\">\n      <ul>\n        {!value.length && (\n          <li styleName=\"light\">\n            <Translate>No accompanying persons registered</Translate>\n          </li>\n        )}\n        {value.map(person => (\n          <li key={person.id}>\n            <span>\n              {person.firstName} {person.lastName}\n            </span>\n            <div styleName=\"actions\">\n              <a\n                className=\"icon-edit\"\n                title={Translate.string('Edit this person')}\n                onClick={() => handleAccompanyingPersonEdit(person.id)}\n              />\n              <a\n                className=\"icon-remove\"\n                title={Translate.string('Remove this person')}\n                onClick={() => handleAccompanyingPersonRemove(person.id)}\n              />\n            </div>\n          </li>\n        ))}\n      </ul>\n      <div styleName=\"summary\">\n        <Button\n          size=\"small\"\n          type=\"button\"\n          onClick={handleAccompanyingPersonAdd}\n          disabled={disabled || placesLimit - placesUsed === 0}\n          aria-describedby={id ? `${id}-placeslimit` : ''}\n        >\n          <Translate>Add accompanying person</Translate>\n        </Button>\n        {!!price && (\n          <Label basic pointing=\"left\" styleName=\"price-tag\" size=\"small\">\n            {price.toFixed(2)} {currency} (Total: {totalPrice} {currency})\n          </Label>\n        )}\n        {placesLimit !== Infinity && (\n          <div id={`${id}-placeslimit`} styleName=\"places-left\">\n            <PlacesLeft placesLimit={placesLimit} placesUsed={placesUsed} isEnabled={!disabled} />\n          </div>\n        )}\n      </div>\n      {['ADD', 'EDIT'].includes(operation.type) && (\n        <AccompanyingPersonModal\n          header={\n            operation.type === 'EDIT'\n              ? Translate.string('Edit accompanying person')\n              : Translate.string('Add accompanying person')\n          }\n          onSubmit={formData => {\n            onChange(changeReducer({type: operation.type, person: formData}));\n            handleModalClose();\n          }}\n          value={operation.person}\n          onClose={handleModalClose}\n        />\n      )}\n    </Form.Group>\n  );\n}\n\nAccompanyingPersonsComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.arrayOf(\n    PropTypes.shape({\n      id: PropTypes.string.isRequired,\n      firstName: PropTypes.string.isRequired,\n      lastName: PropTypes.string.isRequired,\n    })\n  ).isRequired,\n  disabled: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  price: PropTypes.number,\n  availablePlaces: PropTypes.number,\n  maxPersons: PropTypes.number,\n};\n\nAccompanyingPersonsComponent.defaultProps = {\n  disabled: false,\n  price: 0,\n  availablePlaces: null,\n  maxPersons: null,\n};\n\nexport default function AccompanyingPersonsInput({\n  htmlId,\n  htmlName,\n  disabled,\n  price,\n  availablePlaces,\n  maxPersons,\n}) {\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      component={AccompanyingPersonsComponent}\n      disabled={disabled}\n      price={price}\n      availablePlaces={availablePlaces}\n      maxPersons={maxPersons}\n    />\n  );\n}\n\nAccompanyingPersonsInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  price: PropTypes.number,\n  availablePlaces: PropTypes.number,\n  maxPersons: PropTypes.number,\n};\n\nAccompanyingPersonsInput.defaultProps = {\n  disabled: false,\n  price: 0,\n  availablePlaces: null,\n  maxPersons: null,\n};\n\nexport const accompanyingPersonsSettingsInitialData = {\n  maxPersons: 1,\n  personsCountAgainstLimit: false,\n};\n\nexport function AccompanyingPersonsSettings() {\n  return (\n    <>\n      <FinalInput\n        name=\"maxPersons\"\n        type=\"number\"\n        label={Translate.string('Maximum per registrant')}\n        placeholder={Translate.string('No maximum')}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(v.min(0))}\n        fluid\n        format={val => val || ''}\n        parse={val => +val || 0}\n      />\n      <FinalCheckbox\n        name=\"personsCountAgainstLimit\"\n        label={Translate.string('Accompanying persons count against registration limit')}\n      />\n    </>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useSelector} from 'react-redux';\nimport {Button, Label} from 'semantic-ui-react';\n\nimport {FinalDropdown, FinalField, FinalInput, validators as v} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport {getCurrency} from '../../form/selectors';\nimport {getFieldValue} from '../../form_submission/selectors';\n\nimport {PlacesLeft} from './PlacesLeftLabel';\n\nimport '../../../styles/regform.module.scss';\n\nfunction BooleanInputComponent({\n  fieldId,\n  value,\n  onChange,\n  disabled,\n  required,\n  isPurged,\n  price,\n  placesLimit,\n  placesUsed,\n}) {\n  const currency = useSelector(getCurrency);\n  const existingValue = useSelector(state => getFieldValue(state, fieldId));\n\n  const makeOnClick = newValue => () => {\n    if (value === newValue && !required) {\n      onChange(null);\n    } else {\n      onChange(newValue);\n    }\n  };\n\n  return (\n    <div styleName=\"boolean-field\">\n      <Button.Group>\n        <Button\n          type=\"button\"\n          active={!isPurged && value === true}\n          disabled={disabled || (placesLimit > 0 && placesUsed >= placesLimit && !existingValue)}\n          onClick={makeOnClick(true)}\n        >\n          <Translate>Yes</Translate>\n        </Button>\n        <Button\n          type=\"button\"\n          active={!isPurged && value === false}\n          disabled={disabled}\n          onClick={makeOnClick(false)}\n        >\n          <Translate>No</Translate>\n        </Button>\n      </Button.Group>\n      {!!price && (\n        <Label pointing=\"left\" styleName={`price-tag ${value !== true ? 'greyed' : ''}`}>\n          {price.toFixed(2)} {currency}\n        </Label>\n      )}\n      {!!placesLimit && (\n        <div style={{marginLeft: '1em'}}>\n          <PlacesLeft placesLimit={placesLimit} placesUsed={placesUsed} isEnabled={!disabled} />\n        </div>\n      )}\n    </div>\n  );\n}\n\nBooleanInputComponent.propTypes = {\n  fieldId: PropTypes.number.isRequired,\n  value: PropTypes.bool,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  required: PropTypes.bool.isRequired,\n  isPurged: PropTypes.bool.isRequired,\n  price: PropTypes.number.isRequired,\n  placesLimit: PropTypes.number.isRequired,\n  placesUsed: PropTypes.number.isRequired,\n};\n\nBooleanInputComponent.defaultProps = {\n  value: null,\n};\n\nexport default function BooleanInput({\n  fieldId,\n  htmlName,\n  disabled,\n  isRequired,\n  isPurged,\n  price,\n  placesLimit,\n  placesUsed,\n}) {\n  const validateBoolean = value => {\n    if (isRequired && value === null) {\n      return Translate.string('This field is required.');\n    }\n  };\n\n  return (\n    <FinalField\n      fieldId={fieldId}\n      name={htmlName}\n      component={BooleanInputComponent}\n      required={isRequired ? 'no-validator' : isRequired}\n      validate={validateBoolean}\n      disabled={disabled}\n      isPurged={isPurged}\n      allowNull\n      price={price}\n      placesLimit={placesLimit}\n      placesUsed={placesUsed}\n    />\n  );\n}\n\nBooleanInput.propTypes = {\n  fieldId: PropTypes.number.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  isPurged: PropTypes.bool.isRequired,\n  price: PropTypes.number,\n  placesLimit: PropTypes.number,\n  placesUsed: PropTypes.number,\n};\n\nBooleanInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n  price: 0,\n  placesLimit: 0,\n  placesUsed: 0,\n};\n\nexport function BooleanSettings() {\n  const options = [\n    {key: true, value: true, text: Translate.string('Yes')},\n    {key: false, value: false, text: Translate.string('No')},\n  ];\n  return (\n    <>\n      <FinalInput\n        name=\"placesLimit\"\n        type=\"number\"\n        label={Translate.string('Places limit')}\n        placeholder={Translate.string('None')}\n        step=\"1\"\n        min=\"1\"\n        validate={v.optional(v.min(0))}\n        parse={val => (val === '' ? 0 : +val)}\n        format={val => (val === 0 ? '' : val)}\n      />\n      <FinalDropdown\n        name=\"defaultValue\"\n        label={Translate.string('Default value')}\n        options={options}\n        placeholder={Translate.string('None')}\n        selection\n      />\n    </>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Field} from 'react-final-form';\nimport {useSelector} from 'react-redux';\nimport {Label} from 'semantic-ui-react';\n\nimport {FinalCheckbox, FinalInput, validators as v} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport {getCurrency} from '../../form/selectors';\nimport {getFieldValue} from '../../form_submission/selectors';\n\nimport {PlacesLeft} from './PlacesLeftLabel';\n\nimport styles from '../../../styles/regform.module.scss';\n\nexport default function CheckboxInput({\n  fieldId,\n  htmlId,\n  htmlName,\n  disabled,\n  title,\n  isRequired,\n  showAsRequired,\n  price,\n  placesLimit,\n  placesUsed,\n  retentionPeriodIcon,\n}) {\n  const currency = useSelector(getCurrency);\n  const existingValue = useSelector(state => getFieldValue(state, fieldId));\n  const checkboxId = `${htmlId}-checkbox`;\n\n  return (\n    <FinalCheckbox\n      id={checkboxId}\n      fieldProps={{className: `${styles.field} ${showAsRequired ? 'required' : ''}`}}\n      name={htmlName}\n      label={title}\n      disabled={disabled || (placesLimit > 0 && placesUsed >= placesLimit && !existingValue)}\n      required={isRequired}\n    >\n      {retentionPeriodIcon}\n      {!!price && (\n        <Field name={htmlName} subscription={{value: true}}>\n          {({input: {value: checked}}) => (\n            <Label pointing=\"left\" styleName={`price-tag ${!checked ? 'greyed' : ''}`}>\n              {price.toFixed(2)} {currency}\n            </Label>\n          )}\n        </Field>\n      )}\n      {!!placesLimit && (\n        <div style={{marginLeft: '1em', display: 'inline-block'}}>\n          <PlacesLeft placesLimit={placesLimit} placesUsed={placesUsed} isEnabled={!disabled} />\n        </div>\n      )}\n    </FinalCheckbox>\n  );\n}\n\nCheckboxInput.propTypes = {\n  fieldId: PropTypes.number.isRequired,\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  showAsRequired: PropTypes.bool.isRequired,\n  price: PropTypes.number,\n  placesLimit: PropTypes.number.isRequired,\n  placesUsed: PropTypes.number.isRequired,\n  retentionPeriodIcon: PropTypes.element,\n};\n\nCheckboxInput.defaultProps = {\n  disabled: false,\n  price: 0,\n  retentionPeriodIcon: null,\n};\n\nexport function CheckboxSettings() {\n  return (\n    <FinalInput\n      name=\"placesLimit\"\n      type=\"number\"\n      label={Translate.string('Places limit')}\n      placeholder={Translate.string('None')}\n      step=\"1\"\n      min=\"1\"\n      validate={v.optional(v.min(0))}\n      parse={val => (val === '' ? 0 : +val)}\n      format={val => (val === 0 ? '' : val)}\n    />\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useSelector} from 'react-redux';\nimport {Dropdown} from 'semantic-ui-react';\n\nimport {FinalCheckbox, FinalField} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport '../../../styles/regform.module.scss';\n\nimport {getStaticData} from '../selectors';\n\nconst isoToFlag = country =>\n  String.fromCodePoint(...country.split('').map(c => c.charCodeAt() + 0x1f1a5));\n\nconst asciiSearch = (options, query) => {\n  // To find accented country names in the drop-down easily\n  // the country names (and query string as well) are transliterated\n  // to contain only ASCII characters.\n  // Example:\n  // * typing \"turk\" will show \"Trkey\" and \"Turkmenistan\"\n  // * typing \"rk\" will show \"Burkina Faso\", \"Trkey\", and \"Turkmenistan\"\n  // See https://stackoverflow.com/a/37511463 for more details regarding the transliteration.\n  const transliterate = inputStr =>\n    inputStr\n      .toLowerCase()\n      .normalize('NFD')\n      .replace(/\\p{Diacritic}/gu, '');\n  const asciiQuery = transliterate(query);\n  return options.filter(opt => transliterate(opt.text).includes(asciiQuery));\n};\n\nfunction CountryInputComponent({value, onChange, disabled, choices, clearable}) {\n  return (\n    <Dropdown\n      styleName=\"country-dropdown\"\n      placeholder={Translate.string('Select a country')}\n      fluid\n      search={asciiSearch}\n      selection\n      selectOnBlur={false}\n      selectOnNavigation={false}\n      disabled={disabled}\n      clearable={clearable}\n      value={value}\n      onChange={(_, {value: newValue = ''}) => onChange(newValue)}\n      options={choices.map(country => ({\n        key: country.countryKey,\n        value: country.countryKey,\n        text: `${isoToFlag(country.countryKey)} ${country.caption}`,\n      }))}\n    />\n  );\n}\n\nCountryInputComponent.propTypes = {\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  choices: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string)).isRequired,\n  clearable: PropTypes.bool.isRequired,\n};\n\nexport default function CountryInput({htmlId, htmlName, disabled, isRequired, choices}) {\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      component={CountryInputComponent}\n      required={isRequired}\n      disabled={disabled}\n      choices={choices}\n      clearable={!isRequired}\n      parse={x => x}\n    />\n  );\n}\n\nCountryInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  choices: PropTypes.arrayOf(PropTypes.objectOf(PropTypes.string)).isRequired,\n};\n\nCountryInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n};\n\nexport function CountrySettings({htmlName}) {\n  const {hasPredefinedAffiliations} = useSelector(getStaticData);\n  if (htmlName !== 'country' || !hasPredefinedAffiliations) {\n    return null;\n  }\n  return (\n    <FinalCheckbox\n      name=\"useAffiliationCountry\"\n      label={Translate.string('Default to affiliation country')}\n    />\n  );\n}\n\nCountrySettings.propTypes = {\n  htmlName: PropTypes.string,\n};\n\nCountrySettings.defaultProps = {\n  htmlName: undefined,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport createDecorator from 'final-form-calculate';\nimport PropTypes from 'prop-types';\nimport TimePicker from 'rc-time-picker';\nimport React from 'react';\nimport {Field} from 'react-final-form';\nimport {Form, Input} from 'semantic-ui-react';\n\nimport {DatePicker} from 'indico/react/components';\nimport {FinalDropdown, FinalField, parsers as p} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\nimport {toMoment} from 'indico/utils/date';\n\nimport '../../../styles/regform.module.scss';\n\nexport function DateInputComponent({\n  id,\n  value,\n  onChange,\n  onFocus,\n  onBlur,\n  disabled,\n  required,\n  dateFormat,\n  timeFormat,\n  minDate,\n  maxDate,\n}) {\n  const dateValue = value.split('T')[0];\n  const timeValue = value.includes('T') ? value.split('T')[1] : '';\n\n  const handleDateChange = newDate => {\n    const dateString = newDate || '';\n    const timeString = timeFormat ? timeValue : '00:00:00';\n    onChange(`${dateString}T${timeString}`);\n  };\n  const handleTimeChange = newTime =>\n    onChange(newTime ? `${dateValue}T${newTime.format('HH:mm:00')}` : dateValue);\n\n  return (\n    <Form.Group styleName=\"date-field\">\n      <Form.Field>\n        <DatePicker\n          id={id}\n          name=\"date\"\n          disabled={disabled}\n          required={required}\n          format={dateFormat}\n          value={dateValue}\n          onChange={handleDateChange}\n          onFocus={onFocus}\n          onBlur={onBlur}\n          min={minDate}\n          max={maxDate}\n        />\n      </Form.Field>\n      {timeFormat && (\n        <Form.Field>\n          <TimePicker\n            id={id}\n            name=\"time\"\n            disabled={disabled}\n            required={required}\n            showSecond={false}\n            value={toMoment(timeValue, 'HH:mm:ss', true)}\n            focusOnOpen\n            onChange={handleTimeChange}\n            use12Hours={timeFormat === '12h'}\n            allowEmpty={false}\n            placeholder={timeFormat === '12h' ? '--:-- am/pm' : '--:--'}\n            getPopupContainer={node => node}\n          />\n        </Form.Field>\n      )}\n    </Form.Group>\n  );\n}\n\nDateInputComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.string.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onFocus: PropTypes.func.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  required: PropTypes.bool.isRequired,\n  dateFormat: PropTypes.oneOf([\n    'DD/MM/YYYY',\n    'DD.MM.YYYY',\n    'MM/DD/YYYY',\n    'MM.DD.YYYY',\n    'YYYY/MM/DD',\n    'YYYY.MM.DD',\n    'MM/YYYY',\n    'MM.YYYY',\n    'YYYY',\n  ]).isRequired,\n  timeFormat: PropTypes.oneOf(['12h', '24h']),\n  minDate: PropTypes.string,\n  maxDate: PropTypes.string,\n};\n\nDateInputComponent.defaultProps = {\n  timeFormat: null,\n  minDate: undefined,\n  maxDate: undefined,\n};\n\nexport default function DateInput({\n  htmlId,\n  htmlName,\n  disabled,\n  isRequired,\n  dateFormat,\n  timeFormat,\n}) {\n  const friendlyDateFormat = dateFormat.replace(\n    /%([HMdmY])/g,\n    (match, c) => ({H: 'HH', M: 'mm', d: 'DD', m: 'MM', Y: 'YYYY'}[c])\n  );\n  const validateDateTime = dateTime => {\n    if (dateTime && !dateTime.match(/\\d{4}-[01]\\d-[0-3]\\dT[0-2]\\d:[0-5]\\d:00(.*)/)) {\n      return Translate.string('The provided date is invalid.');\n    }\n  };\n\n  if (dateFormat.includes('%d')) {\n    return (\n      <FinalField\n        id={htmlId}\n        name={htmlName}\n        component={DateInputComponent}\n        required={isRequired}\n        disabled={disabled}\n        dateFormat={friendlyDateFormat}\n        timeFormat={timeFormat}\n        validate={validateDateTime}\n      />\n    );\n  } else {\n    const parseDate = date => {\n      if (!date) {\n        return date;\n      }\n      const regexps = {\n        '%m/%Y': /^(?<month>\\d{2})\\/(?<year>\\d{4})$/,\n        '%m.%Y': /^(?<month>\\d{2})\\.(?<year>\\d{4})$/,\n        '%Y': /^(?<year>\\d{4})$/,\n      };\n      const match = regexps[dateFormat].exec(date);\n      const rv = match ? `${match.groups.year}-${match.groups.month ?? '01'}-01T00:00:00` : date;\n      try {\n        toMoment(rv, 'YYYY-MM-DDTHH:mm:ss', true);\n        return rv;\n      } catch (e) {\n        return date;\n      }\n    };\n    const formatDate = date => {\n      if (!date || !date.includes('T')) {\n        return date;\n      }\n      try {\n        return toMoment(date, 'YYYY-MM-DDTHH:mm:ss', true).format(friendlyDateFormat);\n      } catch (e) {\n        return date;\n      }\n    };\n    return (\n      <FinalField\n        id={htmlId}\n        type=\"text\"\n        name={htmlName}\n        component={Input}\n        required={isRequired}\n        disabled={disabled}\n        placeholder={friendlyDateFormat}\n        parse={parseDate}\n        format={formatDate}\n        validate={validateDateTime}\n      />\n    );\n  }\n}\n\nDateInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  dateFormat: PropTypes.oneOf([\n    '%d/%m/%Y',\n    '%d.%m.%Y',\n    '%m/%d/%Y',\n    '%m.%d.%Y',\n    '%Y/%m/%d',\n    '%Y.%m.%d',\n    '%m/%Y',\n    '%m.%Y',\n    '%Y',\n  ]).isRequired,\n  timeFormat: PropTypes.oneOf(['12h', '24h']),\n};\n\nDateInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n  timeFormat: null,\n};\n\nexport const dateSettingsFormDecorator = createDecorator({\n  field: 'dateFormat',\n  updates: dateFormat => {\n    // clear the time format when it doesn't make sense for the selected date format\n    if (!dateFormat.includes('%d')) {\n      return {timeFormat: null};\n    }\n    return {};\n  },\n});\n\nexport const dateSettingsInitialData = {\n  dateFormat: '%d/%m/%Y',\n  timeFormat: null,\n};\n\nexport function DateSettings() {\n  const dateOptions = [\n    '%d/%m/%Y',\n    '%d.%m.%Y',\n    '%m/%d/%Y',\n    '%m.%d.%Y',\n    '%Y/%m/%d',\n    '%Y.%m.%d',\n    '%m/%Y',\n    '%m.%Y',\n    '%Y',\n  ].map(opt => ({\n    key: opt,\n    value: opt,\n    text: opt.replace(\n      /%([HMdmY])/g,\n      (match, c) => ({H: 'hh', M: 'mm', d: 'DD', m: 'MM', Y: 'YYYY'}[c])\n    ),\n  }));\n  const timeOptions = [\n    {key: '12h', value: '12h', text: Translate.string('12 hours')},\n    {key: '24h', value: '24h', text: Translate.string('24 hours')},\n  ];\n  return (\n    <Form.Group widths=\"equal\">\n      <FinalDropdown\n        name=\"dateFormat\"\n        label={Translate.string('Date format')}\n        options={dateOptions}\n        required\n        selection\n        fluid\n      />\n      <Field name=\"dateFormat\" subscription={{value: true}}>\n        {({input: {value: dateFormat}}) => (\n          <FinalDropdown\n            name=\"timeFormat\"\n            label={Translate.string('Time format')}\n            options={timeOptions}\n            placeholder={Translate.string('None')}\n            disabled={!dateFormat.includes('%d')}\n            parse={p.nullIfEmpty}\n            selection\n            fluid\n          />\n        )}\n      </Field>\n    </Form.Group>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport validateEmailURL from 'indico-url:event_registration.check_email';\n\nimport PropTypes from 'prop-types';\nimport React, {useMemo, useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {Message} from 'semantic-ui-react';\n\nimport {FinalInput, validators as v} from 'indico/react/forms';\nimport {useDebouncedAsyncValidate} from 'indico/react/hooks';\nimport {Param, Translate} from 'indico/react/i18n';\nimport {indicoAxios, handleAxiosError} from 'indico/utils/axios';\n\nimport {getUpdateMode} from '../../form_submission/selectors';\nimport {getStaticData} from '../selectors';\n\nimport '../../../styles/regform.module.scss';\n\nexport default function EmailInput({htmlId, htmlName, disabled, isRequired}) {\n  const isMainEmailField = htmlName === 'email';\n  const [message, setMessage] = useState({status: '', message: '', forEmail: ''});\n  const isUpdateMode = useSelector(getUpdateMode);\n  const {eventId, regformId, registrationUuid, management} = useSelector(getStaticData);\n  const [invitationToken, formToken] = useMemo(() => {\n    const params = new URLSearchParams(location.search);\n    return [params.get('invitation'), params.get('form_token')];\n  }, []);\n  const url = useMemo(() => {\n    const params = {event_id: eventId, reg_form_id: regformId};\n    if (invitationToken) {\n      params.invitation = invitationToken;\n    }\n    if (formToken) {\n      params.form_token = formToken;\n    }\n    return validateEmailURL(params);\n  }, [eventId, regformId, invitationToken, formToken]);\n  const validateEmail = useDebouncedAsyncValidate(async email => {\n    let msg, response;\n    email = email.trim();\n    if (!email) {\n      // we disabled the regular required validator in order for this to always run\n      msg = Translate.string('This field is required.');\n      setMessage({\n        status: 'error',\n        forEmail: email,\n        message: msg,\n      });\n      return msg;\n    }\n    setMessage({\n      status: '',\n      forEmail: email,\n      message: Translate.string('Checking email address...'),\n    });\n    try {\n      response = await indicoAxios.get(url, {\n        params: isUpdateMode ? {email, management, update: registrationUuid} : {email, management},\n      });\n    } catch (error) {\n      return handleAxiosError(error);\n    }\n    const data = response.data;\n    const name = data.user ? $('<span>', {text: data.user}).html() : null;\n    if (data.conflict === 'email-already-registered') {\n      msg = Translate.string('There is already a registration with this email address.');\n    } else if (data.conflict === 'user-already-registered') {\n      msg = Translate.string('The user associated with this email address is already registered.');\n    } else if (data.conflict === 'no-user') {\n      msg = Translate.string('There is no Indico user associated with this email address.');\n    } else if (\n      data.status === 'error' &&\n      (data.conflict === 'email-other-user' || data.conflict === 'email-no-user')\n    ) {\n      msg = Translate.string('This email address is not associated with your Indico account.');\n    } else if (data.conflict === 'email-other-user') {\n      msg = (\n        <Translate>\n          The registration will be re-associated to a different user (\n          <Param name=\"name\" wrapper={<strong />} value={name} />\n          ).\n        </Translate>\n      );\n    } else if (data.conflict === 'email-no-user') {\n      msg = (\n        <Translate>\n          The registration will be disassociated from the current user (\n          <Param name=\"name\" wrapper={<strong />} value={name} />\n          ).\n        </Translate>\n      );\n    } else if (data.conflict === 'email-invalid') {\n      if (data.email_error === 'undeliverable') {\n        msg = Translate.string('The domain used in the email address does not exist.');\n      } else {\n        msg = Translate.string('This email address is invalid.');\n      }\n    } else if (!data.user) {\n      msg = Translate.string('The registration will not be associated with any Indico account.');\n    } else if (data.self) {\n      msg = Translate.string('The registration will be associated with your Indico account.');\n    } else if (data.same) {\n      msg = (\n        <Translate>\n          The registration will remain associated with the Indico account{' '}\n          <Param name=\"name\" wrapper={<strong />} value={name} />.\n        </Translate>\n      );\n    } else {\n      msg = (\n        <Translate>\n          The registration will be associated with the Indico account{' '}\n          <Param name=\"name\" wrapper={<strong />} value={name} />.\n        </Translate>\n      );\n    }\n\n    setMessage({status: data.status, message: msg, forEmail: email});\n    if (data.status === 'error') {\n      return msg;\n    }\n  }, 250);\n\n  return (\n    <FinalInput\n      type=\"email\"\n      id={htmlId}\n      name={htmlName}\n      required={isRequired && isMainEmailField ? 'no-validator' : isRequired}\n      disabled={disabled}\n      validate={isMainEmailField ? validateEmail : isRequired ? v.required : undefined}\n      // hide the normal error tooltip if we have an error from our async validation\n      hideValidationError={\n        isMainEmailField && message.status === 'error' && message.forEmail ? 'message' : false\n      }\n      loaderWhileValidating\n    >\n      {isMainEmailField && !!message.forEmail && !!message.message && (\n        <Message\n          visible\n          warning={message.status === 'warning'}\n          error={message.status === 'error'}\n          positive={message.status === 'ok'}\n        >\n          {message.message}\n        </Message>\n      )}\n    </FinalInput>\n  );\n}\n\nEmailInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool.isRequired,\n};\n\nEmailInput.defaultProps = {\n  disabled: false,\n};\n","// extracted by mini-css-extract-plugin\nexport default {\"field-file-input\":\"events-registration-client-js-form-fields-___FileInput-module__field-file-input___UvzUm\",\"fileinput-label\":\"events-registration-client-js-form-fields-___FileInput-module__fileinput-label___mRG4Q\",\"fileinput-label-squarecorners\":\"events-registration-client-js-form-fields-___FileInput-module__fileinput-label-squarecorners___oXZ7p\"};","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport uploadFileURL from 'indico-url:event_registration.upload_registration_file';\n\nimport PropTypes from 'prop-types';\nimport React, {useMemo} from 'react';\nimport {useSelector} from 'react-redux';\n\nimport {FinalSingleFileManager} from 'indico/react/components';\n\nimport {getUpdateMode} from '../../form_submission/selectors';\nimport {getStaticData} from '../selectors';\n\nimport '../../../styles/regform.module.scss';\nimport './FileInput.module.scss';\n\nexport default function FileInput({htmlName, disabled, isRequired}) {\n  const {eventId, regformId, registrationUuid, fileData} = useSelector(getStaticData);\n  const isUpdateMode = useSelector(getUpdateMode);\n  const [invitationToken, formToken] = useMemo(() => {\n    const params = new URLSearchParams(location.search);\n    return [params.get('invitation'), params.get('form_token')];\n  }, []);\n\n  const initialFileDetails = isUpdateMode ? fileData[htmlName] || null : null;\n\n  const urlParams = {\n    event_id: eventId,\n    reg_form_id: regformId,\n  };\n  if (registrationUuid) {\n    urlParams.token = registrationUuid;\n  }\n  if (invitationToken) {\n    urlParams.invitation = invitationToken;\n  }\n  if (formToken) {\n    urlParams.form_token = formToken;\n  }\n\n  return (\n    <div styleName=\"file-field\">\n      <FinalSingleFileManager\n        name={htmlName}\n        disabled={disabled}\n        required={isRequired}\n        uploadURL={uploadFileURL(urlParams)}\n        initialFileDetails={initialFileDetails}\n      />\n    </div>\n  );\n}\n\nFileInput.propTypes = {\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n};\n\nFileInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport '../../../styles/regform.module.scss';\n\nexport default function LabelInput({title}) {\n  return <div styleName=\"label\">{title}</div>;\n}\n\nLabelInput.propTypes = {\n  title: PropTypes.string.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Field} from 'react-final-form';\nimport {useSelector} from 'react-redux';\nimport {Checkbox, Dropdown, Label} from 'semantic-ui-react';\n\nimport {FinalCheckbox, FinalField, FinalInput, validators as v} from 'indico/react/forms';\nimport {Translate, PluralTranslate} from 'indico/react/i18n';\n\nimport {getCurrency} from '../../form/selectors';\nimport {getFieldValue, getManagement, getPaid} from '../../form_submission/selectors';\n\nimport ChoiceLabel from './ChoiceLabel';\nimport {Choices, choiceShape} from './ChoicesSetup';\nimport {PlacesLeft} from './PlacesLeftLabel';\n\nimport '../../../styles/regform.module.scss';\nimport './table.module.scss';\n\nfunction MultiChoiceInputComponent({\n  id,\n  existingValue,\n  value,\n  onChange,\n  onFocus,\n  onBlur,\n  disabled,\n  choices,\n  withExtraSlots,\n  placesUsed,\n}) {\n  const paid = useSelector(getPaid);\n  const management = useSelector(getManagement);\n  const currency = useSelector(getCurrency);\n\n  const markTouched = () => {\n    onFocus();\n    onBlur();\n  };\n\n  const makeHandleChange = choice => () => {\n    markTouched();\n    if (value[choice.id]) {\n      onChange(_.omit(value, choice.id));\n    } else {\n      onChange({...value, [choice.id]: +!value[choice.id]});\n    }\n  };\n  const makeHandleSlotsChange = choice => (__, {value: newValue}) => {\n    markTouched();\n    if (!+newValue) {\n      onChange(_.omit(value, choice.id));\n    } else {\n      onChange({...value, [choice.id]: +newValue});\n    }\n  };\n\n  const formatPrice = choice => {\n    const val = value[choice.id] || 0;\n    return ((val === 0 ? 0 : choice.extraSlotsPay ? val : 1) * choice.price).toFixed(2);\n  };\n\n  const isPaidChoice = choice => choice.price > 0 && paid;\n  const isPaidChoiceLocked = choice => !management && isPaidChoice(choice);\n\n  return (\n    <table styleName=\"choice-table\" role=\"presentation\">\n      <tbody>\n        {choices.map((choice, index) => {\n          return (\n            <tr key={choice.id} styleName=\"row\">\n              <td>\n                <Checkbox\n                  id={id ? `${id}-${index}` : ''}\n                  styleName=\"checkbox\"\n                  style={{pointerEvents: 'auto'}} // keep label tooltips working when disabled\n                  value={choice.id}\n                  disabled={\n                    !choice.isEnabled ||\n                    disabled ||\n                    isPaidChoiceLocked(choice) ||\n                    (choice.placesLimit > 0 &&\n                      (placesUsed[choice.id] || 0) >= choice.placesLimit &&\n                      !existingValue[choice.id])\n                  }\n                  checked={!!value[choice.id]}\n                  onChange={makeHandleChange(choice)}\n                  label={{\n                    children: (\n                      <ChoiceLabel\n                        choice={choice}\n                        management={management}\n                        paid={isPaidChoice(choice)}\n                      />\n                    ),\n                  }}\n                />\n              </td>\n              <td>\n                {choice.isEnabled && !!choice.price && (\n                  <Label pointing=\"left\">\n                    {choice.price.toFixed(2)} {currency}\n                  </Label>\n                )}\n              </td>\n              <td>\n                {choice.placesLimit === 0 ? null : (\n                  <PlacesLeft\n                    placesLimit={choice.placesLimit}\n                    placesUsed={placesUsed[choice.id] || 0}\n                    isEnabled={!disabled && choice.isEnabled && !isPaidChoiceLocked(choice)}\n                  />\n                )}\n              </td>\n              {withExtraSlots && (\n                <td>\n                  {choice.isEnabled && (\n                    <Dropdown\n                      selection\n                      styleName=\"dropdown\"\n                      disabled={\n                        disabled ||\n                        isPaidChoiceLocked(choice) ||\n                        (choice.placesLimit > 0 &&\n                          (placesUsed[choice.id] || 0) - (existingValue[choice.id] || 0) >=\n                            choice.placesLimit)\n                      }\n                      value={value[choice.id] || 0}\n                      onChange={makeHandleSlotsChange(choice)}\n                      options={_.range(0, choice.maxExtraSlots + 2).map(i => ({\n                        key: i,\n                        value: i,\n                        text: i,\n                        disabled:\n                          choice.placesLimit > 0 &&\n                          (placesUsed[choice.id] || 0) - (existingValue[choice.id] || 0) + i >\n                            choice.placesLimit,\n                      }))}\n                    />\n                  )}\n                </td>\n              )}\n              {withExtraSlots && (\n                <td>\n                  {choice.isEnabled && !!choice.price && (\n                    <Label pointing=\"left\">\n                      {Translate.string('Total: {total} {currency}', {\n                        total: formatPrice(choice),\n                        currency,\n                      })}\n                    </Label>\n                  )}\n                </td>\n              )}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n}\n\nMultiChoiceInputComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onFocus: PropTypes.func.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  withExtraSlots: PropTypes.bool.isRequired,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n  existingValue: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nexport default function MultiChoiceInput({\n  fieldId,\n  htmlId,\n  htmlName,\n  disabled,\n  isRequired,\n  choices,\n  maxChoices,\n  withExtraSlots,\n  placesUsed,\n}) {\n  const existingValue = useSelector(state => getFieldValue(state, fieldId)) || {};\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      component={MultiChoiceInputComponent}\n      required={isRequired}\n      disabled={disabled}\n      choices={choices}\n      withExtraSlots={withExtraSlots}\n      placesUsed={placesUsed}\n      existingValue={existingValue}\n      isEqual={_.isEqual}\n      validate={value => {\n        if (maxChoices && _.keys(value).length > maxChoices) {\n          return PluralTranslate.string(\n            'At most {n} option can be selected',\n            'At most {n} options can be selected',\n            maxChoices,\n            {n: maxChoices}\n          );\n        }\n      }}\n    />\n  );\n}\n\nMultiChoiceInput.propTypes = {\n  fieldId: PropTypes.number.isRequired,\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  maxChoices: PropTypes.number,\n  withExtraSlots: PropTypes.bool,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nMultiChoiceInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n  maxChoices: null,\n  withExtraSlots: false,\n};\n\nexport const multiChoiceSettingsInitialData = {\n  choices: [],\n  withExtraSlots: false,\n};\n\nexport function MultiChoiceSettings() {\n  return (\n    <>\n      <Field name=\"choices\" subscription={{value: true}}>\n        {({input: {value}}) => {\n          const min = value.length > 0 ? 1 : 0;\n          const max = value.length > 0 ? value.length : 0;\n          return (\n            <FinalInput\n              name=\"maxChoices\"\n              type=\"number\"\n              placeholder={Translate.string('Unlimited', 'Number of choices')}\n              step=\"1\"\n              min={min}\n              max={max}\n              validate={v.optional(v.range(min, max))}\n              label={Translate.string('Maximum number of choices')}\n              description={Translate.string(\n                'Maximum number of choices that can be selected. Leave empty to unset.'\n              )}\n            />\n          );\n        }}\n      </Field>\n      <FinalCheckbox name=\"withExtraSlots\" label={Translate.string('Enable extra slots')} />\n      <Field name=\"withExtraSlots\" subscription={{value: true}}>\n        {({input: {value: withExtraSlots}}) => (\n          <FinalField\n            name=\"choices\"\n            label={Translate.string('Choices')}\n            component={Choices}\n            withExtraSlots={withExtraSlots}\n            isEqual={_.isEqual}\n            required\n          />\n        )}\n      </Field>\n    </>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useSelector} from 'react-redux';\nimport {Form, Label} from 'semantic-ui-react';\n\nimport {FinalInput, FinalField, validators as v, parsers as p} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport {getCurrency} from '../../form/selectors';\n\nimport '../../../styles/regform.module.scss';\n\nfunction NumberInputComponent({id, value, onChange, disabled, price, minValue, maxValue}) {\n  const currency = useSelector(getCurrency);\n  const total = (value * price).toFixed(2);\n\n  return (\n    <div styleName=\"number-field\">\n      <input\n        id={id}\n        type=\"number\"\n        value={value !== null ? value : ''}\n        min={minValue}\n        max={maxValue || undefined}\n        disabled={disabled}\n        onChange={evt => onChange(evt.target.value ? +evt.target.value : null)}\n      />\n      {!!price && (\n        <Label pointing=\"left\" styleName=\"price-tag\">\n          {price.toFixed(2)} {currency} (Total: {total} {currency})\n        </Label>\n      )}\n    </div>\n  );\n}\n\nNumberInputComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.number,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  price: PropTypes.number.isRequired,\n  minValue: PropTypes.number.isRequired,\n  maxValue: PropTypes.number,\n};\n\nNumberInputComponent.defaultProps = {\n  value: null,\n  maxValue: null,\n};\n\nexport default function NumberInput({\n  htmlId,\n  htmlName,\n  disabled,\n  isRequired,\n  price,\n  minValue,\n  maxValue,\n}) {\n  const validate = isRequired\n    ? v.chain(v.required, v.number(), v.range(minValue, maxValue || Infinity))\n    : v.chain(v.optional(), v.number(), v.range(minValue, maxValue || Infinity));\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      component={NumberInputComponent}\n      required={isRequired}\n      disabled={disabled}\n      allowNull\n      price={price}\n      minValue={minValue}\n      maxValue={maxValue}\n      parse={p.number}\n      validate={validate}\n    />\n  );\n}\n\nNumberInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  price: PropTypes.number,\n  minValue: PropTypes.number,\n  maxValue: PropTypes.number,\n};\n\nNumberInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n  price: 0,\n  minValue: 0,\n  maxValue: 0,\n};\n\nexport function NumberSettings() {\n  return (\n    <Form.Group widths=\"equal\">\n      <FinalInput\n        name=\"minValue\"\n        type=\"number\"\n        label={Translate.string('Minimum')}\n        placeholder={String(NumberInput.defaultProps.minValue)}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(v.min(0))}\n        format={val => val || ''}\n        parse={val => +val || 0}\n        fluid\n      />\n      <FinalInput\n        name=\"maxValue\"\n        type=\"number\"\n        label={Translate.string('Maximum')}\n        placeholder={Translate.string('No maximum')}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(v.min(0))}\n        format={val => val || ''}\n        parse={val => +val || 0}\n        fluid\n      />\n    </Form.Group>\n  );\n}\n\nexport function numberSettingsFormValidator({minValue, maxValue}) {\n  if (minValue && maxValue && minValue > maxValue) {\n    const msg = Translate.string('The minimum value cannot be greater than the maximum value.');\n    return {\n      minValue: msg,\n      maxValue: msg,\n    };\n  }\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\n\nimport {FinalInput} from 'indico/react/forms';\n\nimport '../../../styles/regform.module.scss';\n\nexport default function PhoneInput({htmlId, htmlName, isRequired, disabled}) {\n  return (\n    <FinalInput id={htmlId} type=\"tel\" name={htmlName} required={isRequired} disabled={disabled} />\n  );\n}\n\nPhoneInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool,\n};\n\nPhoneInput.defaultProps = {\n  disabled: false,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport managementPreviewURL from 'indico-url:event_registration.manage_registration_file';\nimport registrantPreviewURL from 'indico-url:event_registration.registration_picture';\nimport uploadURL from 'indico-url:event_registration.upload_registration_picture';\n\nimport PropTypes from 'prop-types';\nimport React, {useMemo} from 'react';\nimport {useSelector} from 'react-redux';\n\nimport {FinalPictureManager} from 'indico/react/components';\nimport {FinalInput, validators as v} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport {getManagement} from '../../form_submission/selectors';\nimport {getStaticData} from '../selectors';\n\nimport '../../../styles/regform.module.scss';\nimport './FileInput.module.scss';\n\nexport default function PictureInput({htmlName, disabled, isRequired, minPictureSize}) {\n  const {eventId, regformId, registrationUuid, fileData} = useSelector(getStaticData);\n  const initialPictureDetails = fileData ? fileData[htmlName] || null : null;\n  const isManagement = useSelector(getManagement);\n  const [invitationToken, formToken] = useMemo(() => {\n    const params = new URLSearchParams(location.search);\n    return [params.get('invitation'), params.get('form_token')];\n  }, []);\n\n  const previewURL = isManagement ? managementPreviewURL : registrantPreviewURL;\n  const uploadUrlParams = {\n    event_id: eventId,\n    reg_form_id: regformId,\n  };\n  if (registrationUuid) {\n    uploadUrlParams.token = registrationUuid;\n  }\n  if (invitationToken) {\n    uploadUrlParams.invitation = invitationToken;\n  }\n  if (formToken) {\n    uploadUrlParams.form_token = formToken;\n  }\n  const previewUrlParams = initialPictureDetails ? initialPictureDetails.locator : null;\n\n  return (\n    <div styleName=\"file-field\">\n      <FinalPictureManager\n        name={htmlName}\n        disabled={disabled}\n        required={isRequired}\n        uploadURL={uploadURL(uploadUrlParams)}\n        previewURL={previewUrlParams ? previewURL(previewUrlParams) : ''}\n        initialPictureDetails={initialPictureDetails}\n        minPictureSize={minPictureSize}\n      />\n    </div>\n  );\n}\n\nPictureInput.propTypes = {\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  minPictureSize: PropTypes.number,\n};\n\nPictureInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n  minPictureSize: null,\n};\n\nexport function PictureSettings() {\n  return (\n    <FinalInput\n      name=\"minPictureSize\"\n      type=\"number\"\n      label={Translate.string('Minimum picture size')}\n      placeholder={Translate.string('Unlimited')}\n      description={Translate.string(\n        'Minimum picture size that can be uploaded in pixels. Leave empty for no min size validation.'\n      )}\n      step=\"1\"\n      min=\"0\"\n      max=\"1000\"\n      validate={v.optional(v.min(0))}\n      fluid\n      format={val => val || ''}\n      parse={val => +val || 0}\n    />\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport createDecorator from 'final-form-calculate';\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Field} from 'react-final-form';\nimport {useSelector} from 'react-redux';\nimport {Form, Label, Dropdown} from 'semantic-ui-react';\n\nimport {FinalCheckbox, FinalDropdown, FinalField, parsers as p} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport {getCurrency} from '../../form/selectors';\nimport {getFieldValue, getManagement, getPaid} from '../../form_submission/selectors';\n\nimport ChoiceLabel from './ChoiceLabel';\nimport {Choices, choiceShape} from './ChoicesSetup';\nimport {PlacesLeft} from './PlacesLeftLabel';\n\nimport '../../../styles/regform.module.scss';\nimport './table.module.scss';\n\nfunction SingleChoiceDropdown({\n  id,\n  existingValue,\n  value,\n  onChange,\n  disabled,\n  isRequired,\n  isPurged,\n  choices,\n  withExtraSlots,\n  placesUsed,\n}) {\n  const paid = useSelector(getPaid);\n  const management = useSelector(getManagement);\n  const currency = useSelector(getCurrency);\n  const selectedChoice = choices.find(c => c.id in value) || {};\n\n  const isPaidChoice = choice => choice.price > 0 && paid;\n  const isPaidChoiceLocked = choice => !management && isPaidChoice(choice);\n\n  let extraSlotsDropdown = null;\n  if (withExtraSlots && selectedChoice && selectedChoice.maxExtraSlots > 0) {\n    const options = _.range(1, selectedChoice.maxExtraSlots + 2).map(i => ({\n      key: i,\n      value: i,\n      text: i,\n      disabled:\n        selectedChoice.placesLimit > 0 &&\n        (placesUsed[selectedChoice.id] || 0) - (existingValue[selectedChoice.id] || 0) + i >\n          selectedChoice.placesLimit,\n    }));\n    extraSlotsDropdown = (\n      <Form.Select\n        id={id ? `${id}-extraslots` : ''}\n        options={options}\n        disabled={\n          disabled ||\n          isPaidChoiceLocked(selectedChoice) ||\n          (selectedChoice.placesLimit > 0 &&\n            (placesUsed[selectedChoice.id] || 0) - (existingValue[selectedChoice.id] || 0) >=\n              selectedChoice.placesLimit)\n        }\n        value={value[selectedChoice.id]}\n        onChange={(_evt, data) => onChange({[selectedChoice.id]: data.value})}\n        fluid\n      />\n    );\n  }\n\n  const options = choices.map(c => ({\n    key: c.id,\n    value: c.id,\n    disabled:\n      !c.isEnabled ||\n      isPaidChoiceLocked(c) ||\n      (c.placesLimit > 0 && (placesUsed[c.id] || 0) >= c.placesLimit && !existingValue[c.id]),\n    text: c.caption,\n    content: (\n      <div styleName=\"dropdown-text\">\n        <div styleName=\"caption\">\n          <ChoiceLabel choice={c} management={management} paid={isPaidChoice(c)} />\n        </div>\n        <div styleName=\"labels\">\n          {!!c.price && (\n            <Label>\n              {c.price} {currency}\n            </Label>\n          )}\n          {c.placesLimit === 0 ? null : (\n            <PlacesLeft\n              placesLimit={c.placesLimit}\n              placesUsed={placesUsed[c.id] || 0}\n              isEnabled={c.isEnabled}\n            />\n          )}\n        </div>\n      </div>\n    ),\n  }));\n\n  return (\n    <Form.Group styleName=\"single-choice-dropdown\">\n      <Form.Field>\n        <Dropdown\n          id={id}\n          selection\n          style={{width: 500, opacity: 1}}\n          placeholder={Translate.string('Choose an option')}\n          options={options}\n          disabled={disabled}\n          value={(!isPurged && selectedChoice.id) || ''}\n          onChange={(e, data) => onChange(data.value ? {[data.value]: 1} : {})}\n          clearable={!isRequired}\n          search\n          selectOnNavigation={false}\n          selectOnBlur={false}\n        />\n      </Form.Field>\n      {extraSlotsDropdown}\n      {extraSlotsDropdown && !!selectedChoice.price && (\n        <Label pointing=\"left\">\n          {Translate.string('Total: {total} {currency}', {\n            total: (\n              (selectedChoice.extraSlotsPay ? value[selectedChoice.id] : 1) * selectedChoice.price\n            ).toFixed(2),\n            currency,\n          })}\n        </Label>\n      )}\n    </Form.Group>\n  );\n}\n\nSingleChoiceDropdown.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  isPurged: PropTypes.bool.isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  withExtraSlots: PropTypes.bool.isRequired,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n  existingValue: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nfunction SingleChoiceRadioGroup({\n  id,\n  existingValue,\n  value,\n  onChange,\n  disabled,\n  isRequired,\n  isPurged,\n  choices,\n  withExtraSlots,\n  placesUsed,\n}) {\n  const paid = useSelector(getPaid);\n  const management = useSelector(getManagement);\n  const currency = useSelector(getCurrency);\n  const selectedChoice = choices.find(c => c.id in value) || {id: ''};\n  const radioChoices = [...choices];\n  if (!isRequired) {\n    radioChoices.unshift({id: '', isEnabled: true, caption: Translate.string('None')});\n  }\n\n  const handleChange = newValue => {\n    if (newValue === '') {\n      onChange({});\n    } else {\n      onChange({[newValue]: 1});\n    }\n  };\n\n  const isChecked = currentChoice => currentChoice.id === selectedChoice.id;\n\n  const isPaidChoice = choice => choice.price > 0 && paid;\n  const isPaidChoiceLocked = choice => !management && isPaidChoice(choice);\n\n  return (\n    <table styleName=\"choice-table\" role=\"presentation\">\n      <tbody>\n        {radioChoices.map((c, index) => {\n          return (\n            <tr key={c.id} styleName=\"row\">\n              <td>\n                <Form.Radio\n                  id={id ? `${id}-${index}` : ''}\n                  style={{pointerEvents: 'auto'}} // keep label tooltips working when disabled\n                  styleName=\"radio\"\n                  label={{\n                    children: (\n                      <ChoiceLabel choice={c} management={management} paid={isPaidChoice(c)} />\n                    ),\n                  }}\n                  key={c.id}\n                  value={c.id}\n                  disabled={\n                    !c.isEnabled ||\n                    disabled ||\n                    isPaidChoiceLocked(c) ||\n                    (c.placesLimit > 0 &&\n                      (placesUsed[c.id] || 0) - (existingValue[c.id] || 0) >= c.placesLimit)\n                  }\n                  checked={!isPurged && isChecked(c)}\n                  onChange={() => handleChange(c.id)}\n                />\n              </td>\n              <td>\n                {c.isEnabled && !!c.price && (\n                  <Label pointing=\"left\">\n                    {c.price.toFixed(2)} {currency}\n                  </Label>\n                )}\n              </td>\n              <td>\n                {c.id !== '' && c.placesLimit !== 0 && (\n                  <PlacesLeft\n                    placesLimit={c.placesLimit}\n                    placesUsed={placesUsed[c.id] || 0}\n                    isEnabled={!disabled && c.isEnabled && !isPaidChoiceLocked(c)}\n                  />\n                )}\n              </td>\n              {withExtraSlots && !!c.maxExtraSlots && selectedChoice.id === c.id && (\n                <>\n                  <td>\n                    {c.isEnabled && (\n                      <Dropdown\n                        id={id ? `${id}-extraslot` : ''}\n                        selection\n                        styleName=\"dropdown\"\n                        disabled={\n                          disabled ||\n                          isPaidChoiceLocked(c) ||\n                          (c.placesLimit > 0 &&\n                            (placesUsed[c.id] || 0) - (existingValue[c.id] || 0) >= c.placesLimit)\n                        }\n                        value={value[selectedChoice.id]}\n                        onChange={(e, data) => onChange({[selectedChoice.id]: data.value})}\n                        options={_.range(1, c.maxExtraSlots + 2).map(i => ({\n                          key: i,\n                          value: i,\n                          text: i,\n                          disabled:\n                            selectedChoice.placesLimit > 0 &&\n                            (placesUsed[selectedChoice.id] || 0) -\n                              (existingValue[selectedChoice.id] || 0) +\n                              i >\n                              selectedChoice.placesLimit,\n                        }))}\n                      />\n                    )}\n                  </td>\n                  <td>\n                    {c.isEnabled && !!c.price && (\n                      <Label pointing=\"left\">\n                        {Translate.string('Total: {total} {currency}', {\n                          total: (value[selectedChoice.id] * c.price).toFixed(2),\n                          currency,\n                        })}\n                      </Label>\n                    )}\n                  </td>\n                </>\n              )}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  );\n}\n\nSingleChoiceRadioGroup.propTypes = {\n  id: PropTypes.string.isRequired,\n  value: PropTypes.object.isRequired,\n  onChange: PropTypes.func.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  isPurged: PropTypes.bool.isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  withExtraSlots: PropTypes.bool.isRequired,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n  existingValue: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nfunction SingleChoiceInputComponent({\n  id,\n  existingValue,\n  value,\n  onChange,\n  disabled,\n  isRequired,\n  isPurged,\n  itemType,\n  choices,\n  withExtraSlots,\n  placesUsed,\n}) {\n  let component = null;\n  if (itemType === 'dropdown') {\n    component = (\n      <SingleChoiceDropdown\n        id={id}\n        value={value}\n        existingValue={existingValue}\n        onChange={onChange}\n        disabled={disabled}\n        isRequired={isRequired}\n        isPurged={isPurged}\n        choices={choices}\n        withExtraSlots={withExtraSlots}\n        placesUsed={placesUsed}\n      />\n    );\n  } else if (itemType === 'radiogroup') {\n    component = (\n      <SingleChoiceRadioGroup\n        id={id}\n        value={value}\n        existingValue={existingValue}\n        onChange={onChange}\n        disabled={disabled}\n        isRequired={isRequired}\n        isPurged={isPurged}\n        choices={choices}\n        withExtraSlots={withExtraSlots}\n        placesUsed={placesUsed}\n      />\n    );\n  } else {\n    return `ERROR: Unknown type ${itemType}`;\n  }\n\n  return component;\n}\n\nSingleChoiceInputComponent.propTypes = {\n  id: PropTypes.string.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  isPurged: PropTypes.bool.isRequired,\n  itemType: PropTypes.oneOf(['dropdown', 'radiogroup']).isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  withExtraSlots: PropTypes.bool.isRequired,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n  existingValue: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nexport default function SingleChoiceInput({\n  fieldId,\n  htmlId,\n  htmlName,\n  disabled,\n  isRequired,\n  isPurged,\n  itemType,\n  choices,\n  withExtraSlots,\n  placesUsed,\n}) {\n  const existingValue = useSelector(state => getFieldValue(state, fieldId)) || {};\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      component={SingleChoiceInputComponent}\n      format={v => v || {}}\n      required={isRequired}\n      isRequired={isRequired}\n      validate={v =>\n        isRequired && (!v || !Object.keys(v).length)\n          ? Translate.string('This field is required.')\n          : undefined\n      }\n      disabled={disabled}\n      isPurged={isPurged}\n      itemType={itemType}\n      choices={choices}\n      withExtraSlots={withExtraSlots}\n      placesUsed={placesUsed}\n      existingValue={existingValue}\n      isEqual={_.isEqual}\n    />\n  );\n}\n\nSingleChoiceInput.propTypes = {\n  fieldId: PropTypes.number.isRequired,\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  isRequired: PropTypes.bool,\n  isPurged: PropTypes.bool.isRequired,\n  itemType: PropTypes.oneOf(['dropdown', 'radiogroup']).isRequired,\n  choices: PropTypes.arrayOf(PropTypes.shape(choiceShape)).isRequired,\n  withExtraSlots: PropTypes.bool,\n  placesUsed: PropTypes.objectOf(PropTypes.number).isRequired,\n};\n\nSingleChoiceInput.defaultProps = {\n  disabled: false,\n  isRequired: false,\n  withExtraSlots: false,\n};\n\nexport const singleChoiceSettingsFormDecorator = createDecorator({\n  field: 'choices',\n  updates: (choices, __, {defaultItem}) => {\n    // clear the default item when it's removed from the choices or disabled\n    if (!choices.some(c => c.id === defaultItem && c.isEnabled)) {\n      return {defaultItem: null};\n    }\n    return {};\n  },\n});\n\nexport const singleChoiceSettingsInitialData = {\n  choices: [],\n  itemType: 'dropdown',\n  defaultItem: null,\n  withExtraSlots: false,\n};\n\nexport function SingleChoiceSettings() {\n  return (\n    <>\n      <FinalDropdown\n        name=\"itemType\"\n        label={Translate.string('Widget type')}\n        options={[\n          {key: 'dropdown', value: 'dropdown', text: Translate.string('Drop-down list')},\n          {key: 'radiogroup', value: 'radiogroup', text: Translate.string('Radio buttons')},\n        ]}\n        selection\n        required\n      />\n      <Field name=\"choices\" subscription={{value: true}} isEqual={_.isEqual}>\n        {({input: {value: choices}}) => (\n          <FinalDropdown\n            name=\"defaultItem\"\n            label={Translate.string('Default option')}\n            options={choices\n              .filter(c => c.isEnabled)\n              .map(c => ({key: c.id, value: c.id, text: c.caption}))}\n            disabled={!choices.some(c => c.isEnabled)}\n            parse={p.nullIfEmpty}\n            selection\n          />\n        )}\n      </Field>\n      <FinalCheckbox name=\"withExtraSlots\" label={Translate.string('Enable extra slots')} />\n      <Field name=\"withExtraSlots\" subscription={{value: true}}>\n        {({input: {value: withExtraSlots}}) => (\n          <FinalField\n            name=\"choices\"\n            label={Translate.string('Choices')}\n            component={Choices}\n            withExtraSlots={withExtraSlots}\n            isEqual={_.isEqual}\n            required\n          />\n        )}\n      </Field>\n    </>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nexport function mapPropsToAttributes(props, mapping, defaults) {\n  const inputProps = {};\n  Object.entries(mapping).forEach(([prop, attr]) => {\n    const val = props[prop];\n    if (val === null && prop in defaults) {\n      inputProps[attr] = defaults[prop];\n    } else if (val > 0) {\n      inputProps[attr] = val;\n    }\n  });\n  return inputProps;\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Form} from 'semantic-ui-react';\n\nimport {FinalInput, FinalTextArea, validators as v} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport '../../../styles/regform.module.scss';\n\nimport {mapPropsToAttributes} from './util';\n\nconst attributeMap = {\n  numberOfRows: 'rows',\n};\n\nexport default function TextAreaInput({htmlId, htmlName, disabled, title, isRequired, ...props}) {\n  const inputProps = mapPropsToAttributes(props, attributeMap, TextAreaInput.defaultProps);\n  return (\n    <FinalTextArea\n      id={htmlId}\n      name={htmlName}\n      {...inputProps}\n      disabled={disabled}\n      required={isRequired}\n      style={{resize: 'none'}}\n    />\n  );\n}\n\nTextAreaInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  numberOfRows: PropTypes.number,\n  title: PropTypes.string.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n};\n\nTextAreaInput.defaultProps = {\n  disabled: false,\n  numberOfRows: 2,\n};\n\nexport function TextAreaSettings() {\n  return (\n    <Form.Group widths=\"equal\">\n      <FinalInput\n        name=\"numberOfRows\"\n        type=\"number\"\n        label={Translate.string('Rows')}\n        placeholder={String(TextAreaInput.defaultProps.numberOfRows)}\n        step=\"1\"\n        min=\"1\"\n        max=\"20\"\n        validate={v.optional(v.range(1, 20))}\n        fluid\n      />\n    </Form.Group>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Form} from 'semantic-ui-react';\n\nimport {FinalInput, validators as v} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\n\nimport {mapPropsToAttributes} from './util';\n\nimport '../../../styles/regform.module.scss';\n\nconst attributeMap = {minLength: 'minLength', maxLength: 'maxLength'};\n\nexport default function TextInput({htmlId, htmlName, disabled, title, isRequired, ...props}) {\n  const inputProps = mapPropsToAttributes(props, attributeMap, TextInput.defaultProps);\n  return (\n    <FinalInput\n      id={htmlId}\n      type=\"text\"\n      name={htmlName}\n      {...inputProps}\n      required={isRequired}\n      disabled={disabled}\n    />\n  );\n}\n\nTextInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  disabled: PropTypes.bool,\n  title: PropTypes.string.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  minLength: PropTypes.number,\n  maxLength: PropTypes.number,\n};\n\nTextInput.defaultProps = {\n  disabled: false,\n  minLength: 0,\n  maxLength: 0,\n};\n\nexport function TextSettings() {\n  return (\n    <Form.Group widths=\"equal\">\n      <FinalInput\n        name=\"minLength\"\n        type=\"number\"\n        label={Translate.string('Min. length')}\n        placeholder={String(TextInput.defaultProps.minLength)}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(\n          v.chain(val => {\n            if (val === 0) {\n              return v.STOP_VALIDATION;\n            } else if (val === 1) {\n              return Translate.string(\n                'If you want to make the field required, select the \"Required field\" checkbox. The minimum length only applies if the field is not empty.'\n              );\n            }\n          }, v.min(2))\n        )}\n        format={val => val || ''}\n        parse={val => +val || 0}\n        fluid\n      />\n      <FinalInput\n        name=\"maxLength\"\n        type=\"number\"\n        label={Translate.string('Max. length')}\n        placeholder={Translate.string('No maximum')}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(v.min(0))}\n        format={val => val || ''}\n        parse={val => +val || 0}\n        fluid\n      />\n    </Form.Group>\n  );\n}\n\nexport function textSettingsFormValidator({minLength, maxLength}) {\n  if (minLength && maxLength && minLength > maxLength) {\n    const msg = Translate.string('The minimum length cannot be greater than the maximum length.');\n    return {\n      minLength: msg,\n      maxLength: msg,\n    };\n  }\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport sessionBlocksURL from 'indico-url:event_registration.api_session_blocks';\n\nimport _ from 'lodash';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport React, {useEffect, useMemo, useState} from 'react';\nimport {useSelector} from 'react-redux';\nimport {Checkbox, Form, Accordion, AccordionTitle, AccordionContent, Icon} from 'semantic-ui-react';\n\nimport {FinalCheckbox, FinalField, FinalInput, validators as v} from 'indico/react/forms';\nimport {useIndicoAxios} from 'indico/react/hooks';\nimport {Translate, Param, Plural, PluralTranslate, Singular} from 'indico/react/i18n';\n\nimport {getManagement} from '../../form_submission/selectors';\nimport {getStaticData} from '../selectors';\n\nimport '../../../styles/regform.module.scss';\n\nconst sessionDataSchema = PropTypes.arrayOf(\n  PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    fullTitle: PropTypes.string.isRequired,\n    time: PropTypes.string.isRequired,\n  })\n);\n\nfunction TimetableSessionsComponent({\n  value,\n  name,\n  sessionData,\n  onChange: _onChange,\n  onFocus,\n  onBlur,\n  collapseDays,\n  minimum,\n  maximum,\n  ...props\n}) {\n  const [expandedHeaders, setExpandedHeaders] = useState({});\n\n  useEffect(() => {\n    setExpandedHeaders(\n      Object.fromEntries(Object.keys(sessionData || {}).map(date => [date, !collapseDays]))\n    );\n  }, [sessionData, collapseDays]);\n\n  const validBlockIds = useMemo(() => {\n    if (!sessionData) {\n      return [];\n    }\n    return new Set(\n      Object.values(sessionData)\n        .flat()\n        .map(x => x.id)\n    );\n  }, [sessionData]);\n\n  const markTouched = () => {\n    onFocus();\n    onBlur();\n  };\n\n  const onChange = val => {\n    // remove any invalid IDs (deleted session blocks)\n    _onChange(val.filter(x => validBlockIds.has(x)));\n  };\n\n  const handleValueChange = (e, data) => {\n    markTouched();\n    const id = data.value;\n    const newValue = _.xor(value, [id]);\n    onChange(newValue);\n  };\n\n  const handleHeaderClick = date => () => {\n    setExpandedHeaders({...expandedHeaders, [date]: !expandedHeaders[date]});\n  };\n\n  return (\n    <Form.Group styleName=\"timetablesessions-field\">\n      <Accordion styled exclusive={false}>\n        {sessionData &&\n          Object.keys(sessionData).map((date, index) => (\n            <SessionBlockHeader\n              value={value}\n              index={index}\n              name={name}\n              data={sessionData[date]}\n              label={moment(date).format('dddd ll')}\n              isExpanded={expandedHeaders[date] ?? false}\n              key={date}\n              handleValueChange={handleValueChange}\n              onChange={onChange}\n              onClick={handleHeaderClick(date)}\n              props={props}\n            />\n          ))}\n      </Accordion>\n    </Form.Group>\n  );\n}\n\nTimetableSessionsComponent.propTypes = {\n  value: PropTypes.arrayOf(PropTypes.number).isRequired,\n  name: PropTypes.string.isRequired,\n  sessionData: PropTypes.objectOf(sessionDataSchema),\n  onChange: PropTypes.func.isRequired,\n  onFocus: PropTypes.func.isRequired,\n  onBlur: PropTypes.func.isRequired,\n  collapseDays: PropTypes.bool.isRequired,\n  maximum: PropTypes.number.isRequired,\n  minimum: PropTypes.number.isRequired,\n};\n\nTimetableSessionsComponent.defaultProps = {\n  sessionData: {},\n};\n\nfunction SessionBlockHeader({\n  value,\n  index,\n  data,\n  label,\n  isExpanded,\n  handleValueChange,\n  onChange,\n  onClick,\n}) {\n  const childrenIds = data.map(x => x.id);\n  const isAllChecked = childrenIds.every(id => value.includes(id));\n  const isAnyChecked = childrenIds.some(id => value.includes(id));\n  const selectedBlocks = value.filter(element => childrenIds.includes(element)).length;\n\n  function handleHeaderChange(evt) {\n    evt.stopPropagation();\n    const newValue =\n      isAllChecked || isAnyChecked\n        ? value.filter(element => !childrenIds.includes(element))\n        : [...value, ...childrenIds];\n    onChange(newValue);\n  }\n\n  return (\n    <>\n      <AccordionTitle active={isExpanded} index={index} onClick={onClick}>\n        <Icon name=\"dropdown\" />\n        <Checkbox\n          checked={isAllChecked}\n          onChange={handleHeaderChange}\n          indeterminate={isAnyChecked && !isAllChecked}\n          label={label}\n        />\n        <span>\n          (\n          <PluralTranslate count={selectedBlocks}>\n            <Singular>\n              <Param name=\"selectedBlocks\" value={selectedBlocks} /> block selected)\n            </Singular>\n            <Plural>\n              <Param name=\"selectedBlocks\" value={selectedBlocks} /> blocks selected)\n            </Plural>\n          </PluralTranslate>\n        </span>\n      </AccordionTitle>\n      <AccordionContent active={isExpanded}>\n        {data.map(({time, fullTitle, id}) => (\n          <dd className=\"grouped-fields\" key={id}>\n            <Checkbox\n              value={id}\n              onChange={handleValueChange}\n              checked={value.includes(id)}\n              label={`${time} - ${fullTitle}`}\n            />\n          </dd>\n        ))}\n      </AccordionContent>\n    </>\n  );\n}\n\nSessionBlockHeader.propTypes = {\n  value: PropTypes.arrayOf(PropTypes.number).isRequired,\n  index: PropTypes.number.isRequired,\n  data: sessionDataSchema.isRequired,\n  label: PropTypes.string.isRequired,\n  isExpanded: PropTypes.bool.isRequired,\n  handleValueChange: PropTypes.func.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default function TimetableSessionsInput({\n  htmlId,\n  htmlName,\n  disabled,\n  isRequired,\n  collapseDays,\n  minimum,\n  maximum,\n}) {\n  const {eventId} = useSelector(getStaticData);\n  const management = useSelector(getManagement);\n  const {data: sessionData} = useIndicoAxios(\n    {url: sessionBlocksURL({event_id: eventId, force_event_tz: management})},\n    {camelize: true}\n  );\n\n  const minMsg = PluralTranslate.string(\n    'Please select at least {minimum} session block',\n    'Please select at least {minimum} session blocks',\n    minimum,\n    {minimum}\n  );\n  const maxMsg = PluralTranslate.string(\n    'Please select no more than {maximum} session block',\n    'Please select no more than {maximum} session blocks',\n    maximum,\n    {maximum}\n  );\n\n  return (\n    <FinalField\n      id={htmlId}\n      name={htmlName}\n      component={TimetableSessionsComponent}\n      disabled={disabled}\n      required={isRequired}\n      collapseDays={collapseDays}\n      minimum={minimum}\n      maximum={maximum}\n      sessionData={sessionData}\n      validate={value => {\n        if (minimum !== 0 && value.length < minimum) {\n          return minMsg;\n        } else if (maximum !== 0 && value.length > maximum) {\n          return maxMsg;\n        }\n      }}\n    />\n  );\n}\n\nTimetableSessionsInput.propTypes = {\n  htmlId: PropTypes.string.isRequired,\n  htmlName: PropTypes.string.isRequired,\n  isRequired: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool,\n  collapseDays: PropTypes.bool,\n  minimum: PropTypes.number,\n  maximum: PropTypes.number,\n};\n\nTimetableSessionsInput.defaultProps = {\n  disabled: false,\n  collapseDays: false,\n  minimum: 0,\n  maximum: 0,\n};\n\nexport function TimetableSessionsSettings() {\n  return (\n    <>\n      <FinalCheckbox name=\"collapseDays\" label={Translate.string('Collapse days')} toggle />\n      <FinalInput\n        name=\"minimum\"\n        type=\"number\"\n        label={Translate.string('Minimum number of choices')}\n        placeholder={Translate.string('No minimum')}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(v.min(0))}\n        format={val => val || ''}\n        parse={val => +val || 0}\n        fluid\n      />\n      <FinalInput\n        name=\"maximum\"\n        type=\"number\"\n        label={Translate.string('Maximum number of choices')}\n        placeholder={Translate.string('No maximum')}\n        step=\"1\"\n        min=\"0\"\n        validate={v.optional(v.min(0))}\n        format={val => val || ''}\n        parse={val => +val || 0}\n        fluid\n      />\n    </>\n  );\n}\n\nexport const timetableSessionsSettingsInitialData = {\n  collapse_days: false,\n  minimum: 0,\n  maximum: 0,\n};\n\nexport function sessionsSettingsFormValidator({minimum, maximum}) {\n  if (minimum && maximum && minimum > maximum) {\n    const msg = Translate.string('The minimum value cannot be greater than the maximum value.');\n    return {\n      minimum: msg,\n      maximum: msg,\n    };\n  }\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport {Translate} from 'indico/react/i18n';\nimport {getPluginObjects} from 'indico/utils/plugins';\n\nimport AccommodationInput, {\n  AccommodationSettings,\n  accommodationSettingsInitialData,\n  accommodationSettingsFormValidator,\n} from './AccommodationInput';\nimport AccompanyingPersonsInput, {\n  AccompanyingPersonsSettings,\n  accompanyingPersonsSettingsInitialData,\n} from './AccompanyingPersonsInput';\nimport BooleanInput, {BooleanSettings} from './BooleanInput';\nimport CheckboxInput, {CheckboxSettings} from './CheckboxInput';\nimport {choiceFieldsSettingsFormDecorator} from './ChoicesSetup';\nimport CountryInput, {CountrySettings} from './CountryInput';\nimport DateInput, {\n  DateSettings,\n  dateSettingsFormDecorator,\n  dateSettingsInitialData,\n} from './DateInput';\nimport EmailInput from './EmailInput';\nimport FileInput from './FileInput';\nimport LabelInput from './LabelInput';\nimport MultiChoiceInput, {\n  MultiChoiceSettings,\n  multiChoiceSettingsInitialData,\n} from './MultiChoiceInput';\nimport NumberInput, {NumberSettings, numberSettingsFormValidator} from './NumberInput';\nimport PhoneInput from './PhoneInput';\nimport PictureInput, {PictureSettings} from './PictureInput';\nimport SingleChoiceInput, {\n  SingleChoiceSettings,\n  singleChoiceSettingsFormDecorator,\n  singleChoiceSettingsInitialData,\n} from './SingleChoiceInput';\nimport TextAreaInput, {TextAreaSettings} from './TextAreaInput';\nimport TextInput, {TextSettings, textSettingsFormValidator} from './TextInput';\nimport TimetableSessionsInput, {\n  TimetableSessionsSettings,\n  timetableSessionsSettingsInitialData,\n  sessionsSettingsFormValidator,\n} from './TimetableSessions';\n\n/*\nAvailable keys:\n- title: required; used to show the field type when adding a new field\n- icon: required; used in the add field dropdown (this uses an indico icon, not a SUI icon)\n- inputComponent: required; the component used to render the field\n- settingsComponent: optional; used if the field has custom settings\n- settingsModalSize: optional; used if the field has settings which benefit\n  from a larger modal size than \"tiny\"\n- settingsFormDecorators: optional; the final-form decorators to apply to the\n  settings form\n- settingsFormValidator: optional, a function for final-form's form-level validation\n- settingsFormInitialData: optional; initial data to use when creating a new\n  field in case some of the settings need to be initialized. if it's a callable, the\n  staticData from the state will be passed to it\n- noLabel: optional; render the field without a label on the left\n- noRequired: optional; hide the option to make the field required\n- alwaysRequired: optional; always display the field as required\n- hasPrice: optional; show price field if the whole field can have a price attached\n- noRetentionPeriod: optional; hide the retention period setting\n- renderAsFieldset: optional; whether the field should be rendered in a fieldset; applies\n  to fields that use multiple controls, like radios, checkboxes, multi-button controls\n*/\n\nconst fieldRegistry = {\n  label: {\n    title: Translate.string('Label'),\n    inputComponent: LabelInput,\n    noRequired: true,\n    noRetentionPeriod: true,\n    noLabel: true,\n    icon: 'tag',\n    customFormItem: true,\n  },\n  text: {\n    title: Translate.string('Text field'),\n    inputComponent: TextInput,\n    settingsComponent: TextSettings,\n    settingsFormValidator: textSettingsFormValidator,\n    icon: 'textfield',\n  },\n  textarea: {\n    title: Translate.string('Text area'),\n    inputComponent: TextAreaInput,\n    settingsComponent: TextAreaSettings,\n    icon: 'textarea',\n  },\n  number: {\n    title: Translate.string('Number'),\n    inputComponent: NumberInput,\n    settingsComponent: NumberSettings,\n    settingsFormValidator: numberSettingsFormValidator,\n    hasPrice: true,\n    icon: 'seven-segment9',\n  },\n  checkbox: {\n    title: Translate.string('Checkbox'),\n    inputComponent: CheckboxInput,\n    settingsComponent: CheckboxSettings,\n    noLabel: true,\n    hasPrice: true,\n    icon: 'checkbox-checked',\n    customFormItem: true,\n  },\n  date: {\n    title: Translate.string('Date'),\n    inputComponent: DateInput,\n    settingsComponent: DateSettings,\n    settingsFormDecorators: [dateSettingsFormDecorator],\n    settingsFormInitialData: dateSettingsInitialData,\n    icon: 'calendar',\n  },\n  bool: {\n    title: Translate.string('Yes/No'),\n    inputComponent: BooleanInput,\n    settingsComponent: BooleanSettings,\n    hasPrice: true,\n    icon: 'switchon',\n    renderAsFieldset: true,\n  },\n  phone: {\n    title: Translate.string('Phone'),\n    inputComponent: PhoneInput,\n    icon: 'phone',\n  },\n  country: {\n    title: Translate.string('Country'),\n    inputComponent: CountryInput,\n    settingsComponent: CountrySettings,\n    icon: 'earth',\n  },\n  file: {\n    title: Translate.string('File'),\n    inputComponent: FileInput,\n    icon: 'upload',\n    renderAsFieldset: true,\n  },\n  email: {\n    title: Translate.string('Email'),\n    inputComponent: EmailInput,\n    icon: 'mail',\n  },\n  single_choice: {\n    title: Translate.string('Single Choice'),\n    inputComponent: SingleChoiceInput,\n    settingsComponent: SingleChoiceSettings,\n    settingsModalSize: 'small',\n    settingsFormDecorators: [choiceFieldsSettingsFormDecorator, singleChoiceSettingsFormDecorator],\n    settingsFormInitialData: singleChoiceSettingsInitialData,\n    icon: 'dropmenu',\n    renderAsFieldset: true,\n  },\n  multi_choice: {\n    title: Translate.string('Multiple Choice'),\n    inputComponent: MultiChoiceInput,\n    settingsComponent: MultiChoiceSettings,\n    settingsModalSize: 'small',\n    settingsFormDecorators: [choiceFieldsSettingsFormDecorator],\n    settingsFormInitialData: multiChoiceSettingsInitialData,\n    icon: 'list',\n    renderAsFieldset: true,\n  },\n  accommodation: {\n    title: Translate.string('Accommodation'),\n    inputComponent: AccommodationInput,\n    settingsComponent: AccommodationSettings,\n    settingsModalSize: 'small',\n    settingsFormDecorators: [choiceFieldsSettingsFormDecorator],\n    settingsFormInitialData: accommodationSettingsInitialData,\n    settingsFormValidator: accommodationSettingsFormValidator,\n    noRequired: true,\n    alwaysRequired: true,\n    icon: 'home',\n    renderAsFieldset: true,\n  },\n  accompanying_persons: {\n    title: Translate.string('Accompanying Persons'),\n    inputComponent: AccompanyingPersonsInput,\n    settingsComponent: AccompanyingPersonsSettings,\n    settingsFormInitialData: accompanyingPersonsSettingsInitialData,\n    settingsModalSize: 'tiny',\n    noRequired: true,\n    hasPrice: true,\n    icon: 'user',\n    renderAsFieldset: true,\n  },\n  picture: {\n    title: Translate.string('Picture'),\n    inputComponent: PictureInput,\n    icon: 'image',\n    settingsComponent: PictureSettings,\n  },\n  sessions: {\n    title: Translate.string('Timetable Sessions'),\n    inputComponent: TimetableSessionsInput,\n    settingsComponent: TimetableSessionsSettings,\n    settingsFormInitialData: timetableSessionsSettingsInitialData,\n    settingsFormValidator: sessionsSettingsFormValidator,\n    noRequired: true,\n    hasPrice: false,\n    icon: 'calendar-day',\n    renderAsFieldset: true,\n  },\n};\n\nexport function getFieldRegistry() {\n  const pluginFields = Object.fromEntries(\n    getPluginObjects('regformCustomFields').map(({name, ...rest}) => [name, rest])\n  );\n  if (\n    Object.entries(pluginFields).some(\n      ([name, data]) =>\n        !name.startsWith('ext__') && !(data.unsafeOverrideField && fieldRegistry[name])\n    )\n  ) {\n    throw new Error(\n      'Field names from plugins must begin with `ext__` or match an existing field name and set ' +\n        'the `unsafeOverrideField` property to true'\n    );\n  }\n  return {...fieldRegistry, ...pluginFields};\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useSelector} from 'react-redux';\nimport {Form, Icon, Popup} from 'semantic-ui-react';\n\nimport {PluralTranslate, Translate} from 'indico/react/i18n';\nimport {Markdown, toClasses} from 'indico/react/util';\nimport {renderPluginComponents} from 'indico/utils/plugins';\n\nimport {getManagement, getUpdateMode, isPaidItemLocked} from '../form_submission/selectors';\n\nimport {getFieldRegistry} from './fields/registry';\n\nimport '../../styles/regform.module.scss';\n\nfunction PaidItemLocked({management}) {\n  const lockedMsg = (\n    <Translate>This field is locked since changing it could trigger a price change.</Translate>\n  );\n  const msg = !management ? (\n    lockedMsg\n  ) : (\n    <>\n      {lockedMsg} <Translate>As a manager you can modify it nonetheless.</Translate>\n    </>\n  );\n\n  return <Popup trigger={<Icon name={management ? 'lock open' : 'lock'} />}>{msg}</Popup>;\n}\n\nPaidItemLocked.propTypes = {\n  management: PropTypes.bool.isRequired,\n};\n\nfunction PurgedItemLocked({isUpdateMode}) {\n  const purgedMsg = <Translate>This field is locked due to an expired retention period.</Translate>;\n  const msg = !isUpdateMode ? (\n    purgedMsg\n  ) : (\n    <>\n      {purgedMsg} <Translate>The associated registration data has been deleted.</Translate>\n    </>\n  );\n  return <Popup trigger={<Icon name=\"lock\" />}>{msg}</Popup>;\n}\n\nPurgedItemLocked.propTypes = {\n  isUpdateMode: PropTypes.bool.isRequired,\n};\n\nfunction ItemLocked({reason}) {\n  return <Popup trigger={<Icon name=\"lock\" />}>{reason}</Popup>;\n}\n\nItemLocked.propTypes = {\n  reason: PropTypes.string.isRequired,\n};\n\nexport default function FormItem({\n  id,\n  title,\n  description,\n  retentionPeriod,\n  inputType,\n  isEnabled,\n  isRequired,\n  isPurged,\n  lockedReason,\n  sortHandle,\n  setupMode,\n  setupActions,\n  ...rest\n}) {\n  // TODO move outside like with setupActions etc?\n  const paidItemLocked = useSelector(state => isPaidItemLocked(state, id));\n  const isManagement = useSelector(getManagement);\n  const isUpdateMode = useSelector(getUpdateMode);\n\n  const fieldRegistry = getFieldRegistry();\n  const meta = fieldRegistry[inputType] || {};\n  const InputComponent = meta.inputComponent;\n  const inputProps = {title, description, isEnabled, fieldId: id, ...rest};\n  const showPurged = !setupMode && isPurged;\n  const disabled = !isEnabled || showPurged || !!lockedReason || (paidItemLocked && !isManagement);\n\n  let retentionPeriodIcon = null;\n  if (setupMode && retentionPeriod) {\n    retentionPeriodIcon = (\n      <Icon\n        name=\"clock outline\"\n        color=\"red\"\n        style={{marginLeft: '3px'}}\n        title={PluralTranslate.string(\n          'Field data will be purged {retentionPeriod} week after the event ended.',\n          'Field data will be purged {retentionPeriod} weeks after the event ended.',\n          retentionPeriod,\n          {retentionPeriod}\n        )}\n      />\n    );\n  }\n\n  const showAsRequired = meta.alwaysRequired || isRequired;\n  const inputRequired = !isManagement && showAsRequired;\n  const htmlId = `input-${inputProps.fieldId}`;\n\n  const fieldControls =\n    InputComponent && !meta.customFormItem ? (\n      <>\n        {retentionPeriodIcon}\n        <InputComponent\n          isRequired={inputRequired}\n          disabled={disabled}\n          isPurged={showPurged}\n          htmlId={htmlId}\n          {...inputProps}\n        />\n      </>\n    ) : null;\n\n  return (\n    <div\n      styleName={`form-item ${toClasses({\n        'disabled': !isEnabled || paidItemLocked,\n        'purged-disabled': showPurged,\n        'paid-disabled': !showPurged && paidItemLocked,\n        'editable': setupMode,\n      })}`}\n    >\n      {sortHandle}\n      <div styleName=\"content\">\n        {InputComponent ? (\n          meta.customFormItem ? (\n            <InputComponent\n              showAsRequired={showAsRequired}\n              isRequired={inputRequired}\n              disabled={disabled}\n              isPurged={showPurged}\n              retentionPeriodIcon={retentionPeriodIcon}\n              htmlId={htmlId}\n              {...inputProps}\n            />\n          ) : (\n            <Form.Field required={showAsRequired} styleName=\"field\">\n              {meta.renderAsFieldset ? (\n                <fieldset>\n                  <legend style={{opacity: disabled ? 0.8 : 1, display: 'inline-block'}}>\n                    {title}\n                  </legend>\n                  {fieldControls}\n                </fieldset>\n              ) : (\n                <>\n                  <label\n                    htmlFor={htmlId}\n                    style={{opacity: disabled ? 0.8 : 1, display: 'inline-block'}}\n                  >\n                    {title}\n                  </label>\n                  {fieldControls}\n                </>\n              )}\n            </Form.Field>\n          )\n        ) : (\n          `Unknown input type: ${inputType}`\n        )}\n        {description && (\n          <div styleName=\"description\">\n            <Markdown>{description}</Markdown>\n          </div>\n        )}\n        {renderPluginComponents(`regform-${inputType}-field-item`, inputProps)}\n      </div>\n      {setupActions && <div styleName=\"actions\">{setupActions}</div>}\n      {lockedReason && <ItemLocked reason={lockedReason} />}\n      {!lockedReason && showPurged && <PurgedItemLocked isUpdateMode={isUpdateMode} />}\n      {!lockedReason && !showPurged && paidItemLocked && (\n        <PaidItemLocked management={isManagement} />\n      )}\n    </div>\n  );\n}\n\nFormItem.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n  position: PropTypes.number.isRequired,\n  /** Whether the field is required during registration */\n  isRequired: PropTypes.bool,\n  /** Whether the field's registration data have been deleted due to an expired retention period */\n  isPurged: PropTypes.bool.isRequired,\n  /** If the field is locked for some external reason, the reason for it */\n  lockedReason: PropTypes.string,\n  /** The retention period of the field's data in weeks */\n  retentionPeriod: PropTypes.number,\n  /** Whether the field is a special \"personal data\" field */\n  fieldIsPersonalData: PropTypes.bool,\n  /** Whether the field cannot be disabled */\n  fieldIsRequired: PropTypes.bool,\n  /** The HTML input name of the field (empty in case of static text) */\n  htmlName: PropTypes.string,\n  /** The widget type of the field */\n  inputType: PropTypes.string.isRequired,\n  /** The handle to sort the section during setup */\n  sortHandle: PropTypes.node,\n  /** Whether the field is being shown during form setup */\n  setupMode: PropTypes.bool,\n  /** Actions available during form setup */\n  setupActions: PropTypes.node,\n  // ... and various other field-specific keys (billing, limited-places, other config)\n};\n\nFormItem.defaultProps = {\n  fieldIsPersonalData: false,\n  fieldIsRequired: false,\n  isRequired: false,\n  lockedReason: '',\n  retentionPeriod: null,\n  htmlName: null,\n  sortHandle: null,\n  setupMode: false,\n  setupActions: null,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Form, Popup} from 'semantic-ui-react';\n\nimport {Translate} from 'indico/react/i18n';\nimport {Markdown} from 'indico/react/util';\n\nimport FormItem from './FormItem';\n\nimport '../../styles/regform.module.scss';\n\nexport default function FormSection({\n  title,\n  description,\n  isManagerOnly,\n  items,\n  sortHandle,\n  itemComponent: ItemComponent,\n  itemProps,\n  setupMode,\n  setupActions,\n}) {\n  const enabledFields = items.filter(item => item.isEnabled);\n  const disabledFields = setupMode ? items.filter(item => !item.isEnabled) : [];\n\n  const managerPopup = (\n    <Popup\n      content={Translate.string('This section is only visible to managers.')}\n      trigger={<i className=\"icon-user-reading\" style={{marginRight: 5}} />}\n    />\n  );\n\n  return (\n    <div className=\"regform-section\" styleName={isManagerOnly ? 'manager-only' : null}>\n      <div className=\"i-box-header\">\n        {sortHandle}\n        <div styleName=\"header-wrapper\">\n          <div className=\"i-box-title\">\n            {isManagerOnly ? managerPopup : null}\n            {title}\n          </div>\n          <div className=\"i-box-description\">\n            <Markdown>{description}</Markdown>\n          </div>\n        </div>\n        {setupActions && (\n          <div className=\"i-box-buttons\" styleName=\"section-actions\">\n            {setupActions}\n          </div>\n        )}\n      </div>\n      <Form as=\"div\" className=\"i-box-content\">\n        {enabledFields.map((item, index) => (\n          <ItemComponent\n            key={item.id}\n            index={index}\n            setupMode={setupMode}\n            {...itemProps}\n            {...item}\n          />\n        ))}\n        {disabledFields.length > 0 && (\n          <>\n            <div className=\"titled-rule section-field-divisor\">\n              <Translate>Disabled fields</Translate>{' '}\n              <i\n                className=\"info-helper\"\n                title={Translate.string(\"These fields won't be displayed to registrants\")}\n              />\n            </div>\n            {disabledFields.map((item, index) => (\n              <ItemComponent\n                key={item.id}\n                index={index}\n                setupMode={setupMode}\n                {...itemProps}\n                {...item}\n              />\n            ))}\n          </>\n        )}\n      </Form>\n    </div>\n  );\n}\n\nFormSection.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  description: PropTypes.string.isRequired,\n  enabled: PropTypes.bool.isRequired,\n  position: PropTypes.number.isRequired,\n  /** Whether the section is a special \"manager only\" section */\n  isManagerOnly: PropTypes.bool.isRequired,\n  /** Whether the section is the special \"personal data\" section */\n  isPersonalData: PropTypes.bool.isRequired,\n  /** The form items in the section */\n  items: PropTypes.arrayOf(PropTypes.shape(FormItem.propTypes)).isRequired,\n  /** The handle to sort the section during setup */\n  sortHandle: PropTypes.node,\n  /** The react component to render individual form items */\n  itemComponent: PropTypes.elementType,\n  /** Additional props passed to each item component */\n  itemProps: PropTypes.object,\n  /** Whether the registration form is currently being set up */\n  setupMode: PropTypes.bool,\n  /** Actions available during form setup */\n  setupActions: PropTypes.node,\n};\n\nFormSection.defaultProps = {\n  setupMode: false,\n  setupActions: null,\n  sortHandle: null,\n  itemComponent: FormItem,\n  itemProps: {},\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Dropdown} from 'semantic-ui-react';\n\nimport {Translate} from 'indico/react/i18n';\n\nimport {getFieldRegistry} from '../form/fields/registry';\n\nimport '../../styles/regform.module.scss';\n\nexport default function ItemTypeDropdown({newItemType, inModal, onClick}) {\n  const fieldRegistry = getFieldRegistry();\n  const dropdownText = newItemType\n    ? fieldRegistry[newItemType].title\n    : Translate.string('Choose type');\n\n  let extraProps;\n  if (inModal) {\n    extraProps = {\n      icon: 'dropdown',\n      text: dropdownText,\n    };\n  } else {\n    extraProps = {\n      icon: null,\n      className: 'hide-if-locked',\n      trigger: <a className=\"icon-plus\" title={Translate.string('Add field')} />,\n    };\n  }\n\n  const newItemTypeOptions = Object.entries(fieldRegistry)\n    .filter(([name]) => name !== 'label')\n    .map(([name, {title, icon}]) => ({\n      key: name,\n      value: name,\n      text: title,\n      icon,\n    }));\n  const middle = Math.ceil(newItemTypeOptions.length / 2);\n\n  return (\n    <Dropdown selectOnNavigation={false} selectOnBlur={false} value={newItemType} {...extraProps}>\n      <Dropdown.Menu>\n        <DropdownItem\n          value=\"label\"\n          text={fieldRegistry.label.title}\n          icon={fieldRegistry.label.icon}\n          centered\n          onClick={onClick}\n        />\n        <Dropdown.Divider style={{margin: 0}} />\n        <div styleName=\"dropdown-menu\">\n          <div>\n            {newItemTypeOptions.slice(0, middle).map(({key, ...rest}) => (\n              <DropdownItem key={key} onClick={onClick} {...rest} />\n            ))}\n          </div>\n          <div>\n            {newItemTypeOptions.slice(middle).map(({key, ...rest}) => (\n              <DropdownItem key={key} onClick={onClick} {...rest} />\n            ))}\n          </div>\n        </div>\n      </Dropdown.Menu>\n    </Dropdown>\n  );\n}\n\nItemTypeDropdown.propTypes = {\n  newItemType: PropTypes.string,\n  inModal: PropTypes.bool.isRequired,\n  onClick: PropTypes.func.isRequired,\n};\n\nItemTypeDropdown.defaultProps = {\n  newItemType: null,\n};\n\nfunction DropdownItem({value, text, icon, centered, onClick}) {\n  return (\n    <div\n      styleName=\"dropdown-item\"\n      style={centered ? {textAlign: 'center'} : null}\n      onClick={() => onClick(value)}\n    >\n      <i className={`icon-${icon}`} />\n      <span>{text}</span>\n    </div>\n  );\n}\n\nDropdownItem.propTypes = {\n  value: PropTypes.string.isRequired,\n  text: PropTypes.string.isRequired,\n  icon: PropTypes.string.isRequired,\n  centered: PropTypes.bool,\n  onClick: PropTypes.func.isRequired,\n};\n\nDropdownItem.defaultProps = {\n  centered: false,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {FormSpy} from 'react-final-form';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {Icon, Message} from 'semantic-ui-react';\n\nimport {\n  FinalCheckbox,\n  FinalInput,\n  FinalTextArea,\n  getValuesForFields,\n  validators as v,\n  parsers as p,\n} from 'indico/react/forms';\nimport {Fieldset} from 'indico/react/forms/fields';\nimport {FinalModalForm} from 'indico/react/forms/final-form';\nimport {Translate, Param} from 'indico/react/i18n';\nimport {renderPluginComponents} from 'indico/utils/plugins';\n\nimport {getFieldRegistry} from '../form/fields/registry';\nimport {getStaticData, getItemById} from '../form/selectors';\n\nimport * as actions from './actions';\nimport ItemTypeDropdown from './ItemTypeDropdown';\n\nconst EMPTY_DATA = {}; // avoid new object on every selector call since this triggers a warning\n\nexport default function ItemSettingsModal({id, sectionId, defaultNewItemType, onClose}) {\n  const dispatch = useDispatch();\n  const [newItemType, setNewItemType] = useState(defaultNewItemType);\n  const editing = id !== null;\n  const staticData = useSelector(getStaticData);\n  const {inputType: existingInputType, fieldIsRequired, ...itemData} = useSelector(state =>\n    editing ? getItemById(state, id) : EMPTY_DATA\n  );\n  const inputType = editing ? existingInputType : newItemType;\n  const fieldRegistry = getFieldRegistry();\n  const isUnsupportedField = !(inputType in fieldRegistry);\n  const meta = fieldRegistry[inputType] || {};\n  const SettingsComponent = meta.settingsComponent;\n\n  const handleSubmit = async (formData, form) => {\n    const data = getValuesForFields(formData, form);\n    const action = editing\n      ? actions.updateItem(id, data)\n      : actions.createItem(sectionId, inputType, data);\n    const rv = await dispatch(action);\n    if (rv.error) {\n      return rv.error;\n    }\n    onClose();\n  };\n\n  let initialValues = itemData;\n  if (!editing) {\n    initialValues = _.isFunction(meta.settingsFormInitialData)\n      ? meta.settingsFormInitialData(staticData)\n      : meta.settingsFormInitialData;\n    if (meta.hasPrice) {\n      initialValues = {...(initialValues || {}), price: 0};\n    }\n  }\n\n  const handleChangeItemType = (dirty, value) => {\n    if (\n      newItemType &&\n      dirty &&\n      // eslint-disable-next-line no-alert\n      !confirm('Changing the type will reset this form.')\n    ) {\n      return;\n    }\n    // this will force the FinalModalForm to re-render, so we do not need to\n    // explicitly `restart()` the form\n    setNewItemType(value);\n  };\n\n  return (\n    <FinalModalForm\n      // force re-render since we may need to change form decorators and initial values\n      key={editing ? 'edit' : `new-${newItemType}`}\n      id=\"regform-item-settings\"\n      onSubmit={handleSubmit}\n      onClose={onClose}\n      initialValues={initialValues}\n      initialValuesEqual={_.isEqual}\n      unloadPrompt\n      size={meta.settingsModalSize || 'tiny'}\n      decorators={meta.settingsFormDecorators ? meta.settingsFormDecorators : undefined}\n      validate={meta.settingsFormValidator}\n      header={\n        editing ? (\n          <Translate>\n            Configure field \"<Param name=\"section\" value={itemData.title} />\"\n          </Translate>\n        ) : (\n          <>\n            <Translate>Add new field</Translate>\n            <div style={{float: 'right'}}>\n              <FormSpy subscription={{dirty: true}}>\n                {({dirty}) => (\n                  <ItemTypeDropdown\n                    newItemType={newItemType}\n                    inModal\n                    onClick={value => handleChangeItemType(dirty, value)}\n                  />\n                )}\n              </FormSpy>\n            </div>\n          </>\n        )\n      }\n    >\n      {!editing && !newItemType ? (\n        <Message info>\n          <Translate>Please choose a field type.</Translate>\n        </Message>\n      ) : (\n        <>\n          <FinalInput name=\"title\" label={Translate.string('Title')} required autoFocus />\n          <FinalTextArea\n            name=\"description\"\n            label={Translate.string('Description')}\n            description={<Translate>You can use Markdown or basic HTML formatting tags.</Translate>}\n          />\n          {meta.hasPrice && (\n            <FinalInput\n              name=\"price\"\n              type=\"number\"\n              min=\"0\"\n              step=\"0.01\"\n              validate={v.min(0)}\n              parse={val => p.number(val, true, 0)}\n              label={Translate.string('Price')}\n            />\n          )}\n          {!meta.noRequired && (\n            <FinalCheckbox\n              name=\"isRequired\"\n              label={Translate.string('Required field')}\n              disabled={fieldIsRequired}\n            />\n          )}\n          {SettingsComponent && <SettingsComponent {...itemData} />}\n          {renderPluginComponents(`regform-${inputType}-field-settings`, {...itemData})}\n          {!meta.noRetentionPeriod && !fieldIsRequired && (\n            <Fieldset legend={Translate.string('Privacy')} compact>\n              <FinalInput\n                name=\"retentionPeriod\"\n                type=\"number\"\n                placeholder={Translate.string('Permanent')}\n                step=\"1\"\n                min=\"1\"\n                max=\"521\"\n                validate={v.optional(v.range(1, 521))}\n                label={Translate.string('Retention period (weeks)')}\n                description={Translate.string(\n                  'Specify how long user-provided data for this field will be preserved in the database.'\n                )}\n              />\n              <FormSpy subscription={{values: true}}>\n                {({values}) =>\n                  (!!values.price || values.isPriceSet) && !!values.retentionPeriod ? (\n                    <Message visible icon warning>\n                      <Icon name=\"warning\" />\n                      <Message.Content>\n                        <Translate>\n                          Please note that invoice information will be lost as well once a field's\n                          retention period expires.\n                        </Translate>\n                      </Message.Content>\n                    </Message>\n                  ) : (\n                    ''\n                  )\n                }\n              </FormSpy>\n            </Fieldset>\n          )}\n          {isUnsupportedField && (\n            <Message visible warning>\n              Unknown input type: {inputType}.<br />\n              Saving changes will most likely fail or result in some settings being lost.\n            </Message>\n          )}\n        </>\n      )}\n    </FinalModalForm>\n  );\n}\n\nItemSettingsModal.propTypes = {\n  id: PropTypes.number,\n  sectionId: PropTypes.number,\n  defaultNewItemType: PropTypes.string,\n  onClose: PropTypes.func.isRequired,\n};\n\nItemSettingsModal.defaultProps = {\n  id: null,\n  sectionId: null,\n  defaultNewItemType: null,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {useDispatch} from 'react-redux';\n\nimport {Translate} from 'indico/react/i18n';\n\nimport * as actions from './actions';\nimport ItemSettingsModal from './ItemSettingsModal';\nimport ItemTypeDropdown from './ItemTypeDropdown';\nimport SectionSettingsModal from './SectionSettingsModal';\n\nexport default function FormSectionSetupActions({id, isPersonalData}) {\n  const [settingsModalActive, setSettingsModalActive] = useState(false);\n  const [fieldModalActive, setFieldModalActive] = useState(false);\n  const [newItemType, setNewItemType] = useState(null);\n  const dispatch = useDispatch();\n\n  const handleDisableClick = () => {\n    dispatch(actions.disableSection(id));\n  };\n\n  const handleConfigureClick = () => {\n    setSettingsModalActive(true);\n  };\n\n  return (\n    <>\n      {!isPersonalData && (\n        <a\n          className=\"icon-disable hide-if-locked\"\n          title={Translate.string('Disable section')}\n          onClick={handleDisableClick}\n        />\n      )}\n      <a\n        className=\"icon-settings hide-if-locked\"\n        title={Translate.string('Configure section')}\n        onClick={handleConfigureClick}\n      />\n      <ItemTypeDropdown\n        inModal={false}\n        onClick={value => {\n          setNewItemType(value);\n          setFieldModalActive(true);\n        }}\n      />\n      {settingsModalActive && (\n        <SectionSettingsModal id={id} onClose={() => setSettingsModalActive(false)} />\n      )}\n      {fieldModalActive && (\n        <ItemSettingsModal\n          sectionId={id}\n          defaultNewItemType={newItemType}\n          onClose={() => setFieldModalActive(false)}\n        />\n      )}\n    </>\n  );\n}\n\nFormSectionSetupActions.propTypes = {\n  id: PropTypes.number.isRequired,\n  isPersonalData: PropTypes.bool.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {useDispatch} from 'react-redux';\n\nimport {RequestConfirmDelete} from 'indico/react/components';\nimport {Translate, Param} from 'indico/react/i18n';\n\nimport * as actions from './actions';\nimport ItemSettingsModal from './ItemSettingsModal';\n\nexport default function FormItemSetupActions({\n  id,\n  title,\n  fieldIsRequired,\n  fieldIsPersonalData,\n  isEnabled,\n}) {\n  const dispatch = useDispatch();\n  const [settingsModalActive, setSettingsModalActive] = useState(false);\n  const [confirmDeleteActive, setConfirmDeleteActive] = useState(false);\n\n  const handleEnableClick = () => {\n    dispatch(actions.enableItem(id));\n  };\n\n  const handleDisableClick = () => {\n    dispatch(actions.disableItem(id));\n  };\n\n  const handleRemoveClick = () => {\n    setConfirmDeleteActive(true);\n  };\n\n  const handleConfigureClick = () => {\n    setSettingsModalActive(true);\n  };\n\n  return (\n    <>\n      {!fieldIsPersonalData && (\n        <a\n          className=\"icon-remove hide-if-locked\"\n          title={Translate.string('Remove field')}\n          onClick={handleRemoveClick}\n        />\n      )}\n      {!isEnabled && (\n        <a\n          className=\"icon-checkmark hide-if-locked\"\n          title={Translate.string('Enable field')}\n          onClick={handleEnableClick}\n        />\n      )}\n      {!fieldIsRequired && isEnabled && (\n        <a\n          className=\"icon-disable hide-if-locked\"\n          title={Translate.string('Disable field')}\n          onClick={handleDisableClick}\n        />\n      )}\n      <a\n        className=\"icon-settings hide-if-locked\"\n        title={Translate.string('Configure field')}\n        onClick={handleConfigureClick}\n      />\n      {settingsModalActive && (\n        <ItemSettingsModal id={id} onClose={() => setSettingsModalActive(false)} />\n      )}\n      <RequestConfirmDelete\n        requestFunc={() => dispatch(actions.removeItem(id))}\n        onClose={() => setConfirmDeleteActive(false)}\n        open={confirmDeleteActive}\n        persistent\n      >\n        <Translate>\n          Are you sure you want to delete the field \"\n          <Param name=\"field\" value={title} wrapper={<strong />} />\n          \"?\n        </Translate>\n      </RequestConfirmDelete>\n    </>\n  );\n}\n\nFormItemSetupActions.propTypes = {\n  id: PropTypes.number.isRequired,\n  title: PropTypes.string.isRequired,\n  fieldIsRequired: PropTypes.bool.isRequired,\n  fieldIsPersonalData: PropTypes.bool.isRequired,\n  isEnabled: PropTypes.bool.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useDispatch} from 'react-redux';\n\nimport {useSortableItem} from 'indico/react/sortable';\n\nimport FormItem from '../form/FormItem';\n\nimport * as actions from './actions';\nimport FormItemSetupActions from './FormItemSetupActions';\n\nimport '../../styles/regform.module.scss';\n\nexport default function SetupFormItem({index, sectionId, ...rest}) {\n  const {id, isEnabled} = rest;\n  const dispatch = useDispatch();\n  const [handleRef, itemRef, style] = useSortableItem({\n    type: `regform-item@${sectionId}`,\n    id,\n    index,\n    separateHandle: true,\n    active: isEnabled,\n    moveItem: (sourceIndex, targetIndex) => {\n      dispatch(actions.moveItem(sectionId, sourceIndex, targetIndex));\n    },\n    onDrop: item => {\n      if (item.index !== item.originalIndex) {\n        dispatch(actions.saveItemPosition(sectionId, item.id, item.index, item.originalIndex));\n      }\n    },\n  });\n\n  return (\n    <div ref={itemRef} style={style}>\n      <FormItem\n        sortHandle={<div styleName=\"sortable-handle\" className=\"hide-if-locked\" ref={handleRef} />}\n        setupActions={<FormItemSetupActions {...rest} />}\n        {...rest}\n      />\n    </div>\n  );\n}\n\nconst itemPropTypes = _.pick(\n  FormItem.propTypes,\n  'inputType',\n  'isEnabled',\n  ...Object.keys(FormItemSetupActions.propTypes)\n);\n\nSetupFormItem.propTypes = {\n  sectionId: PropTypes.number.isRequired,\n  index: PropTypes.number.isRequired,\n  ...itemPropTypes,\n};\n\nSetupFormItem.defaultProps = _.pick(FormItem.defaultProps, Object.keys(itemPropTypes));\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {useDispatch} from 'react-redux';\n\nimport {SortableWrapper, useSortableItem} from 'indico/react/sortable';\n\nimport FormSection from '../form/FormSection';\n\nimport * as actions from './actions';\nimport FormSectionSetupActions from './FormSectionSetupActions';\nimport SetupFormItem from './SetupFormItem';\n\nimport '../../styles/regform.module.scss';\n\nexport default function SetupFormSection({index, ...rest}) {\n  const {id} = rest;\n  const dispatch = useDispatch();\n  const [handleRef, itemRef, style] = useSortableItem({\n    type: 'regform-section',\n    id,\n    index,\n    separateHandle: true,\n    moveItem: (sourceIndex, targetIndex) => {\n      dispatch(actions.moveSection(sourceIndex, targetIndex));\n    },\n    onDrop: item => {\n      if (item.index !== item.originalIndex) {\n        dispatch(actions.saveSectionPosition(item.id, item.index, item.originalIndex));\n      }\n    },\n  });\n\n  return (\n    <div ref={itemRef} style={style}>\n      <SortableWrapper accept={`regform-item@${id}`}>\n        <FormSection\n          sortHandle={\n            <div className=\"hide-if-locked\" styleName=\"section-sortable-handle\" ref={handleRef} />\n          }\n          setupActions={<FormSectionSetupActions {...rest} />}\n          itemComponent={SetupFormItem}\n          itemProps={{sectionId: id}}\n          {...rest}\n        />\n      </SortableWrapper>\n    </div>\n  );\n}\n\nconst sectionPropTypes = _.pick(FormSection.propTypes, 'id');\n\nSetupFormSection.propTypes = {\n  index: PropTypes.number.isRequired,\n  ...sectionPropTypes,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport React, {useState} from 'react';\nimport {DndProvider} from 'react-dnd';\nimport {HTML5Backend} from 'react-dnd-html5-backend';\nimport {Form as FinalForm} from 'react-final-form';\nimport {useSelector} from 'react-redux';\nimport {Dimmer, Loader} from 'semantic-ui-react';\n\nimport {IButton} from 'indico/react/components';\nimport {Translate} from 'indico/react/i18n';\nimport {SortableWrapper} from 'indico/react/sortable';\n\nimport {getNestedSections, getItems} from '../form/selectors';\n\nimport DisabledSectionsModal from './DisabledSectionsModal';\nimport SectionSettingsModal from './SectionSettingsModal';\nimport {isUILocked, getDisabledSections} from './selectors';\nimport SetupFormSection from './SetupFormSection';\n\nimport '../../styles/regform.module.scss';\n\nexport default function RegistrationFormSetup() {\n  const sections = useSelector(getNestedSections);\n  const disabledSections = useSelector(getDisabledSections);\n  const items = useSelector(getItems);\n  const uiLocked = useSelector(isUILocked);\n  const [disabledSectionModalActive, setDisabledSectionModalActive] = useState(false);\n  const [addSectionModalActive, setAddSectionModalActive] = useState(false);\n\n  const initialValues = Object.fromEntries(\n    Object.entries(items).map(([, {htmlName, defaultValue}]) => [htmlName, defaultValue])\n  );\n\n  return (\n    <Dimmer.Dimmable dimmed={uiLocked}>\n      <DndProvider backend={HTML5Backend}>\n        <div className=\"toolbar\" styleName=\"setup-toolbar\">\n          <IButton icon=\"plus\" onClick={() => setAddSectionModalActive(true)}>\n            <Translate>Add section</Translate>\n          </IButton>\n          {disabledSections.length > 0 && (\n            <IButton onClick={() => setDisabledSectionModalActive(true)}>\n              <Translate>Disabled sections</Translate>\n            </IButton>\n          )}\n        </div>\n\n        {/* we need a dummy FinalForm so our fields don't break... */}\n        <FinalForm\n          initialValues={initialValues}\n          subscription={{initialValues: true}}\n          onSubmit={() => undefined}\n        >\n          {fprops => {\n            // FinalForm does not propagate changes to initialValues immediately.\n            // The first render contains the old initialValues, which is a problem for\n            // newly added fields whose initialValue becomes undefined.\n            // Thus, we filter out all fields that have no corresponding value until\n            // the updated initiaValues become available.\n            const currentSections = sections.map(section => ({\n              ...section,\n              items: section.items.filter(item => item.htmlName in fprops.initialValues),\n            }));\n\n            return (\n              <SortableWrapper accept=\"regform-section\" className=\"regform-section-list\">\n                {currentSections.map((section, index) => (\n                  <SetupFormSection key={section.id} index={index} {...section} setupMode />\n                ))}\n              </SortableWrapper>\n            );\n          }}\n        </FinalForm>\n      </DndProvider>\n\n      {addSectionModalActive && (\n        <SectionSettingsModal onClose={() => setAddSectionModalActive(false)} />\n      )}\n      {disabledSectionModalActive && (\n        <DisabledSectionsModal onClose={() => setDisabledSectionModalActive(false)} />\n      )}\n\n      <Dimmer inverted active={uiLocked}>\n        <Loader size=\"massive\">\n          {/*\n            XXX this loader and text may not be visible since it's vertically centered,\n            inside the dimmable and in case of larger registration forms it may be outside\n            the currently visible area.\n            an alternative would be using the dimmer, but showing the save indicator in a\n            static place on the page, e.g. like we do in the cornerMessage util\n          */}\n          <Translate>Saving...</Translate>\n        </Loader>\n      </Dimmer>\n    </Dimmer.Dimmable>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\n\nimport createReduxStore from 'indico/utils/redux';\n\nimport {setFormData} from './actions';\nimport reducers from './reducers';\nimport RegistrationFormSetup from './RegistrationFormSetup';\n\nexport default function setupRegformSetup(root) {\n  const {\n    eventId,\n    eventStartDate,\n    eventEndDate,\n    regformId,\n    currency,\n    hasPredefinedAffiliations,\n    formData,\n  } = root.dataset;\n\n  const initialData = {\n    staticData: {\n      eventId: parseInt(eventId, 10),\n      regformId: parseInt(regformId, 10),\n      hasPredefinedAffiliations: JSON.parse(hasPredefinedAffiliations),\n      eventStartDate,\n      eventEndDate,\n      currency,\n    },\n  };\n  const store = createReduxStore('regform-setup', reducers, initialData);\n  store.dispatch(setFormData(JSON.parse(formData)));\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <RegistrationFormSetup />\n    </Provider>,\n    root\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nexport const SET_FORM_DATA = 'Set form data';\n\nexport function setFormData(data) {\n  return {type: SET_FORM_DATA, items: data.items, sections: data.sections};\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport {SET_FORM_DATA} from './actions';\n\nexport default {\n  items: (state = {}, action) => {\n    switch (action.type) {\n      case SET_FORM_DATA:\n        return action.items;\n      default:\n        return state;\n    }\n  },\n  sections: (state = {}, action) => {\n    switch (action.type) {\n      case SET_FORM_DATA:\n        return action.sections;\n      default:\n        return state;\n    }\n  },\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport privacyNoticeURL from 'indico-url:events.display_privacy';\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nimport {Form as FinalForm} from 'react-final-form';\nimport {useSelector} from 'react-redux';\nimport {Form, Message} from 'semantic-ui-react';\n\nimport {Captcha} from 'indico/react/components';\nimport {\n  FinalSubmitButton,\n  handleSubmitError,\n  FinalCheckbox,\n  getChangedValues,\n} from 'indico/react/forms';\nimport {Param, Translate} from 'indico/react/i18n';\nimport {indicoAxios} from 'indico/utils/axios';\nimport {getPluginObjects, renderPluginComponents} from 'indico/utils/plugins';\n\nimport ConsentToPublishDropdown from '../components/ConsentToPublishDropdown';\nimport FormSection from '../form/FormSection';\nimport {getNestedSections, getStaticData} from '../form/selectors';\n\nimport {\n  getUpdateMode,\n  getModeration,\n  getManagement,\n  getPublishToParticipants,\n  getPublishToPublic,\n} from './selectors';\n\nimport '../../styles/regform.module.scss';\n\nfunction PrivacyPolicy({url}) {\n  const label = (\n    <label>\n      <Translate>\n        I have read and agree to the{' '}\n        <Param name=\"url\" wrapper={<a href={url} target=\"_blank\" rel=\"noreferrer\" />}>\n          Privacy policy\n        </Param>\n      </Translate>\n    </label>\n  );\n\n  return (\n    <Message info style={{marginTop: 25}}>\n      <Message.Header>\n        <Translate>Privacy policy</Translate>\n      </Message.Header>\n      <Form as=\"div\" style={{marginTop: 10}}>\n        <FinalCheckbox required label={label} name=\"agreed_to_privacy_policy\" toggle />\n      </Form>\n    </Message>\n  );\n}\n\nPrivacyPolicy.propTypes = {\n  url: PropTypes.string.isRequired,\n};\n\nfunction ManagementOptions({isUpdateMode}) {\n  return (\n    <Message info style={{marginTop: 25}}>\n      <Message.Header>\n        <Translate>Management Options</Translate>\n      </Message.Header>\n      <div>\n        <FinalCheckbox\n          style={{marginTop: 10}}\n          label={Translate.string('Send an email notification to the user')}\n          name=\"notify_user\"\n          toggle\n        />\n        {!isUpdateMode && (\n          <FinalCheckbox\n            style={{marginTop: 10}}\n            label={Translate.string('Ignore field requirements for custom fields')}\n            name=\"override_required\"\n            toggle\n          />\n        )}\n      </div>\n    </Message>\n  );\n}\nManagementOptions.propTypes = {\n  isUpdateMode: PropTypes.bool.isRequired,\n};\n\nfunction ConsentToPublish({publishToParticipants, publishToPublic}) {\n  const isWarning = publishToParticipants === 'show_all' && publishToPublic === 'show_all';\n  return (\n    <Message info={!isWarning} warning={isWarning} style={{marginTop: 25}}>\n      <Message.Header>\n        <Translate>Participant list</Translate>\n      </Message.Header>\n      {(publishToParticipants === 'show_with_consent' ||\n        publishToPublic === 'show_with_consent') && (\n        <p>\n          <Translate>\n            Specify whether you consent to being included in the event's list of participants\n          </Translate>\n        </p>\n      )}\n      <Form as=\"div\">\n        <ConsentToPublishDropdown\n          name=\"consent_to_publish\"\n          publishToParticipants={publishToParticipants}\n          publishToPublic={publishToPublic}\n          useFinalForms\n        />\n      </Form>\n    </Message>\n  );\n}\n\nConsentToPublish.propTypes = {\n  publishToParticipants: PropTypes.oneOf(['hide_all', 'show_with_consent', 'show_all']).isRequired,\n  publishToPublic: PropTypes.oneOf(['hide_all', 'show_with_consent', 'show_all']).isRequired,\n};\n\nexport default function RegistrationFormSubmission() {\n  const sections = useSelector(getNestedSections);\n  const {\n    eventId,\n    submitUrl,\n    registrationData,\n    initialValues,\n    captchaRequired,\n    captchaSettings,\n    policyAgreementRequired,\n  } = useSelector(getStaticData);\n  const isUpdateMode = useSelector(getUpdateMode);\n  const isModerated = useSelector(getModeration);\n  const isManagement = useSelector(getManagement);\n  const publishToParticipants = useSelector(getPublishToParticipants);\n  const publishToPublic = useSelector(getPublishToPublic);\n  const showConsentToPublish = !isManagement && publishToParticipants !== 'hide_all';\n\n  const onSubmit = async (data, form) => {\n    // There is no need to store whether the user accepted the privacy policy\n    // as it is not possible to submit the form without accepting it.\n    data = _.omit(data, 'agreed_to_privacy_policy');\n    let resp;\n    const formData = isUpdateMode ? getChangedValues(data, form, ['notify_user']) : data;\n    try {\n      resp = await indicoAxios.post(submitUrl, formData);\n    } catch (err) {\n      return handleSubmitError(err);\n    }\n\n    if (resp.data.redirect) {\n      location.href = resp.data.redirect;\n      // never finish submitting to avoid fields being re-enabled\n      await new Promise(() => {});\n    }\n  };\n\n  return (\n    <FinalForm\n      onSubmit={onSubmit}\n      initialValues={isUpdateMode ? registrationData : initialValues}\n      initialValuesEqual={_.isEqual}\n      subscription={{}}\n      decorators={getPluginObjects('regformFormDecorators')}\n    >\n      {fprops => (\n        <form onSubmit={fprops.handleSubmit}>\n          {renderPluginComponents('regformBeforeSections')}\n          {sections.map(section => (\n            <FormSection key={section.id} {...section} />\n          ))}\n          {renderPluginComponents('regformAfterSections')}\n          <div>\n            {isManagement && <ManagementOptions isUpdateMode={isUpdateMode} />}\n            {showConsentToPublish && (\n              <ConsentToPublish\n                publishToParticipants={publishToParticipants}\n                publishToPublic={publishToPublic}\n              />\n            )}\n            {captchaRequired && <Captcha settings={captchaSettings} />}\n            {!isManagement && !isUpdateMode && policyAgreementRequired && (\n              <PrivacyPolicy url={privacyNoticeURL({event_id: eventId})} />\n            )}\n            <FinalSubmitButton\n              disabledUntilChange={false}\n              disabledIfInvalid={false}\n              label={\n                isUpdateMode\n                  ? Translate.string('Modify')\n                  : isModerated\n                  ? Translate.string('Apply')\n                  : Translate.string('Register')\n              }\n              style={{\n                marginTop: 20,\n                textAlign: 'right',\n              }}\n            />\n          </div>\n        </form>\n      )}\n    </FinalForm>\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport {Provider} from 'react-redux';\n\nimport createReduxStore from 'indico/utils/redux';\n\nimport {setFormData} from './actions';\nimport reducers from './reducers';\nimport RegistrationFormSubmission from './RegistrationFormSubmission';\n\nexport default function setupRegformSubmission(root) {\n  const {\n    eventId,\n    regformId,\n    currency,\n    management,\n    paid,\n    moderated = false,\n    submitUrl,\n    formData,\n    initialValues = null,\n    registrationData = null,\n    registrationUuid = null,\n    fileData = null,\n    publishToParticipants,\n    publishToPublic,\n    consentToPublish = null,\n    policyAgreementRequired,\n    captchaRequired = false,\n    captchaSettings = null,\n    ...extraData\n  } = root.dataset;\n\n  const initialData = {\n    staticData: {\n      eventId: parseInt(eventId, 10),\n      regformId: parseInt(regformId, 10),\n      management: JSON.parse(management),\n      paid: paid ? JSON.parse(paid) : false,\n      moderated: JSON.parse(moderated),\n      initialValues: JSON.parse(initialValues),\n      submitUrl,\n      registrationData: registrationData\n        ? {...JSON.parse(registrationData), consent_to_publish: consentToPublish}\n        : {},\n      registrationUuid,\n      fileData: fileData ? JSON.parse(fileData) : {},\n      currency,\n      publishToParticipants,\n      publishToPublic,\n      policyAgreementRequired: JSON.parse(policyAgreementRequired),\n      captchaRequired: JSON.parse(captchaRequired),\n      captchaSettings: JSON.parse(captchaSettings),\n      // XXX: do NOT use extraData for anything in the core; this is solely meant as a way to\n      // pass data to plugins injecting custom stuff in the registration form. if you add\n      // something in the core, handle it properly above!\n      extraData,\n    },\n  };\n  const store = createReduxStore('regform-submission', reducers, initialData);\n  store.dispatch(setFormData(JSON.parse(formData)));\n\n  ReactDOM.render(\n    <Provider store={store}>\n      <RegistrationFormSubmission />\n    </Provider>,\n    root\n  );\n}\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\n/* global $T:false, alertPopup:false, handleAjaxError:false, ajaxDialog:false */\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport 'indico/react/components/AffiliationPopup';\n\nimport './invitations';\nimport './reglists';\n\nimport ConsentToPublishEditor from './components/ConsentToPublishEditor';\nimport RegistrationTagsEditableList from './components/RegistrationTagsEditableList';\nimport setupRegformSetup from './form_setup';\nimport setupRegformSubmission from './form_submission';\n\n(function(global) {\n  $(document).ready(function() {\n    setupRegistrationFormScheduleDialogs();\n    setupRegistrationFormSummaryPage();\n  });\n\n  $(window).scroll(function() {\n    IndicoUI.Effect.followScroll();\n  });\n\n  function setupRegistrationFormScheduleDialogs() {\n    $('.js-regform-schedule-dialog').on('click', function(e) {\n      e.preventDefault();\n      ajaxDialog({\n        url: $(this).data('href'),\n        title: $(this).data('title'),\n        onClose(data) {\n          if (data) {\n            location.reload();\n          }\n        },\n      });\n    });\n  }\n\n  function setupRegistrationFormSummaryPage() {\n    $('.js-check-conditions').on('click', function(e) {\n      const conditions = $('#conditions-accepted');\n      if (conditions.length && !conditions.prop('checked')) {\n        const msg =\n          'Please, confirm that you have read and accepted the Terms and Conditions before proceeding.';\n        alertPopup($T.gettext(msg), $T.gettext('Terms and Conditions'));\n        e.preventDefault();\n      }\n    });\n\n    $('.js-highlight-payment').on('click', function() {\n      $('#payment-summary').effect('highlight', 800);\n    });\n  }\n\n  global.setupRegistrationFormListPage = function setupRegistrationFormListPage() {\n    $('#payment-disabled-notice').on('indico:confirmed', '.js-enable-payments', function(evt) {\n      evt.preventDefault();\n\n      const $this = $(this);\n      $.ajax({\n        url: $this.data('href'),\n        method: $this.data('method'),\n        complete: IndicoUI.Dialogs.Util.progress(),\n        error: handleAjaxError,\n        success(data) {\n          $('#payment-disabled-notice').remove();\n          $('#event-side-menu').html(data.event_menu);\n        },\n      });\n    });\n  };\n\n  function setupRegistrationTags() {\n    const rootElement = document.getElementById('registration-detail-registration-tags-assign');\n\n    if (rootElement) {\n      const assignedTags = JSON.parse(rootElement.dataset.assignedTags);\n      const allTags = JSON.parse(rootElement.dataset.allTags);\n      const {eventId, regformId, registrationId} = rootElement.dataset;\n\n      ReactDOM.render(\n        <RegistrationTagsEditableList\n          eventId={parseInt(eventId, 10)}\n          regformId={parseInt(regformId, 10)}\n          registrationId={parseInt(registrationId, 10)}\n          assignedTags={assignedTags}\n          allTags={allTags}\n        />,\n        rootElement\n      );\n    }\n  }\n\n  document.addEventListener('DOMContentLoaded', () => {\n    setupRegistrationTags();\n    $('#registration-details')\n      .parent()\n      .on('indico:htmlUpdated', setupRegistrationTags);\n  });\n\n  function setupConsentToPublish() {\n    const rootElement = document.getElementById('registration-summary-consent-to-publish');\n\n    if (rootElement) {\n      const {\n        locator,\n        publishToParticipants,\n        publishToPublic,\n        initialConsentToPublish,\n      } = rootElement.dataset;\n\n      ReactDOM.render(\n        <ConsentToPublishEditor\n          locator={JSON.parse(locator)}\n          publishToParticipants={publishToParticipants}\n          publishToPublic={publishToPublic}\n          initialConsentToPublish={initialConsentToPublish}\n        />,\n        rootElement\n      );\n    }\n  }\n\n  document.addEventListener('DOMContentLoaded', () => {\n    setupConsentToPublish();\n    $('#registration-info')\n      .parent()\n      .on('indico:htmlUpdated', setupConsentToPublish);\n  });\n\n  document.addEventListener('DOMContentLoaded', () => {\n    const setupRootElement = document.getElementById('registration-form-setup-container');\n    if (setupRootElement) {\n      setupRegformSetup(setupRootElement);\n    }\n\n    const submissionRootElement = document.getElementById('registration-form-submission-container');\n    if (submissionRootElement) {\n      setupRegformSubmission(submissionRootElement);\n    }\n  });\n})(window);\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseUniq = require('./_baseUniq');\n\n/**\n * The base implementation of methods like `_.xor`, without support for\n * iteratee shorthands, that accepts an array of arrays to inspect.\n *\n * @private\n * @param {Array} arrays The arrays to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of values.\n */\nfunction baseXor(arrays, iteratee, comparator) {\n  var length = arrays.length;\n  if (length < 2) {\n    return length ? baseUniq(arrays[0]) : [];\n  }\n  var index = -1,\n      result = Array(length);\n\n  while (++index < length) {\n    var array = arrays[index],\n        othIndex = -1;\n\n    while (++othIndex < length) {\n      if (othIndex != index) {\n        result[index] = baseDifference(result[index] || array, arrays[othIndex], iteratee, comparator);\n      }\n    }\n  }\n  return baseUniq(baseFlatten(result, 1), iteratee, comparator);\n}\n\nmodule.exports = baseXor;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseIteratee = require('./_baseIteratee'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject'),\n    last = require('./last');\n\n/**\n * This method is like `_.difference` except that it accepts `iteratee` which\n * is invoked for each element of `array` and `values` to generate the criterion\n * by which they're compared. The order and references of result values are\n * determined by the first array. The iteratee is invoked with one argument:\n * (value).\n *\n * **Note:** Unlike `_.pullAllBy`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @param {Function} [iteratee=_.identity] The iteratee invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.differenceBy([2.1, 1.2], [2.3, 3.4], Math.floor);\n * // => [1.2]\n *\n * // The `_.property` iteratee shorthand.\n * _.differenceBy([{ 'x': 2 }, { 'x': 1 }], [{ 'x': 1 }], 'x');\n * // => [{ 'x': 2 }]\n */\nvar differenceBy = baseRest(function(array, values) {\n  var iteratee = last(values);\n  if (isArrayLikeObject(iteratee)) {\n    iteratee = undefined;\n  }\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true), baseIteratee(iteratee, 2))\n    : [];\n});\n\nmodule.exports = differenceBy;\n","var arrayFilter = require('./_arrayFilter'),\n    baseRest = require('./_baseRest'),\n    baseXor = require('./_baseXor'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values that is the\n * [symmetric difference](https://en.wikipedia.org/wiki/Symmetric_difference)\n * of the given arrays. The order of result values is determined by the order\n * they occur in the arrays.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.difference, _.without\n * @example\n *\n * _.xor([2, 1], [2, 3]);\n * // => [1, 3]\n */\nvar xor = baseRest(function(arrays) {\n  return baseXor(arrayFilter(arrays, isArrayLikeObject));\n});\n\nmodule.exports = xor;\n"],"names":["EmailPendingInvitations","_ref","metadataURL","previewURL","sendURL","onClose","sentCount","setSentCount","useState","data","loading","useIndicoAxios","senders","recipients","subject","defaultSubject","body","defaultBody","placeholders","React","Dimmer","active","page","inverted","Loader","EmailDialog","onSubmit","async","resp","indicoAxios","post","err","handleSubmitError","count","setTimeout","initialFormValues","sentEmailsCount","propTypes","PropTypes","isRequired","emailMetadataURL","_buildFlaskURL","bind","endpoint","rules","args","converters","event_id","reg_form_id","defaults","trace","isDynamic","emailPreviewURL","emailSendURL","EmailPendingInvitationsButton","eventId","regformId","hasPendingInvitations","open","setOpen","type","className","disabled","onClick","Translate","global","renderEmailInvitationsBtn","_ref2","container","document","getElementById","ReactDOM","window","setupInvitationPage","$","on","evt","preventDefault","$this","this","ajax","url","method","complete","IndicoUI","Dialogs","Util","progress","error","handleAjaxError","success","html","invitation_list","has_pending_invitations","ajaxDialog","setupRegistrationList","handleRegListRowSelection","toggleClass","length","trigger","setupListGenerator","title","$T","gettext","registration_id","getSelectedRows","val","selectedRows","msg","ngettext","format","confirmPrompt","then","i","fadeOut","remove","flag","handleSelectedRowHighlight","setupTableSorter","user","showUserSearch","withExternalUsers","single","alwaysConfirm","location","href","build_url","dialogClasses","publishModePropType","ConsentToPublishDropdown","publishToParticipants","publishToPublic","value","useFinalForms","extraProps","_objectWithoutProperties","_excluded","options","push","key","text","string","FinalDropdown","_extends","selection","required","fluid","Dropdown","defaultProps","registrationChangeConsent","ConsentToPublishEditor","locator","initialConsentToPublish","consentToPublish","setConsentToPublish","status","setStatus","onChange","consent_to_publish","handleAxiosError","editConsentToPublish","Icon","name","color","registrationTagAssign","RegistrationTagsEditableList","registrationId","assignedTags","allTags","tags","setTags","unassignedTags","_differenceBy","editRegistrationTags","add","IButton","style","marginRight","marginTop","map","tag","Label","size","filter","t","id","onRemove","PopoverDropdownMenu","onOpen","placement","Header","textAlign","Divider","margin","newTags","_sortBy","toLowerCase","onAdd","ownKeys","e","r","Object","keys","getOwnPropertySymbols","o","getOwnPropertyDescriptor","enumerable","apply","_objectSpread","arguments","forEach","_defineProperty","getOwnPropertyDescriptors","defineProperties","defineProperty","getStaticData","state","staticData","getFlatSections","sections","getItems","items","getItemById","createSelector","__","itemId","fields","getCurrency","currency","getSections","values","s","enabled","getSectionItemMapping","mapping","Map","field","get","sectionId","getNestedSections","sortedSections","sectionFields","section","isUILocked","uiLocked","getDisabledSections","getSectionById","getSectionIdForItem","isItemStaticText","item","inputType","pickItemURL","isStaticText","textURL","fieldURL","getURLParams","undefined","params","section_id","field_id","addFieldURL","addSectionURL","addTextURL","modifyFieldURL","modifySectionURL","modifyTextURL","moveFieldURL","moveSectionURL","moveTextURL","toggleFieldURL","toggleSectionURL","toggleTextURL","LOCK_UI","UNLOCK_UI","SET_FORM_DATA","MOVE_SECTION","UPDATE_SECTION","TOGGLE_SECTION","REMOVE_SECTION","CREATE_SECTION","MOVE_ITEM","UPDATE_ITEM","REMOVE_ITEM","CREATE_ITEM","UPDATE_POSITIONS","lockingAjaxAction","requestFunc","_len","Array","_key","fn","ajaxAction","dispatch","updatePositions","moveSection","sourceIndex","targetIndex","_toggleSection","moveItem","_updateItem","removeSection","getStore","store","delete","_removeSection","updateSection","payload","changes","submitFormAction","patch","_updateSection","camelizeKeys","createSection","_createSection","removeItem","urlFunc","_removeItem","createItem","fieldData","input_type","_createItem","view_data","action","newState","entries","position","_omit","_omitBy","sorted","f","sourceItem","splice","enabledPos","disabledPos","isEnabled","_ref3","_ref4","sourceSection","DisabledSection","useDispatch","confirmDeleteActive","setConfirmDeleteActive","Segment","Popup","content","handleEnableClick","enable","positions","circular","handleRemoveClick","RequestConfirmDelete","actions","persistent","Param","wrapper","DisabledSectionsModal","useSelector","useEffect","Modal","closeIcon","Content","SectionSettingsModal","editing","description","isPersonalData","isManagerOnly","FinalModalForm","formData","rv","initialValues","is_manager_only","header","FinalInput","label","autoFocus","FinalTextArea","FinalCheckbox","userInfo","getUpdateMode","registrationUuid","getRegistrationData","registrationData","getModeration","moderated","getManagement","management","getPaid","paid","getPublishToParticipants","getPublishToPublic","getFieldValue","updateMode","htmlName","isPaidItemLocked","price","choices","choiceIsSelected","c","choice","find","ChoiceLabel","modWarning","paymentWarning","_deleted","_modified","caption","choiceShape","placesLimit","maxExtraSlots","Choices","onFocus","onBlur","withExtraSlots","forAccommodation","makeOnDelete","handleMove","newValue","SortableWrapper","accept","width","colSpan","Choice","index","onDelete","onMove","fieldProps","marginBottom","Button","handleAdd","newItem","nanoid","choiceFieldsSettingsFormDecorator","createDecorator","updates","isPriceSet","some","extraSlotsPay","isNoAccommodation","handleRef","itemRef","useSortableItem","separateHandle","onDrop","makeOnChange","elem","target","checked","ref","_getClassName","_styleModuleImportMap","placeholder","min","step","Input","icon","link","PlacesLeft","placesUsed","placesLeft","whiteSpace","PluralTranslate","Singular","Plural","AccommodationInputComponent","existingValue","isPurged","arrival","departure","selectedChoice","focusedDateField","setFocusedDateField","arrivalDateFrom","toMoment","startDate","moment","DATE","arrivalDateTo","endDate","departureDateFrom","departureDateTo","minimumDays","arrivalDate","Math","max","diff","nights","departureDate","isPaidChoice","isPaidChoiceLocked","role","Form","Radio","pointerEvents","children","pointing","toFixed","DatePeriodField","disabledDate","date","isBetween","initialVisibleMonth","onFieldFocusChange","extraPickerProps","block","startDatePlaceholderText","endDatePlaceholderText","total","AccommodationInput","fieldId","htmlId","FinalField","component","validate","isEqual","_isEqual","AccompanyingPersonModal","calculatePlaces","availablePlaces","maxPersons","personsInCurrentField","formState","Infinity","personsInAllFieldsCount","personsCountAgainstLimit","apf","reduce","_formState$values$fie","countAllAccompanyingPersons","AccompanyingPersonsComponent","operation","setOperation","person","totalPrice","useFormState","changeReducer","p","handleModalClose","Group","firstName","lastName","handleAccompanyingPersonEdit","personId","handleAccompanyingPersonRemove","handleAccompanyingPersonAdd","basic","includes","AccompanyingPersonsInput","BooleanInputComponent","makeOnClick","marginLeft","BooleanInput","allowNull","CheckboxInput","showAsRequired","retentionPeriodIcon","checkboxId","styles","Field","subscription","input","display","isoToFlag","country","String","fromCodePoint","split","charCodeAt","asciiSearch","query","transliterate","inputStr","normalize","replace","asciiQuery","opt","CountryInputComponent","clearable","search","selectOnBlur","selectOnNavigation","_","countryKey","CountryInput","parse","x","CountrySettings","hasPredefinedAffiliations","DateInputComponent","dateFormat","timeFormat","minDate","maxDate","dateValue","timeValue","DatePicker","newDate","TimePicker","showSecond","focusOnOpen","newTime","use12Hours","allowEmpty","getPopupContainer","node","DateInput","friendlyDateFormat","match","H","M","d","m","Y","validateDateTime","dateTime","parseDate","_match$groups$month","_wrapRegExp","month","year","exec","groups","formatDate","dateSettingsFormDecorator","validateEmailURL","EmailInput","isMainEmailField","message","setMessage","forEmail","isUpdateMode","invitationToken","formToken","useMemo","URLSearchParams","invitation","form_token","validateEmail","useDebouncedAsyncValidate","response","email","trim","update","conflict","email_error","self","same","v","hideValidationError","loaderWhileValidating","Message","visible","warning","positive","uploadFileURL","FileInput","fileData","initialFileDetails","urlParams","token","FinalSingleFileManager","uploadURL","LabelInput","MultiChoiceInputComponent","markTouched","makeHandleChange","makeHandleSlotsChange","formatPrice","Checkbox","_range","MultiChoiceInput","maxChoices","_keys","n","NumberInputComponent","minValue","maxValue","NumberInput","chain","number","range","optional","PhoneInput","managementPreviewURL","field_data_id","registrantPreviewURL","PictureInput","minPictureSize","initialPictureDetails","isManagement","uploadUrlParams","previewUrlParams","FinalPictureManager","SingleChoiceDropdown","extraSlotsDropdown","Select","_evt","opacity","SingleChoiceRadioGroup","radioChoices","unshift","currentChoice","handleChange","SingleChoiceInputComponent","itemType","SingleChoiceInput","singleChoiceSettingsFormDecorator","_ref5","defaultItem","mapPropsToAttributes","props","inputProps","prop","attr","attributeMap","numberOfRows","TextAreaInput","resize","minLength","maxLength","TextInput","sessionBlocksURL","sessionDataSchema","fullTitle","time","TimetableSessionsComponent","sessionData","_onChange","collapseDays","minimum","maximum","expandedHeaders","setExpandedHeaders","fromEntries","validBlockIds","Set","flat","has","handleValueChange","_xor","handleHeaderClick","Accordion","styled","exclusive","_expandedHeaders$date","SessionBlockHeader","isExpanded","childrenIds","isAllChecked","every","isAnyChecked","selectedBlocks","element","AccordionTitle","stopPropagation","indeterminate","AccordionContent","TimetableSessionsInput","force_event_tz","camelize","minMsg","maxMsg","fieldRegistry","inputComponent","noRequired","noRetentionPeriod","noLabel","customFormItem","settingsComponent","widths","STOP_VALIDATION","settingsFormValidator","textarea","hasPrice","checkbox","dateOptions","timeOptions","nullIfEmpty","settingsFormDecorators","settingsFormInitialData","bool","renderAsFieldset","phone","file","single_choice","_ref6","_ref7","settingsModalSize","multi_choice","accommodation","FinalDatePeriod","noBorder","serializeDate","eventStartDate","subtract","eventEndDate","errors","isBefore","isAfter","alwaysRequired","accompanying_persons","picture","sessions","toggle","collapse_days","getFieldRegistry","pluginFields","getPluginObjects","startsWith","unsafeOverrideField","Error","PaidItemLocked","lockedMsg","PurgedItemLocked","purgedMsg","ItemLocked","reason","FormItem","retentionPeriod","lockedReason","sortHandle","setupMode","setupActions","rest","paidItemLocked","meta","InputComponent","showPurged","inputRequired","fieldControls","toClasses","htmlFor","Markdown","renderPluginComponents","fieldIsPersonalData","fieldIsRequired","FormSection","itemComponent","ItemComponent","itemProps","enabledFields","disabledFields","managerPopup","as","ItemTypeDropdown","newItemType","inModal","dropdownText","newItemTypeOptions","middle","ceil","Menu","DropdownItem","centered","slice","_excluded2","EMPTY_DATA","ItemSettingsModal","defaultNewItemType","setNewItemType","_useSelector","existingInputType","itemData","isUnsupportedField","SettingsComponent","_isFunction","form","getValuesForFields","initialValuesEqual","unloadPrompt","decorators","float","FormSpy","dirty","handleChangeItemType","confirm","Fieldset","legend","compact","info","FormSectionSetupActions","settingsModalActive","setSettingsModalActive","fieldModalActive","setFieldModalActive","handleDisableClick","handleConfigureClick","FormItemSetupActions","SetupFormItem","originalIndex","oldPosition","endPos","itemPropTypes","_pick","SetupFormSection","sectionPropTypes","RegistrationFormSetup","disabledSections","disabledSectionModalActive","setDisabledSectionModalActive","addSectionModalActive","setAddSectionModalActive","defaultValue","Dimmable","dimmed","DndProvider","backend","HTML5Backend","FinalForm","fprops","currentSections","setupRegformSetup","root","dataset","initialData","parseInt","JSON","createReduxStore","reducers","Provider","privacyNoticeURL","PrivacyPolicy","rel","ManagementOptions","ConsentToPublish","isWarning","RegistrationFormSubmission","submitUrl","captchaRequired","captchaSettings","policyAgreementRequired","isModerated","showConsentToPublish","getChangedValues","redirect","Promise","handleSubmit","Captcha","settings","FinalSubmitButton","disabledUntilChange","disabledIfInvalid","setupRegformSubmission","_root$dataset","extraData","setupRegistrationTags","rootElement","setupConsentToPublish","ready","reload","conditions","alertPopup","effect","scroll","Effect","followScroll","setupRegistrationFormListPage","event_menu","addEventListener","parent","setupRootElement","submissionRootElement","baseDifference","baseFlatten","baseUniq","module","exports","arrays","iteratee","comparator","result","array","othIndex","baseIteratee","baseRest","isArrayLikeObject","last","differenceBy","arrayFilter","baseXor","xor"],"sourceRoot":""}