{"version":3,"file":"js/module_receipts.admin.29fba4cd.bundle.js","mappings":"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","sources":["webpack:///indico/modules/receipts/client/js/templates/util.js","webpack:///indico/modules/receipts/client/js/templates/TemplateListPane.jsx","webpack:///node_modules/@monaco-editor/loader/lib/es/_virtual/_rollupPluginBabelHelpers.js","webpack:///node_modules/state-local/lib/es/state-local.js","webpack:///node_modules/@monaco-editor/loader/lib/es/config/index.js","webpack:///node_modules/@monaco-editor/loader/lib/es/utils/isObject.js","webpack:///node_modules/@monaco-editor/loader/lib/es/validators/index.js","webpack:///node_modules/@monaco-editor/loader/lib/es/utils/curry.js","webpack:///node_modules/@monaco-editor/loader/lib/es/utils/compose.js","webpack:///node_modules/@monaco-editor/loader/lib/es/utils/deepMerge.js","webpack:///node_modules/@monaco-editor/loader/lib/es/utils/makeCancelable.js","webpack:///node_modules/@monaco-editor/loader/lib/es/loader/index.js","webpack:///node_modules/@monaco-editor/react/dist/index.mjs","webpack:///indico/web/client/js/react/util/Nexus.jsx","webpack:///indico/modules/receipts/client/js/templates/Editor.jsx","webpack:///indico/modules/receipts/client/js/templates/TemplatePane.jsx","webpack:///indico/modules/receipts/client/js/templates/TemplateManagement.jsx","webpack:///indico/modules/receipts/client/js/templates/index.jsx"],"sourcesContent":["// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\n\nexport const targetLocatorSchema = PropTypes.shape({\n  event_id: PropTypes.number,\n  category_id: PropTypes.number,\n});\n\nexport const templateSchema = PropTypes.shape({\n  id: PropTypes.number,\n  title: PropTypes.string,\n  html: PropTypes.string,\n  css: PropTypes.string,\n  customFields: PropTypes.array,\n  owner: PropTypes.shape({\n    id: PropTypes.number,\n    title: PropTypes.string,\n    locator: PropTypes.object,\n  }),\n});\n\nexport const defaultTemplateSchema = PropTypes.shape({\n  title: PropTypes.string.isRequired,\n  version: PropTypes.number.isRequired,\n});\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport addDefaultTemplateURL from 'indico-url:receipts.add_default_template';\nimport addTemplatePageURL from 'indico-url:receipts.add_template_page';\nimport cloneTemplateURL from 'indico-url:receipts.clone_template';\nimport deleteTemplateURL from 'indico-url:receipts.delete_template';\nimport templateURL from 'indico-url:receipts.template';\nimport templateListURL from 'indico-url:receipts.template_list';\nimport templatePreviewURL from 'indico-url:receipts.template_preview';\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, {useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport {Accordion, Dropdown, Icon, Label} from 'semantic-ui-react';\n\nimport {RequestConfirmDelete} from 'indico/react/components';\nimport {Param, Translate} from 'indico/react/i18n';\nimport {handleAxiosError, indicoAxios} from 'indico/utils/axios';\n\nimport {defaultTemplateSchema, targetLocatorSchema, templateSchema} from './util';\n\nimport './TemplateListPane.module.scss';\n\nfunction TemplateRow({\n  template: {id, type, title, owner},\n  dispatch,\n  setDeletePrompt,\n  targetLocator,\n  inherited,\n}) {\n  const deleteTemplate = async () => {\n    try {\n      await indicoAxios.delete(deleteTemplateURL({template_id: id, ...targetLocator}));\n      dispatch({type: 'DELETE_TEMPLATE', id});\n    } catch (err) {\n      handleAxiosError(err);\n      return true;\n    }\n  };\n\n  const cloneTemplate = async () => {\n    try {\n      const {data: clonedTemplate} = await indicoAxios.post(\n        cloneTemplateURL({template_id: id, ...targetLocator})\n      );\n      dispatch({type: 'ADD_TEMPLATE', template: clonedTemplate});\n    } catch (err) {\n      handleAxiosError(err);\n    }\n  };\n\n  const typeLabel = {\n    receipt: {color: 'red', text: Translate.string('Receipt')},\n    certificate: {color: 'blue', text: Translate.string('Certificate')},\n  }[type];\n\n  return (\n    <tr>\n      <td className=\"i-table id-column\">\n        <i className=\"icon-agreement\" />\n      </td>\n      <td>\n        {title}\n        {typeLabel && (\n          <Label size=\"small\" style={{marginLeft: '1em'}} color={typeLabel.color} basic>\n            {typeLabel.text}\n          </Label>\n        )}\n      </td>\n      <td className=\"text-superfluous\">\n        {inherited &&\n          ('event_id' in owner.locator ? (\n            <Translate>\n              from event{' '}\n              <Param\n                name=\"title\"\n                value={owner.title}\n                wrapper={<a href={templateListURL(owner.locator)} />}\n              />\n            </Translate>\n          ) : (\n            <Translate>\n              from category{' '}\n              <Param\n                name=\"title\"\n                value={owner.title}\n                wrapper={<a href={templateListURL(owner.locator)} />}\n              />\n            </Translate>\n          ))}\n      </td>\n      <td styleName=\"template-actions\">\n        <div className=\"thin toolbar right\">\n          <a href={templatePreviewURL({template_id: id, ...targetLocator})}>\n            <Icon name=\"eye\" color=\"blue\" title={Translate.string('Preview template')} />\n          </a>\n          {!inherited && (\n            <Link\n              to={templateURL({template_id: id, ...targetLocator})}\n              onClick={evt => evt.target.dispatchEvent(new Event('indico:closeAutoTooltip'))}\n            >\n              <Icon name=\"edit\" color=\"blue\" title={Translate.string('Edit template')} />\n            </Link>\n          )}\n          <Icon\n            name=\"clone\"\n            color=\"blue\"\n            title={Translate.string('Clone template')}\n            onClick={evt => {\n              evt.target.dispatchEvent(new Event('indico:closeAutoTooltip'));\n              cloneTemplate(id);\n            }}\n          />\n          {!inherited && setDeletePrompt && (\n            <Icon\n              name=\"trash\"\n              color=\"red\"\n              title={Translate.string('Delete template')}\n              onClick={evt => {\n                evt.target.dispatchEvent(new Event('indico:closeAutoTooltip'));\n                setDeletePrompt({\n                  title,\n                  func: () => deleteTemplate(id),\n                });\n              }}\n            />\n          )}\n        </div>\n      </td>\n    </tr>\n  );\n}\n\nTemplateRow.propTypes = {\n  template: templateSchema.isRequired,\n  dispatch: PropTypes.func.isRequired,\n  setDeletePrompt: PropTypes.func,\n  targetLocator: targetLocatorSchema.isRequired,\n  inherited: PropTypes.bool,\n};\n\nTemplateRow.defaultProps = {\n  inherited: false,\n  setDeletePrompt: null,\n};\n\nexport default function TemplateListPane({\n  ownTemplates,\n  inheritedTemplates,\n  otherTemplates,\n  defaultTemplates,\n  targetLocator,\n  dispatch,\n}) {\n  const [deletePrompt, setDeletePrompt] = useState(null);\n  return (\n    <div styleName=\"template-list\">\n      <RequestConfirmDelete\n        onClose={() => setDeletePrompt(null)}\n        requestFunc={deletePrompt?.func || (() => null)}\n        open={deletePrompt !== null}\n      >\n        <Translate>\n          Are you sure you want to delete the template{' '}\n          <Param name=\"template\" value={deletePrompt?.title} wrapper={<strong />} />?\n        </Translate>\n      </RequestConfirmDelete>\n      {!!inheritedTemplates.length && (\n        <section>\n          <h3>\n            <Translate>Inherited templates</Translate>\n          </h3>\n          <table className=\"i-table-widget\">\n            <tbody>\n              {_.sortBy(inheritedTemplates, 'title').map(tpl => (\n                <TemplateRow\n                  key={tpl.id}\n                  template={tpl}\n                  dispatch={dispatch}\n                  targetLocator={targetLocator}\n                  inherited\n                />\n              ))}\n            </tbody>\n          </table>\n        </section>\n      )}\n      {!!otherTemplates.length && (\n        <section>\n          <Accordion\n            panels={[\n              {\n                key: 'other',\n                title: {\n                  content: (\n                    <h4>\n                      <Translate>Other templates</Translate>\n                    </h4>\n                  ),\n                },\n                content: {\n                  content: (\n                    <table className=\"i-table-widget\">\n                      <tbody>\n                        {_.sortBy(otherTemplates, 'title').map(tpl => (\n                          <TemplateRow\n                            key={tpl.id}\n                            template={tpl}\n                            dispatch={dispatch}\n                            targetLocator={targetLocator}\n                            inherited\n                          />\n                        ))}\n                      </tbody>\n                    </table>\n                  ),\n                },\n              },\n            ]}\n          />\n        </section>\n      )}\n      <section>\n        <div className=\"flexrow f-a-center f-j-space-between\">\n          <h3>\n            <Translate>Custom templates</Translate>\n          </h3>\n          <Dropdown\n            button\n            labeled\n            title={Translate.string('Add a new template')}\n            icon=\"plus\"\n            text={Translate.string('Add new')}\n            className=\"mini primary icon\"\n            direction=\"left\"\n          >\n            <Dropdown.Menu>\n              <Dropdown.Item\n                as={Link}\n                to={addTemplatePageURL(targetLocator)}\n                text={Translate.string('Blank template')}\n              />\n              {_.sortBy(Object.entries(defaultTemplates), ([, t]) => t.title).map(\n                ([name, {title, version}]) => (\n                  <Dropdown.Item\n                    key={name}\n                    as={Link}\n                    to={addDefaultTemplateURL({...targetLocator, template_name: name})}\n                    text={`${title} (v${version})`}\n                  />\n                )\n              )}\n            </Dropdown.Menu>\n          </Dropdown>\n        </div>\n        {ownTemplates.length ? (\n          <table className=\"i-table-widget\">\n            <tbody>\n              {_.sortBy(ownTemplates, 'title').map(tpl => (\n                <TemplateRow\n                  key={tpl.id}\n                  template={tpl}\n                  dispatch={dispatch}\n                  setDeletePrompt={setDeletePrompt}\n                  targetLocator={targetLocator}\n                />\n              ))}\n            </tbody>\n          </table>\n        ) : (\n          <div className=\"italic text-not-important\">\n            <Translate>No templates</Translate>\n          </div>\n        )}\n      </section>\n    </div>\n  );\n}\n\nTemplateListPane.propTypes = {\n  ownTemplates: PropTypes.arrayOf(templateSchema).isRequired,\n  inheritedTemplates: PropTypes.arrayOf(templateSchema).isRequired,\n  otherTemplates: PropTypes.arrayOf(templateSchema).isRequired,\n  defaultTemplates: PropTypes.objectOf(defaultTemplateSchema).isRequired,\n  dispatch: PropTypes.func.isRequired,\n  targetLocator: targetLocatorSchema.isRequired,\n};\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nfunction _slicedToArray(arr, i) {\n  return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest();\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nfunction _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return _arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen);\n}\n\nfunction _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i];\n\n  return arr2;\n}\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nexport { _arrayLikeToArray as arrayLikeToArray, _arrayWithHoles as arrayWithHoles, _defineProperty as defineProperty, _iterableToArrayLimit as iterableToArrayLimit, _nonIterableRest as nonIterableRest, _objectSpread2 as objectSpread2, _objectWithoutProperties as objectWithoutProperties, _objectWithoutPropertiesLoose as objectWithoutPropertiesLoose, _slicedToArray as slicedToArray, _unsupportedIterableToArray as unsupportedIterableToArray };\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n}\n\nfunction curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len3 = arguments.length, nextArgs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        nextArgs[_key3] = arguments[_key3];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nfunction isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nfunction isEmpty(obj) {\n  return !Object.keys(obj).length;\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction hasOwnProperty(object, property) {\n  return Object.prototype.hasOwnProperty.call(object, property);\n}\n\nfunction validateChanges(initial, changes) {\n  if (!isObject(changes)) errorHandler('changeType');\n  if (Object.keys(changes).some(function (field) {\n    return !hasOwnProperty(initial, field);\n  })) errorHandler('changeField');\n  return changes;\n}\n\nfunction validateSelector(selector) {\n  if (!isFunction(selector)) errorHandler('selectorType');\n}\n\nfunction validateHandler(handler) {\n  if (!(isFunction(handler) || isObject(handler))) errorHandler('handlerType');\n  if (isObject(handler) && Object.values(handler).some(function (_handler) {\n    return !isFunction(_handler);\n  })) errorHandler('handlersType');\n}\n\nfunction validateInitial(initial) {\n  if (!initial) errorHandler('initialIsRequired');\n  if (!isObject(initial)) errorHandler('initialType');\n  if (isEmpty(initial)) errorHandler('initialContent');\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  initialIsRequired: 'initial state is required',\n  initialType: 'initial state should be an object',\n  initialContent: 'initial state shouldn\\'t be an empty object',\n  handlerType: 'handler should be an object or a function',\n  handlersType: 'all handlers should be a functions',\n  selectorType: 'selector should be a function',\n  changeType: 'provided value of changes should be an object',\n  changeField: 'it seams you want to change a field in the state which is not specified in the \"initial\" state',\n  \"default\": 'an unknown error accured in `state-local` package'\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  changes: validateChanges,\n  selector: validateSelector,\n  handler: validateHandler,\n  initial: validateInitial\n};\n\nfunction create(initial) {\n  var handler = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  validators.initial(initial);\n  validators.handler(handler);\n  var state = {\n    current: initial\n  };\n  var didUpdate = curry(didStateUpdate)(state, handler);\n  var update = curry(updateState)(state);\n  var validate = curry(validators.changes)(initial);\n  var getChanges = curry(extractChanges)(state);\n\n  function getState() {\n    var selector = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function (state) {\n      return state;\n    };\n    validators.selector(selector);\n    return selector(state.current);\n  }\n\n  function setState(causedChanges) {\n    compose(didUpdate, update, validate, getChanges)(causedChanges);\n  }\n\n  return [getState, setState];\n}\n\nfunction extractChanges(state, causedChanges) {\n  return isFunction(causedChanges) ? causedChanges(state.current) : causedChanges;\n}\n\nfunction updateState(state, changes) {\n  state.current = _objectSpread2(_objectSpread2({}, state.current), changes);\n  return changes;\n}\n\nfunction didStateUpdate(state, handler, changes) {\n  isFunction(handler) ? handler(state.current) : Object.keys(changes).forEach(function (field) {\n    var _handler$field;\n\n    return (_handler$field = handler[field]) === null || _handler$field === void 0 ? void 0 : _handler$field.call(handler, state.current[field]);\n  });\n  return changes;\n}\n\nvar index = {\n  create: create\n};\n\nexport default index;\n","var config = {\n  paths: {\n    vs: 'https://cdn.jsdelivr.net/npm/monaco-editor@0.43.0/min/vs'\n  }\n};\n\nexport default config;\n","function isObject(value) {\n  return {}.toString.call(value).includes('Object');\n}\n\nexport default isObject;\n","import curry from '../utils/curry.js';\nimport isObject from '../utils/isObject.js';\n\n/**\n * validates the configuration object and informs about deprecation\n * @param {Object} config - the configuration object \n * @return {Object} config - the validated configuration object\n */\n\nfunction validateConfig(config) {\n  if (!config) errorHandler('configIsRequired');\n  if (!isObject(config)) errorHandler('configType');\n\n  if (config.urls) {\n    informAboutDeprecation();\n    return {\n      paths: {\n        vs: config.urls.monacoBase\n      }\n    };\n  }\n\n  return config;\n}\n/**\n * logs deprecation message\n */\n\n\nfunction informAboutDeprecation() {\n  console.warn(errorMessages.deprecation);\n}\n\nfunction throwError(errorMessages, type) {\n  throw new Error(errorMessages[type] || errorMessages[\"default\"]);\n}\n\nvar errorMessages = {\n  configIsRequired: 'the configuration object is required',\n  configType: 'the configuration object should be an object',\n  \"default\": 'an unknown error accured in `@monaco-editor/loader` package',\n  deprecation: \"Deprecation warning!\\n    You are using deprecated way of configuration.\\n\\n    Instead of using\\n      monaco.config({ urls: { monacoBase: '...' } })\\n    use\\n      monaco.config({ paths: { vs: '...' } })\\n\\n    For more please check the link https://github.com/suren-atoyan/monaco-loader#config\\n  \"\n};\nvar errorHandler = curry(throwError)(errorMessages);\nvar validators = {\n  config: validateConfig\n};\n\nexport default validators;\nexport { errorHandler, errorMessages };\n","function curry(fn) {\n  return function curried() {\n    var _this = this;\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    return args.length >= fn.length ? fn.apply(this, args) : function () {\n      for (var _len2 = arguments.length, nextArgs = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        nextArgs[_key2] = arguments[_key2];\n      }\n\n      return curried.apply(_this, [].concat(args, nextArgs));\n    };\n  };\n}\n\nexport default curry;\n","var compose = function compose() {\n  for (var _len = arguments.length, fns = new Array(_len), _key = 0; _key < _len; _key++) {\n    fns[_key] = arguments[_key];\n  }\n\n  return function (x) {\n    return fns.reduceRight(function (y, f) {\n      return f(y);\n    }, x);\n  };\n};\n\nexport default compose;\n","import { objectSpread2 as _objectSpread2 } from '../_virtual/_rollupPluginBabelHelpers.js';\n\nfunction merge(target, source) {\n  Object.keys(source).forEach(function (key) {\n    if (source[key] instanceof Object) {\n      if (target[key]) {\n        Object.assign(source[key], merge(target[key], source[key]));\n      }\n    }\n  });\n  return _objectSpread2(_objectSpread2({}, target), source);\n}\n\nexport default merge;\n","// The source (has been changed) is https://github.com/facebook/react/issues/5465#issuecomment-157888325\nvar CANCELATION_MESSAGE = {\n  type: 'cancelation',\n  msg: 'operation is manually canceled'\n};\n\nfunction makeCancelable(promise) {\n  var hasCanceled_ = false;\n  var wrappedPromise = new Promise(function (resolve, reject) {\n    promise.then(function (val) {\n      return hasCanceled_ ? reject(CANCELATION_MESSAGE) : resolve(val);\n    });\n    promise[\"catch\"](reject);\n  });\n  return wrappedPromise.cancel = function () {\n    return hasCanceled_ = true;\n  }, wrappedPromise;\n}\n\nexport default makeCancelable;\nexport { CANCELATION_MESSAGE };\n","import { slicedToArray as _slicedToArray, objectWithoutProperties as _objectWithoutProperties } from '../_virtual/_rollupPluginBabelHelpers.js';\nimport state from 'state-local';\nimport config$1 from '../config/index.js';\nimport validators from '../validators/index.js';\nimport compose from '../utils/compose.js';\nimport merge from '../utils/deepMerge.js';\nimport makeCancelable from '../utils/makeCancelable.js';\n\n/** the local state of the module */\n\nvar _state$create = state.create({\n  config: config$1,\n  isInitialized: false,\n  resolve: null,\n  reject: null,\n  monaco: null\n}),\n    _state$create2 = _slicedToArray(_state$create, 2),\n    getState = _state$create2[0],\n    setState = _state$create2[1];\n/**\n * set the loader configuration\n * @param {Object} config - the configuration object\n */\n\n\nfunction config(globalConfig) {\n  var _validators$config = validators.config(globalConfig),\n      monaco = _validators$config.monaco,\n      config = _objectWithoutProperties(_validators$config, [\"monaco\"]);\n\n  setState(function (state) {\n    return {\n      config: merge(state.config, config),\n      monaco: monaco\n    };\n  });\n}\n/**\n * handles the initialization of the monaco-editor\n * @return {Promise} - returns an instance of monaco (with a cancelable promise)\n */\n\n\nfunction init() {\n  var state = getState(function (_ref) {\n    var monaco = _ref.monaco,\n        isInitialized = _ref.isInitialized,\n        resolve = _ref.resolve;\n    return {\n      monaco: monaco,\n      isInitialized: isInitialized,\n      resolve: resolve\n    };\n  });\n\n  if (!state.isInitialized) {\n    setState({\n      isInitialized: true\n    });\n\n    if (state.monaco) {\n      state.resolve(state.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n\n    if (window.monaco && window.monaco.editor) {\n      storeMonacoInstance(window.monaco);\n      state.resolve(window.monaco);\n      return makeCancelable(wrapperPromise);\n    }\n\n    compose(injectScripts, getMonacoLoaderScript)(configureLoader);\n  }\n\n  return makeCancelable(wrapperPromise);\n}\n/**\n * injects provided scripts into the document.body\n * @param {Object} script - an HTML script element\n * @return {Object} - the injected HTML script element\n */\n\n\nfunction injectScripts(script) {\n  return document.body.appendChild(script);\n}\n/**\n * creates an HTML script element with/without provided src\n * @param {string} [src] - the source path of the script\n * @return {Object} - the created HTML script element\n */\n\n\nfunction createScript(src) {\n  var script = document.createElement('script');\n  return src && (script.src = src), script;\n}\n/**\n * creates an HTML script element with the monaco loader src\n * @return {Object} - the created HTML script element\n */\n\n\nfunction getMonacoLoaderScript(configureLoader) {\n  var state = getState(function (_ref2) {\n    var config = _ref2.config,\n        reject = _ref2.reject;\n    return {\n      config: config,\n      reject: reject\n    };\n  });\n  var loaderScript = createScript(\"\".concat(state.config.paths.vs, \"/loader.js\"));\n\n  loaderScript.onload = function () {\n    return configureLoader();\n  };\n\n  loaderScript.onerror = state.reject;\n  return loaderScript;\n}\n/**\n * configures the monaco loader\n */\n\n\nfunction configureLoader() {\n  var state = getState(function (_ref3) {\n    var config = _ref3.config,\n        resolve = _ref3.resolve,\n        reject = _ref3.reject;\n    return {\n      config: config,\n      resolve: resolve,\n      reject: reject\n    };\n  });\n  var require = window.require;\n\n  require.config(state.config);\n\n  require(['vs/editor/editor.main'], function (monaco) {\n    storeMonacoInstance(monaco);\n    state.resolve(monaco);\n  }, function (error) {\n    state.reject(error);\n  });\n}\n/**\n * store monaco instance in local state\n */\n\n\nfunction storeMonacoInstance(monaco) {\n  if (!getState().monaco) {\n    setState({\n      monaco: monaco\n    });\n  }\n}\n/**\n * internal helper function\n * extracts stored monaco instance\n * @return {Object|null} - the monaco instance\n */\n\n\nfunction __getMonacoInstance() {\n  return getState(function (_ref4) {\n    var monaco = _ref4.monaco;\n    return monaco;\n  });\n}\n\nvar wrapperPromise = new Promise(function (resolve, reject) {\n  return setState({\n    resolve: resolve,\n    reject: reject\n  });\n});\nvar loader = {\n  config: config,\n  init: init,\n  __getMonacoInstance: __getMonacoInstance\n};\n\nexport default loader;\n","import _t from\"@monaco-editor/loader\";import{memo as Te}from\"react\";import ke,{useState as re,useRef as S,useCallback as oe,useEffect as ne}from\"react\";import Se from\"@monaco-editor/loader\";import{memo as ye}from\"react\";import K from\"react\";var le={wrapper:{display:\"flex\",position:\"relative\",textAlign:\"initial\"},fullWidth:{width:\"100%\"},hide:{display:\"none\"}},v=le;import me from\"react\";var ae={container:{display:\"flex\",height:\"100%\",width:\"100%\",justifyContent:\"center\",alignItems:\"center\"}},Y=ae;function Me({children:e}){return me.createElement(\"div\",{style:Y.container},e)}var Z=Me;var $=Z;function Ee({width:e,height:r,isEditorReady:n,loading:t,_ref:a,className:m,wrapperProps:E}){return K.createElement(\"section\",{style:{...v.wrapper,width:e,height:r},...E},!n&&K.createElement($,null,t),K.createElement(\"div\",{ref:a,style:{...v.fullWidth,...!n&&v.hide},className:m}))}var ee=Ee;var H=ye(ee);import{useEffect as xe}from\"react\";function Ce(e){xe(e,[])}var k=Ce;import{useEffect as ge,useRef as Re}from\"react\";function he(e,r,n=!0){let t=Re(!0);ge(t.current||!n?()=>{t.current=!1}:e,r)}var l=he;function D(){}function h(e,r,n,t){return De(e,t)||be(e,r,n,t)}function De(e,r){return e.editor.getModel(te(e,r))}function be(e,r,n,t){return e.editor.createModel(r,n,t?te(e,t):void 0)}function te(e,r){return e.Uri.parse(r)}function Oe({original:e,modified:r,language:n,originalLanguage:t,modifiedLanguage:a,originalModelPath:m,modifiedModelPath:E,keepCurrentOriginalModel:g=!1,keepCurrentModifiedModel:N=!1,theme:x=\"light\",loading:P=\"Loading...\",options:y={},height:V=\"100%\",width:z=\"100%\",className:F,wrapperProps:j={},beforeMount:A=D,onMount:q=D}){let[M,O]=re(!1),[T,s]=re(!0),u=S(null),c=S(null),w=S(null),d=S(q),o=S(A),b=S(!1);k(()=>{let i=Se.init();return i.then(f=>(c.current=f)&&s(!1)).catch(f=>f?.type!==\"cancelation\"&&console.error(\"Monaco initialization: error:\",f)),()=>u.current?I():i.cancel()}),l(()=>{if(u.current&&c.current){let i=u.current.getOriginalEditor(),f=h(c.current,e||\"\",t||n||\"text\",m||\"\");f!==i.getModel()&&i.setModel(f)}},[m],M),l(()=>{if(u.current&&c.current){let i=u.current.getModifiedEditor(),f=h(c.current,r||\"\",a||n||\"text\",E||\"\");f!==i.getModel()&&i.setModel(f)}},[E],M),l(()=>{let i=u.current.getModifiedEditor();i.getOption(c.current.editor.EditorOption.readOnly)?i.setValue(r||\"\"):r!==i.getValue()&&(i.executeEdits(\"\",[{range:i.getModel().getFullModelRange(),text:r||\"\",forceMoveMarkers:!0}]),i.pushUndoStop())},[r],M),l(()=>{u.current?.getModel()?.original.setValue(e||\"\")},[e],M),l(()=>{let{original:i,modified:f}=u.current.getModel();c.current.editor.setModelLanguage(i,t||n||\"text\"),c.current.editor.setModelLanguage(f,a||n||\"text\")},[n,t,a],M),l(()=>{c.current?.editor.setTheme(x)},[x],M),l(()=>{u.current?.updateOptions(y)},[y],M);let L=oe(()=>{if(!c.current)return;o.current(c.current);let i=h(c.current,e||\"\",t||n||\"text\",m||\"\"),f=h(c.current,r||\"\",a||n||\"text\",E||\"\");u.current?.setModel({original:i,modified:f})},[n,r,a,e,t,m,E]),U=oe(()=>{!b.current&&w.current&&(u.current=c.current.editor.createDiffEditor(w.current,{automaticLayout:!0,...y}),L(),c.current?.editor.setTheme(x),O(!0),b.current=!0)},[y,x,L]);ne(()=>{M&&d.current(u.current,c.current)},[M]),ne(()=>{!T&&!M&&U()},[T,M,U]);function I(){let i=u.current?.getModel();g||i?.original?.dispose(),N||i?.modified?.dispose(),u.current?.dispose()}return ke.createElement(H,{width:z,height:V,isEditorReady:M,loading:P,_ref:w,className:F,wrapperProps:j})}var ie=Oe;var we=Te(ie);import{useState as Ie}from\"react\";import ce from\"@monaco-editor/loader\";function Pe(){let[e,r]=Ie(ce.__getMonacoInstance());return k(()=>{let n;return e||(n=ce.init(),n.then(t=>{r(t)})),()=>n?.cancel()}),e}var Le=Pe;import{memo as ze}from\"react\";import We,{useState as ue,useEffect as W,useRef as C,useCallback as _e}from\"react\";import Ne from\"@monaco-editor/loader\";import{useEffect as Ue,useRef as ve}from\"react\";function He(e){let r=ve();return Ue(()=>{r.current=e},[e]),r.current}var se=He;var _=new Map;function Ve({defaultValue:e,defaultLanguage:r,defaultPath:n,value:t,language:a,path:m,theme:E=\"light\",line:g,loading:N=\"Loading...\",options:x={},overrideServices:P={},saveViewState:y=!0,keepCurrentModel:V=!1,width:z=\"100%\",height:F=\"100%\",className:j,wrapperProps:A={},beforeMount:q=D,onMount:M=D,onChange:O,onValidate:T=D}){let[s,u]=ue(!1),[c,w]=ue(!0),d=C(null),o=C(null),b=C(null),L=C(M),U=C(q),I=C(),i=C(t),f=se(m),Q=C(!1),B=C(!1);k(()=>{let p=Ne.init();return p.then(R=>(d.current=R)&&w(!1)).catch(R=>R?.type!==\"cancelation\"&&console.error(\"Monaco initialization: error:\",R)),()=>o.current?pe():p.cancel()}),l(()=>{let p=h(d.current,e||t||\"\",r||a||\"\",m||n||\"\");p!==o.current?.getModel()&&(y&&_.set(f,o.current?.saveViewState()),o.current?.setModel(p),y&&o.current?.restoreViewState(_.get(m)))},[m],s),l(()=>{o.current?.updateOptions(x)},[x],s),l(()=>{!o.current||t===void 0||(o.current.getOption(d.current.editor.EditorOption.readOnly)?o.current.setValue(t):t!==o.current.getValue()&&(B.current=!0,o.current.executeEdits(\"\",[{range:o.current.getModel().getFullModelRange(),text:t,forceMoveMarkers:!0}]),o.current.pushUndoStop(),B.current=!1))},[t],s),l(()=>{let p=o.current?.getModel();p&&a&&d.current?.editor.setModelLanguage(p,a)},[a],s),l(()=>{g!==void 0&&o.current?.revealLine(g)},[g],s),l(()=>{d.current?.editor.setTheme(E)},[E],s);let X=_e(()=>{if(!(!b.current||!d.current)&&!Q.current){U.current(d.current);let p=m||n,R=h(d.current,t||e||\"\",r||a||\"\",p||\"\");o.current=d.current?.editor.create(b.current,{model:R,automaticLayout:!0,...x},P),y&&o.current.restoreViewState(_.get(p)),d.current.editor.setTheme(E),g!==void 0&&o.current.revealLine(g),u(!0),Q.current=!0}},[e,r,n,t,a,m,x,P,y,E,g]);W(()=>{s&&L.current(o.current,d.current)},[s]),W(()=>{!c&&!s&&X()},[c,s,X]),i.current=t,W(()=>{s&&O&&(I.current?.dispose(),I.current=o.current?.onDidChangeModelContent(p=>{B.current||O(o.current.getValue(),p)}))},[s,O]),W(()=>{if(s){let p=d.current.editor.onDidChangeMarkers(R=>{let G=o.current.getModel()?.uri;if(G&&R.find(J=>J.path===G.path)){let J=d.current.editor.getModelMarkers({resource:G});T?.(J)}});return()=>{p?.dispose()}}return()=>{}},[s,T]);function pe(){I.current?.dispose(),V?y&&_.set(m,o.current.saveViewState()):o.current.getModel()?.dispose(),o.current.dispose()}return We.createElement(H,{width:z,height:F,isEditorReady:s,loading:N,_ref:b,className:j,wrapperProps:A})}var fe=Ve;var de=ze(fe);var Ft=de;export{we as DiffEditor,de as Editor,Ft as default,_t as loader,Le as useMonaco};\n//# sourceMappingURL=index.mjs.map","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport PropTypes from 'prop-types';\nimport React, {useCallback, useEffect, useRef, useState} from 'react';\nimport {Portal} from 'semantic-ui-react';\n\nfunction rectsEqual(a, b) {\n  return a.x === b.x && a.y === b.y && a.width === b.width && a.height === b.height;\n}\n\n/**\n * HOC to make out-of-tree components look like they are placed exactly over another\n * component. This is useful e.g. to escape CSS cascading rules.\n *\n * @param {Node} children Children elements\n * @param {Node} target Target element\n * @param {Object} overrides Style overrides to be applied on the placeholder\n * @param {boolean} open Whether the component is visible\n */\nexport default function Nexus({children, target, overrides, open}) {\n  const [style, setStyle] = useState(null);\n  const lastRect = useRef(null);\n  const nodeRef = useRef(null);\n  const placeholderCallback = useCallback(\n    node => {\n      nodeRef.current = node;\n      if (node && open) {\n        const rect = node.getBoundingClientRect();\n        lastRect.current = rect;\n        setStyle({\n          position: 'absolute',\n          left: rect.x + window.scrollX,\n          top: rect.y + window.scrollY,\n          width: rect.width,\n          height: rect.height,\n          ...overrides,\n        });\n      }\n    },\n    [overrides, open]\n  );\n\n  useEffect(() => {\n    if (!nodeRef.current || !open) {\n      return;\n    }\n    const timer = setInterval(() => {\n      if (!nodeRef.current) {\n        return;\n      }\n      const newRect = nodeRef.current.getBoundingClientRect();\n      if (lastRect.current && !rectsEqual(newRect, lastRect.current)) {\n        placeholderCallback(nodeRef.current);\n      }\n    }, 100);\n    return () => clearInterval(timer);\n  }, [nodeRef, placeholderCallback, open]);\n\n  return (\n    <>\n      <div ref={placeholderCallback} style={{display: open ? 'block' : 'none'}}>\n        {target}\n      </div>\n      <Portal open={style !== null && open}>\n        <div style={style}>{children}</div>\n      </Portal>\n    </>\n  );\n}\n\nNexus.propTypes = {\n  children: PropTypes.node.isRequired,\n  target: PropTypes.node.isRequired,\n  overrides: PropTypes.object,\n  open: PropTypes.bool,\n};\n\nNexus.defaultProps = {\n  overrides: {},\n  open: false,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport templateListURL from 'indico-url:receipts.template_list';\n\nimport MonacoEditor, {loader} from '@monaco-editor/react';\nimport _ from 'lodash';\n// weird import needed because of https://github.com/microsoft/monaco-editor/issues/2874\nimport * as monacoEditor from 'monaco-editor/esm/vs/editor/editor.api';\nimport PropTypes from 'prop-types';\nimport React, {useEffect, useRef, useState} from 'react';\nimport {Form as FinalForm, FormSpy} from 'react-final-form';\nimport {Link} from 'react-router-dom';\nimport {Button, Dimmer, Form, Loader, Message, Segment} from 'semantic-ui-react';\n\nimport {\n  FinalField,\n  FinalInput,\n  FinalSubmitButton,\n  FinalUnloadPrompt,\n  formatters,\n} from 'indico/react/forms';\nimport {Translate} from 'indico/react/i18n';\nimport Nexus from 'indico/react/util/Nexus';\n\nimport {targetLocatorSchema, templateSchema} from './util';\n\nimport './Editor.module.scss';\n\n// load monaco editor locally instead of from a CDN\nloader.config({monaco: monacoEditor});\n\n// Note: if you ever end up adding more file types, or refactoring this into something more\n// generic to use the editor elsewhere, you also need to update the webpack config since it\n// is configured to only include a subset of languages (search for `MonacoEditorWebpackPlugin`)\nconst FILES = {\n  html: {\n    syntax: 'html',\n    fileName: 'template.html',\n  },\n  css: {\n    syntax: 'css',\n    fileName: 'theme.css',\n  },\n  yaml: {\n    syntax: 'yaml',\n    fileName: 'metadata.yaml',\n  },\n};\n\nexport default function Editor({\n  template,\n  onChange,\n  onSubmit,\n  editorHeight,\n  targetLocator,\n  loading,\n  add,\n}) {\n  const [currentFileExt, setFileExt] = useState('html');\n  const codeValues = _.pick(template, ['html', 'css', 'yaml']);\n  const editorRef = useRef(null);\n\n  useEffect(() => {\n    editorRef.current?.focus();\n  }, [currentFileExt]);\n\n  return (\n    <FinalForm\n      onSubmit={onSubmit}\n      initialValues={{\n        title: template?.title || null,\n        default_filename: template?.default_filename || '',\n        ...codeValues,\n      }}\n      initialValuesEqual={_.isEqual}\n    >\n      {({handleSubmit, values}) => (\n        <Form onSubmit={handleSubmit} subscription={{dirty: true}}>\n          <FormSpy subscription={{dirtyFieldsSinceLastSubmit: true}}>\n            {/*\n               The form stays dirty when we submit for creation so we need to disable the unload\n               prompt if there were no chances since submitting it. For editing we just use the\n               standard behavior since the dirty flag is properly cleared.\n            */}\n            {({dirtyFieldsSinceLastSubmit}) =>\n              (!!template.owner || Object.values(dirtyFieldsSinceLastSubmit).some(x => x)) && (\n                <FinalUnloadPrompt router />\n              )\n            }\n          </FormSpy>\n          <Form.Group widths=\"equal\">\n            <FinalInput\n              name=\"title\"\n              label={Translate.string('Title')}\n              type=\"text\"\n              disabled={loading}\n              required\n              rows={24}\n            />\n            <FinalInput\n              name=\"default_filename\"\n              label={Translate.string('Default filename')}\n              type=\"text\"\n              componentLabel=\"-{n}.pdf\"\n              labelPosition=\"right\"\n              format={formatters.slugify}\n              disabled={loading}\n              formatOnBlur\n            />\n          </Form.Group>\n          <Button.Group attached=\"top\">\n            {['html', 'css', 'yaml'].map(format => (\n              <Button\n                type=\"button\"\n                primary={format === currentFileExt}\n                key={format}\n                onClick={() => setFileExt(format)}\n              >\n                {FILES[format].fileName}\n              </Button>\n            ))}\n          </Button.Group>\n          {['html', 'css', 'yaml'].map(fileExt => (\n            <FinalField\n              key={fileExt}\n              name={fileExt}\n              initialValue={template[fileExt]}\n              parse={v => v}\n            >\n              {({input, meta}) => (\n                <>\n                  <Nexus\n                    target={<div style={{height: `${editorHeight}px`, width: '100%'}} />}\n                    open={fileExt === currentFileExt}\n                  >\n                    {loading ? (\n                      <Segment style={{height: `${editorHeight}px`}} styleName=\"loading-segment\">\n                        <Dimmer active>\n                          <Loader />\n                        </Dimmer>\n                      </Segment>\n                    ) : (\n                      <MonacoEditor\n                        height={`${editorHeight}px`}\n                        theme=\"vs-dark\"\n                        path={FILES[fileExt].fileName}\n                        defaultLanguage={FILES[fileExt].syntax}\n                        value={input.value}\n                        onChange={value => {\n                          onChange({...values, [fileExt]: value});\n                          input.onChange(value);\n                        }}\n                        onMount={(editor, monaco) => {\n                          editorRef.current = editor;\n                          editor.addCommand(\n                            // eslint-disable-next-line no-bitwise\n                            monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyS,\n                            handleSubmit\n                          );\n                        }}\n                        options={{minimap: {enabled: false}}}\n                      />\n                    )}\n                  </Nexus>\n                  <Message error visible={!!meta.submitError}>\n                    {meta.submitError}\n                  </Message>\n                </>\n              )}\n            </FinalField>\n          ))}\n          <Form.Group styleName=\"buttons\">\n            <FinalSubmitButton label={Translate.string('Save')} disabledUntilChange={!add} />\n            <Link to={templateListURL(targetLocator)} className=\"ui button\">\n              <Translate>Cancel</Translate>\n            </Link>\n          </Form.Group>\n        </Form>\n      )}\n    </FinalForm>\n  );\n}\n\nEditor.propTypes = {\n  template: templateSchema.isRequired,\n  onChange: PropTypes.func.isRequired,\n  onSubmit: PropTypes.func.isRequired,\n  editorHeight: PropTypes.number.isRequired,\n  targetLocator: targetLocatorSchema.isRequired,\n  loading: PropTypes.bool,\n  add: PropTypes.bool,\n};\n\nEditor.defaultProps = {\n  loading: false,\n  add: false,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport eventImagesURL from 'indico-url:receipts.images';\nimport templateLivePreviewURL from 'indico-url:receipts.template_live_preview';\n\nimport _ from 'lodash';\nimport PropTypes from 'prop-types';\nimport React, {useEffect, useState} from 'react';\nimport {Grid, Header, Icon, Segment} from 'semantic-ui-react';\n\nimport {ManagementPageSubTitle} from 'indico/react/components';\nimport {Translate} from 'indico/react/i18n';\n\nimport Editor from './Editor';\nimport Previewer from './Previewer';\nimport {targetLocatorSchema, templateSchema} from './util';\n\nexport default function TemplatePane({\n  template,\n  onSubmit,\n  targetLocator,\n  editorHeight,\n  add,\n  loading,\n}) {\n  const [data, setData] = useState({});\n\n  useEffect(() => {\n    setData({\n      title: template.title,\n      ..._.pick(template, ['html', 'css', 'yaml']),\n    });\n  }, [template]);\n\n  return (\n    <>\n      <ManagementPageSubTitle\n        title={\n          add\n            ? Translate.string('Add document template')\n            : Translate.string('Edit document template')\n        }\n      />\n      <Grid columns={2} divided>\n        <Grid.Row>\n          <Grid.Column>\n            <Editor\n              onSubmit={onSubmit}\n              template={template}\n              editorHeight={editorHeight}\n              targetLocator={targetLocator}\n              onChange={setData}\n              loading={loading}\n              add={add}\n            />\n          </Grid.Column>\n          <Grid.Column>\n            {data.html && data.html.length >= 3 ? (\n              <Previewer\n                url={templateLivePreviewURL(targetLocator)}\n                data={data}\n                fetchImagesURL={'event_id' in targetLocator ? eventImagesURL(targetLocator) : null}\n              />\n            ) : (\n              <Segment placeholder>\n                <Header icon>\n                  <Icon name=\"eye\" />\n                  <Translate>Start writing a template to see the preview here...</Translate>\n                </Header>\n              </Segment>\n            )}\n          </Grid.Column>\n        </Grid.Row>\n      </Grid>\n    </>\n  );\n}\n\nTemplatePane.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n  template: templateSchema,\n  targetLocator: targetLocatorSchema.isRequired,\n  editorHeight: PropTypes.number,\n  add: PropTypes.bool,\n  loading: PropTypes.bool,\n};\n\nTemplatePane.defaultProps = {\n  template: {html: '', css: '', yaml: ''},\n  editorHeight: 800,\n  add: false,\n  loading: false,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport addDefaultTemplateURL from 'indico-url:receipts.add_default_template';\nimport addTemplateURL from 'indico-url:receipts.add_template';\nimport editTemplateURL from 'indico-url:receipts.edit_template';\nimport getDefaultTemplateURL from 'indico-url:receipts.get_default_template';\nimport templateURL from 'indico-url:receipts.template';\nimport templateListURL from 'indico-url:receipts.template_list';\n\nimport PropTypes from 'prop-types';\nimport React, {useReducer, useEffect} from 'react';\nimport {useHistory} from 'react-router';\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom';\nimport {Message} from 'semantic-ui-react';\n\nimport {ManagementPageBackButton} from 'indico/react/components';\nimport {useIndicoAxios} from 'indico/react/hooks';\nimport {Translate} from 'indico/react/i18n';\nimport {routerPathFromFlask, useNumericParam} from 'indico/react/util/routing';\nimport {indicoAxios} from 'indico/utils/axios';\n\nimport TemplateListPane from './TemplateListPane';\nimport TemplatePane from './TemplatePane';\nimport {defaultTemplateSchema, templateSchema} from './util';\n\nconst targetLocatorSchema = PropTypes.shape({\n  event_id: PropTypes.number,\n  category_id: PropTypes.number,\n});\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'ADD_TEMPLATE':\n      return {\n        ...state,\n        ownTemplates: [...state.ownTemplates, action.template],\n        message: Translate.string('Template \"{title}\" was added', {title: action.template.title}),\n      };\n    case 'UPDATE_TEMPLATE':\n      return {\n        ...state,\n        ownTemplates: state.ownTemplates.map(tpl =>\n          tpl.id === action.id ? {...tpl, ...action.changes} : tpl\n        ),\n        message: Translate.string('Template \"{title}\" was updated', {title: action.changes.title}),\n      };\n    case 'DELETE_TEMPLATE':\n      return {\n        ...state,\n        ownTemplates: state.ownTemplates.filter(tpl => tpl.id !== action.id),\n        message: Translate.string('Template deleted'),\n      };\n    case 'RESET_MESSAGE':\n      return {\n        ...state,\n        message: null,\n      };\n    default:\n      return state;\n  }\n}\n\nfunction EditTemplatePane({templates, dispatch, targetLocator}) {\n  const templateId = useNumericParam('template_id');\n\n  const saveTemplate = async data => {\n    try {\n      await indicoAxios.patch(editTemplateURL({template_id: templateId, ...targetLocator}), data);\n      dispatch({type: 'UPDATE_TEMPLATE', id: templateId, changes: data});\n    } catch ({\n      response: {\n        data: {webargs_errors: errors},\n      },\n    }) {\n      return errors;\n    }\n  };\n\n  return (\n    <>\n      <ManagementPageBackButton url={templateListURL(targetLocator)} />\n      <TemplatePane\n        targetLocator={targetLocator}\n        template={templates.find(tpl => tpl.id === templateId)}\n        onSubmit={saveTemplate}\n      />\n    </>\n  );\n}\n\nEditTemplatePane.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  targetLocator: targetLocatorSchema.isRequired,\n  templates: PropTypes.arrayOf(templateSchema).isRequired,\n};\n\nfunction NewTemplatePane({dispatch, targetLocator, defaultTemplate}) {\n  const history = useHistory();\n  const {data: defaultTemplateData, loading} = useIndicoAxios(\n    {url: defaultTemplate && getDefaultTemplateURL({template_name: defaultTemplate})},\n    {manual: !defaultTemplate}\n  );\n\n  const createTemplate = async data => {\n    try {\n      const {data: template} = await indicoAxios.post(addTemplateURL(targetLocator), data);\n      dispatch({type: 'ADD_TEMPLATE', template});\n      // back to list of templates\n      history.push(templateListURL(targetLocator));\n    } catch ({\n      response: {\n        data: {webargs_errors: errors},\n      },\n    }) {\n      return errors;\n    }\n  };\n\n  return (\n    <>\n      <ManagementPageBackButton url={templateListURL(targetLocator)} />\n      <TemplatePane\n        onSubmit={createTemplate}\n        targetLocator={targetLocator}\n        template={defaultTemplateData || undefined}\n        loading={loading}\n        add\n      />\n    </>\n  );\n}\n\nNewTemplatePane.propTypes = {\n  dispatch: PropTypes.func.isRequired,\n  targetLocator: targetLocatorSchema.isRequired,\n  defaultTemplate: PropTypes.string,\n};\n\nNewTemplatePane.defaultProps = {\n  defaultTemplate: '',\n};\n\nexport default function TemplateManagement({initialState, defaultTemplates, targetLocator}) {\n  const [state, dispatch] = useReducer(reducer, initialState);\n  const targetIdParams = Object.keys(targetLocator);\n\n  // hide success messages after 2.5 seconds\n  useEffect(() => {\n    if (state.message) {\n      setTimeout(() => dispatch({type: 'RESET_MESSAGE'}), 2500);\n    }\n  }, [state.message]);\n\n  return (\n    <>\n      {state.message && (\n        <Message success>\n          <Message.Content>{state.message}</Message.Content>\n        </Message>\n      )}\n      <Router>\n        <Switch>\n          <Route\n            exact\n            path={routerPathFromFlask(addTemplateURL, targetIdParams)}\n            render={() => <NewTemplatePane dispatch={dispatch} targetLocator={targetLocator} />}\n          />\n          <Route\n            exact\n            path={routerPathFromFlask(addDefaultTemplateURL, [...targetIdParams, 'template_name'])}\n            render={({\n              match: {\n                params: {template_name: templateName},\n              },\n            }) => (\n              <NewTemplatePane\n                dispatch={dispatch}\n                targetLocator={targetLocator}\n                defaultTemplate={templateName}\n              />\n            )}\n          />\n          <Route\n            exact\n            path={[routerPathFromFlask(templateURL, [...targetIdParams, 'template_id'])]}\n            render={() => (\n              <EditTemplatePane\n                templates={state.ownTemplates}\n                dispatch={dispatch}\n                targetLocator={targetLocator}\n              />\n            )}\n          />\n          <Route\n            exact\n            path={routerPathFromFlask(templateListURL, targetIdParams)}\n            render={() => (\n              <TemplateListPane\n                dispatch={dispatch}\n                defaultTemplates={defaultTemplates}\n                targetLocator={targetLocator}\n                {...state}\n              />\n            )}\n          />\n        </Switch>\n      </Router>\n    </>\n  );\n}\n\nTemplateManagement.propTypes = {\n  initialState: PropTypes.shape({\n    ownTemplates: PropTypes.arrayOf(templateSchema),\n    inheritedTemplates: PropTypes.arrayOf(templateSchema),\n  }).isRequired,\n  defaultTemplates: PropTypes.objectOf(defaultTemplateSchema).isRequired,\n  targetLocator: targetLocatorSchema.isRequired,\n};\n","// This file is part of Indico.\n// Copyright (C) 2002 - 2024 CERN\n//\n// Indico is free software; you can redistribute it and/or\n// modify it under the terms of the MIT License; see the\n// LICENSE file for more details.\n\nimport React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport TemplateManagement from './TemplateManagement';\n\nwindow.setupReceiptTemplateList = function(\n  elem,\n  ownTemplates,\n  inheritedTemplates,\n  otherTemplates,\n  defaultTemplates,\n  targetLocator\n) {\n  document.addEventListener('DOMContentLoaded', () => {\n    ReactDOM.render(\n      <TemplateManagement\n        initialState={{ownTemplates, inheritedTemplates, otherTemplates}}\n        defaultTemplates={defaultTemplates}\n        targetLocator={targetLocator}\n      />,\n      elem\n    );\n  });\n};\n"],"names":["targetLocatorSchema","PropTypes","event_id","category_id","templateSchema","id","title","html","css","customFields","owner","locator","defaultTemplateSchema","isRequired","version","addDefaultTemplateURL","_buildFlaskURL","bind","endpoint","rules","args","converters","defaults","object_type","trace","data","isDynamic","addTemplatePageURL","cloneTemplateURL","template_id","deleteTemplateURL","templateURL","templateListURL","templatePreviewURL","TemplateRow","_ref","template","type","dispatch","setDeletePrompt","targetLocator","inherited","typeLabel","receipt","color","text","Translate","string","certificate","React","className","Label","size","style","marginLeft","basic","Param","name","value","wrapper","href","_objectSpread","Icon","Link","to","onClick","evt","target","dispatchEvent","Event","async","clonedTemplate","indicoAxios","post","err","handleAxiosError","cloneTemplate","func","delete","deleteTemplate","TemplateListPane","_ref2","ownTemplates","inheritedTemplates","otherTemplates","defaultTemplates","deletePrompt","useState","RequestConfirmDelete","onClose","requestFunc","open","length","_sortBy","map","tpl","key","Accordion","panels","content","Dropdown","button","labeled","icon","direction","Menu","Item","as","Object","entries","_ref3","t","_ref4","template_name","propTypes","defaultProps","_defineProperty","obj","defineProperty","enumerable","configurable","writable","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","apply","_objectSpread2","i","arguments","source","forEach","getOwnPropertyDescriptors","defineProperties","_objectWithoutProperties","excluded","sourceKeys","indexOf","_objectWithoutPropertiesLoose","sourceSymbolKeys","prototype","propertyIsEnumerable","call","_arrayLikeToArray","arr","len","arr2","Array","curry","fn","curried","_this","this","_len2","_key2","_len3","nextArgs","_key3","concat","isObject","toString","includes","isFunction","errorHandler","errorMessages","Error","initialIsRequired","initialType","initialContent","handlerType","handlersType","selectorType","changeType","changeField","validators","changes","initial","some","field","property","hasOwnProperty","selector","handler","values","_handler","extractChanges","state","causedChanges","current","updateState","didStateUpdate","_handler$field","create","undefined","didUpdate","update","validate","getChanges","_len","fns","_key","x","reduceRight","y","f","compose","paths","vs","configIsRequired","configType","deprecation","config","urls","console","warn","monacoBase","merge","assign","CANCELATION_MESSAGE","msg","promise","hasCanceled_","wrappedPromise","Promise","resolve","reject","then","val","cancel","_state$create","isInitialized","monaco","_state$create2","isArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","_iterableToArrayLimit","o","minLen","n","slice","constructor","from","test","_unsupportedIterableToArray","TypeError","_nonIterableRest","getState","setState","injectScripts","script","document","body","appendChild","getMonacoLoaderScript","configureLoader","src","loaderScript","createElement","onload","onerror","require","window","storeMonacoInstance","error","wrapperPromise","loader","globalConfig","_validators$config","init","editor","__getMonacoInstance","v","display","position","textAlign","fullWidth","width","hide","Y","container","height","justifyContent","alignItems","$","children","e","ee","r","isEditorReady","loading","a","m","wrapperProps","E","ref","H","k","l","D","h","getModel","te","De","createModel","be","Uri","parse","ie","original","modified","language","originalLanguage","modifiedLanguage","originalModelPath","modifiedModelPath","keepCurrentOriginalModel","g","keepCurrentModifiedModel","N","theme","P","options","V","z","F","j","beforeMount","A","onMount","q","M","O","T","s","u","c","w","d","b","catch","dispose","I","getOriginalEditor","setModel","getModifiedEditor","getOption","EditorOption","readOnly","setValue","getValue","executeEdits","range","getFullModelRange","forceMoveMarkers","pushUndoStop","setModelLanguage","setTheme","updateOptions","L","U","createDiffEditor","automaticLayout","se","_","Map","fe","defaultValue","defaultLanguage","defaultPath","path","line","overrideServices","saveViewState","keepCurrentModel","onChange","onValidate","Q","B","p","R","set","restoreViewState","get","revealLine","X","model","onDidChangeModelContent","onDidChangeMarkers","G","uri","find","J","getModelMarkers","resource","Ft","Nexus","overrides","setStyle","lastRect","useRef","nodeRef","placeholderCallback","useCallback","node","rect","getBoundingClientRect","left","scrollX","top","scrollY","useEffect","timer","setInterval","newRect","clearInterval","Portal","monacoEditor","FILES","syntax","fileName","yaml","Editor","onSubmit","editorHeight","add","currentFileExt","setFileExt","codeValues","_pick","editorRef","_editorRef$current","focus","FinalForm","initialValues","default_filename","initialValuesEqual","_isEqual","handleSubmit","Form","subscription","dirty","FormSpy","dirtyFieldsSinceLastSubmit","FinalUnloadPrompt","router","Group","widths","FinalInput","label","disabled","required","rows","componentLabel","labelPosition","format","formatters","slugify","formatOnBlur","Button","attached","primary","fileExt","FinalField","initialValue","input","meta","Segment","Dimmer","active","Loader","MonacoEditor","addCommand","KeyMod","CtrlCmd","KeyCode","KeyS","minimap","enabled","Message","visible","submitError","FinalSubmitButton","disabledUntilChange","eventImagesURL","templateLivePreviewURL","TemplatePane","setData","ManagementPageSubTitle","Grid","columns","divided","Row","Column","Previewer","url","fetchImagesURL","placeholder","Header","addTemplateURL","editTemplateURL","getDefaultTemplateURL","reducer","action","message","EditTemplatePane","templates","templateId","useNumericParam","ManagementPageBackButton","patch","response","webargs_errors","errors","NewTemplatePane","defaultTemplate","history","useHistory","defaultTemplateData","useIndicoAxios","manual","TemplateManagement","initialState","useReducer","targetIdParams","setTimeout","success","Content","Router","Switch","Route","exact","routerPathFromFlask","render","match","params","templateName","_extends","setupReceiptTemplateList","elem","addEventListener","ReactDOM"],"sourceRoot":""}